(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1309:function(e,t,a){"use strict";var n=a(5),r=a(0),o=a.n(r),i=a(52);a(1314);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o,i,c=[],l=!0,s=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=o.call(a)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,r=e}finally{try{if(!l&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(s)throw r}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function s(e){var t=e.title,a=e.visible,l=e.onClose,s=e.closeIcon,u=e.children,m=e.showArrowClose,d=e.onSearch,f=e.searchText,b=e.className,p=e.onEdit,v=e.onDelete,k=e.footer,h=c(Object(r.useState)(!1),2),w=h[0],g=h[1];return o.a.createElement(o.a.Fragment,null,a?o.a.createElement("div",{className:"mobile-slide-panel_overlay",onClick:function(){m&&l()}}):null,o.a.createElement("div",{className:"mobile-slide-panel ".concat(b," ").concat(a?"is-open":"")},o.a.createElement("div",{className:"mobile-slide-panel_title ".concat(w?"search-active":"")},w?o.a.createElement(o.a.Fragment,null,o.a.createElement(i.s,{label:n.b.formatMessage({id:"shared.mobile-slide-panel.search"}),onChange:function(e){return d(e)},value:f}),o.a.createElement(i.i,{icon:"sga-icon-times",onClick:function(){g(!1),d("")},size:"size-xs"})):o.a.createElement(o.a.Fragment,null,m?o.a.createElement(i.i,{icon:s||"sga-icon-arrow-down",onClick:function(){l()},size:"size-s"}):null,o.a.createElement("div",{className:"title-text"},t),d?o.a.createElement(i.i,{icon:"sga-icon-search",onClick:function(){return g(!0)},size:"size-xs"}):null,p?o.a.createElement(i.i,{icon:"sga-icon-edit",onClick:function(){return p()},size:"size-xs"}):null,v?o.a.createElement(i.i,{icon:"sga-icon-trash",onClick:function(){return v()},size:"size-xs"}):null)),o.a.createElement("div",{className:"mobile-slide-panel_content"},u),k?o.a.createElement("footer",{className:"footer"},k):null))}s.defaultProps={className:"",visible:!1,onClose:function(){},closeIcon:null,searchText:"",title:"title",showArrowClose:!0,footer:null},t.a=s},1314:function(e,t,a){},1322:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(5),i=a(52),c=a(1309);a(1323);t.a=function(e){var t=e.title,a=e.content,n=e.visible,l=e.onClose,s=e.onFinalize;return r.a.createElement(c.a,{className:"finalize-pannel",title:t,visible:n,onClose:function(){return l()},showArrowClose:!1},r.a.createElement("div",{className:"mb-16"},a),r.a.createElement(i.d,{kind:"primary",className:"mb-16",onClick:s,label:o.b.formatMessage({id:"stock.pda.work-order-transfer-exec.finalize-pannel.btn-finalize"})}),r.a.createElement(i.d,{kind:"secondary",className:"mb-16",onClick:function(){return l()},label:o.b.formatMessage({id:"stock.pda.work-order-transfer-exec.finalize-pannel.btn-cancel"})}))}},1323:function(e,t,a){},1352:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(1320),i=a(162),c=a(5),l=a(52),s=a(387),u=a(1311),m=a(1316),d=a(1309),f=a(1322),b=a(20);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o,i,c=[],l=!0,s=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=o.call(a)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,r=e}finally{try{if(!l&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(s)throw r}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var k=null;t.default=Object(s.a)(Object(u.a)((function(e){var t=e.match,a=e.centerSelected,s=e.fetchWarehouseMovement,u=e.warehouseMovement,v=e.fetchWarehouseMovementStatus,h=e.warehouseMovementsStatus,w=e.inventoryReferenceScanLoc,g=e.inventoryMaterialExec,y=e.inventoryMaterialUpdateLocStock,M=e.inventoryLocationCancelInput,E=e.inventoryReferenceInLocation,I=e.updateWarehouseMovemementStatus,S=e.fetchMaterialLocations,C=e.materialLocations,N=e.fetchWarehouseMovementLocations,O=e.warehouseMovementLocations,j=e.redirect,z=e.redirectToExec,x=e.setRedirectToExec,A=e.changeStatusTriggered,L=p(Object(n.useState)(!1),2),T=L[0],R=L[1],F=p(Object(n.useState)(!1),2),P=F[0],U=F[1],_=p(Object(n.useState)(!1),2),W=_[0],J=_[1],$=p(Object(n.useState)(!1),2),B=$[0],D=$[1],q=p(Object(n.useState)(!1),2),G=q[0],H=q[1],K=p(Object(n.useState)(!1),2),Q=K[0],V=K[1];Object(n.useEffect)((function(){0===h.length&&v(),z&&x(!1),k=null}),[]);var X=g.update;Object(n.useEffect)((function(){a&&s(a.centerId,t.params.warehouseMovementId)}),[a,X]),Object(n.useEffect)((function(){u&&a&&C.haveMore&&!C.fetching&&u.materials.length>0&&S(a.centerId,u.materials[0].materialId,{offset:C.offset,limit:C.limit},!0)}),[u,C]),Object(n.useEffect)((function(){if(a&&u&&u.warehouseMovementStatus&&2!==u.warehouseMovementStatus.warehouseMovementStatusId&&!A&&!k){var e=h.find((function(e){return 2===e.warehouseMovementStatusId}));k=setTimeout((function(){I(a.centerId,t.params.warehouseMovementId,e,u.warehouseMovementType.warehouseMovementTypeName,!1,!1)}),2e3)}}),[a,u]),Object(n.useEffect)((function(){var e=u&&u.materials&&(!u.locations||u.locations&&0===u.locations.length);a&&O.haveMore&&!O.fetching&&e&&N(a.centerId,t.params.warehouseMovementId,{offset:O.offset,limit:O.limit})}),[a,O,u]),Object(n.useEffect)((function(){null!==g.scannedLocation&&D(!0)}),[g]),Object(n.useEffect)((function(){j&&i.b.push("/stock/pda/warehouse-movements/".concat(t.params.warehouseMovementId))}),[j]),Object(n.useEffect)((function(){u&&100===u.progressPercent&&!Q&&H(!0)}),[u]);var Y=function(){if(2===u.warehouseMovementStatus.warehouseMovementStatusId){var e=h.find((function(e){return 4===e.warehouseMovementStatusId}));I(a.centerId,t.params.warehouseMovementId,e,u.warehouseMovementType.warehouseMovementTypeName,!0)}},Z=[{type:"primary",label:c.b.formatMessage({id:"stock.pda.work-order-exec.finalize"}),onClick:function(){return J(!0)},closeOnClick:!1},{type:"secondary",label:c.b.formatMessage({id:"stock.pda.work-order-exec.pause"}),onClick:function(){Y()},closeOnClick:!0}],ee=function(){var e=h.find((function(e){return 3===e.warehouseMovementStatusId}));I(a.centerId,t.params.warehouseMovementId,e,u.warehouseMovementType.warehouseMovementTypeName,!0),J(!1)},te=[];u&&u.progressPercent<100&&te.push({type:"text",label:r.a.createElement("span",{className:"error-msg"},r.a.createElement(c.a,{id:"stock.pda.exec-inventary-material.finalize-warning"}))}),te.push({type:"primary",label:c.b.formatMessage({id:"stock.pda.work-order-exec.finalize"}),onClick:ee,closeOnClick:!0}),te.push({type:"secondary",label:c.b.formatMessage({id:"stock.pda.work-order-detail.menu.back"}),onClick:function(){return J(!1)},closeOnClick:!1});var ae=C.list.filter((function(e){return!O.list.some((function(t){return t.sourceLocation.location.locationId===e.locationId}))})),ne=Z;return ne=W?te:ne,r.a.createElement(m.a,{breadcrumb:c.b.formatMessage({id:"stock.pda.work-order.inventary.exect.title"}),onBack:Y,pageActions:ne,onPageActionsClose:function(){return J(!1)},pageActionsTitle:W?c.b.formatMessage({id:"stock.pda.work-order-detail.menu.actions.confirm-finalize"}):c.b.formatMessage({id:"stock.pda.work-order-detail.menu.actions"}),onScan:Object(b.e)((function(e){e&&w(a?a.centerId:0,e)}),100),scanLabel:c.b.formatMessage({id:"stock.pda.work-order-detail.free-entry.scan-material"}),resourceName:"warehouseMovmementExecInventoryPage"},r.a.createElement("div",{className:"detail-container"},r.a.createElement(o.b,null,r.a.createElement(o.a,{w:6},r.a.createElement(l.h,{className:"mb-16",title:c.b.formatMessage({id:"stock.pda.work-order.inventary.order-num"}),subtitle:u?u.warehouseMovementId:null})),r.a.createElement(o.a,{w:6},r.a.createElement(l.h,{className:"mb-16",title:c.b.formatMessage({id:"stock.pda.work-order-detail.material.manufacturerRef"}),subtitle:u&&u.materials&&u.materials.length>0?u.materials[0].manufacturerReference:null}))),r.a.createElement(l.h,{className:"mb-16 mt-0",title:c.b.formatMessage({id:"stock.pda.work-order-detail.material"}),subtitle:u&&u.materials&&u.materials.length>0?u.materials[0].materialName.name:null}),r.a.createElement(l.o,{className:"mb-16",title:c.b.formatMessage({id:"stock.pda.work-order-detail.inventary.locations-and-units-pending"}),number:ae.length,icon:"sga-icon-info-circle",onActionClicked:function(){return R(!0)},disabledNumber:!0}),r.a.createElement(l.o,{className:"mb-16",title:c.b.formatMessage({id:"stock.pda.work-order-detail.inventary.locations-and-units"}),number:O.list.length,icon:"sga-icon-info-circle",onActionClicked:function(){return U(!0)},disabledNumber:!0})),u&&C.list&&C.list.length>0?r.a.createElement(d.a,{title:c.b.formatMessage({id:"stock.pda.work-order-detail.inventary.locations-and-units-pending"}),visible:T,onClose:function(){return R(!1)}},ae.map((function(e){return r.a.createElement(l.o,{key:e.locationId,className:"order-detail_references-list-item",number:e.stock||"-",title:e.locationCode,subtitle:c.b.formatMessage({id:"stock.pda.work-order-detail.location"})})}))):null,u&&O.list&&O.list.length?r.a.createElement(d.a,{title:c.b.formatMessage({id:"stock.pda.work-order-detail.inventary.locations-and-units"}),visible:P,onClose:function(){return U(!1)}},O.list&&O.list.map((function(e){return r.a.createElement(l.o,{key:"".concat(e.sourceLocation.location.locationId,"-finalized"),className:"order-detail_references-list-item",number:e.sourceLocation.movementUnits||"-",title:e.sourceLocation.location.locationName,subtitle:c.b.formatMessage({id:"stock.pda.work-order-detail.location"})})}))):null,function(){if(!g.scannedLocation)return null;var e=[];return g.currentStock&&g.currentStock<0&&e.push(c.b.formatMessage({id:"stock.pda.work-order-detail.incorrect-value"})),r.a.createElement(d.a,{key:g.scannedMaterial?g.scannedMaterial.materialId:0,title:u&&u.materials&&u.materials.length>0?u.materials[0].manufacturerReference:c.b.formatMessage({id:"stock.pda.work-order-detail.scanned-location"}),visible:B},r.a.createElement(l.h,{className:"mb-16",title:c.b.formatMessage({id:"stock.pda.work-order-detail.location"}),subtitle:g.scannedLocation?g.scannedLocation.locationName:null}),r.a.createElement(l.m,{className:"mb-16",label:c.b.formatMessage({id:"stock.pda.work-order-detail.units-inventary"}),value:g.currentStock?g.currentStock:0,onChange:function(e){return y(e)},errors:e}),r.a.createElement(l.d,{kind:"primary",className:"mb-16",disabled:e.length>0,onClick:function(){return e={material:{materialId:u.materials[0].materialId},sourceLocation:{location:{locationId:g.scannedLocation.locationId},movementUnits:g.currentStock?g.currentStock:0}},E(a.centerId,t.params.warehouseMovementId,e,{material:u.materials[0].manufacturerReference,location:g.scannedLocation.locationName}),void D(!1);var e},label:c.b.formatMessage({id:"stock.pda.work-order-detail.inventary"})}),r.a.createElement(l.d,{kind:"secondary",onClick:function(){D(!1),M()},label:c.b.formatMessage({id:"stock.pda.work-order-detail.cancel"})}))}(),r.a.createElement(f.a,{title:c.b.formatMessage({id:"stock.pda.work-order.inventary-reference.finalize.title"}),content:c.b.formatMessage({id:"stock.pda.work-order.inventary-reference.finalize.content"}),visible:G,onClose:function(){H(!1),V(!0)},onFinalize:function(){return ee()}}))})))}}]);