(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1309:function(e,t,a){"use strict";var n=a(5),r=a(0),o=a.n(r),i=a(52);a(1314);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o,i,l=[],c=!0,s=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=o.call(a)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(s)throw r}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function s(e){var t=e.title,a=e.visible,c=e.onClose,s=e.closeIcon,u=e.children,m=e.showArrowClose,d=e.onSearch,f=e.searchText,b=e.className,v=e.onEdit,p=e.onDelete,h=e.footer,k=l(Object(r.useState)(!1),2),g=k[0],w=k[1];return o.a.createElement(o.a.Fragment,null,a?o.a.createElement("div",{className:"mobile-slide-panel_overlay",onClick:function(){m&&c()}}):null,o.a.createElement("div",{className:"mobile-slide-panel ".concat(b," ").concat(a?"is-open":"")},o.a.createElement("div",{className:"mobile-slide-panel_title ".concat(g?"search-active":"")},g?o.a.createElement(o.a.Fragment,null,o.a.createElement(i.s,{label:n.b.formatMessage({id:"shared.mobile-slide-panel.search"}),onChange:function(e){return d(e)},value:f}),o.a.createElement(i.i,{icon:"sga-icon-times",onClick:function(){w(!1),d("")},size:"size-xs"})):o.a.createElement(o.a.Fragment,null,m?o.a.createElement(i.i,{icon:s||"sga-icon-arrow-down",onClick:function(){c()},size:"size-s"}):null,o.a.createElement("div",{className:"title-text"},t),d?o.a.createElement(i.i,{icon:"sga-icon-search",onClick:function(){return w(!0)},size:"size-xs"}):null,v?o.a.createElement(i.i,{icon:"sga-icon-edit",onClick:function(){return v()},size:"size-xs"}):null,p?o.a.createElement(i.i,{icon:"sga-icon-trash",onClick:function(){return p()},size:"size-xs"}):null)),o.a.createElement("div",{className:"mobile-slide-panel_content"},u),h?o.a.createElement("footer",{className:"footer"},h):null))}s.defaultProps={className:"",visible:!1,onClose:function(){},closeIcon:null,searchText:"",title:"title",showArrowClose:!0,footer:null},t.a=s},1314:function(e,t,a){},1322:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(5),i=a(52),l=a(1309);a(1323);t.a=function(e){var t=e.title,a=e.content,n=e.visible,c=e.onClose,s=e.onFinalize;return r.a.createElement(l.a,{className:"finalize-pannel",title:t,visible:n,onClose:function(){return c()},showArrowClose:!1},r.a.createElement("div",{className:"mb-16"},a),r.a.createElement(i.d,{kind:"primary",className:"mb-16",onClick:s,label:o.b.formatMessage({id:"stock.pda.work-order-transfer-exec.finalize-pannel.btn-finalize"})}),r.a.createElement(i.d,{kind:"secondary",className:"mb-16",onClick:function(){return c()},label:o.b.formatMessage({id:"stock.pda.work-order-transfer-exec.finalize-pannel.btn-cancel"})}))}},1323:function(e,t,a){},1351:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=(a(1320),a(162)),i=a(5),l=a(52),c=a(387),s=a(1311),u=a(1316),m=a(1309),d=a(1322),f=a(20);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o,i,l=[],c=!0,s=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=o.call(a)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(s)throw r}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var p=null;t.default=Object(c.a)(Object(s.a)((function(e){var t=e.match,a=e.centerSelected,c=e.fetchWarehouseMovement,s=e.warehouseMovement,v=e.fetchWarehouseMovementStatus,h=e.warehouseMovementsStatus,k=e.fetchWarehouseMovementReferences,g=e.warehouseMovementReferences,w=e.inventoryLocationScanRef,y=e.inventoryLocationExec,M=e.inventoryLocationUpdateRefStock,E=e.inventoryLocationCancelInput,I=e.inventoryReferenceInLocation,S=e.updateWarehouseMovemementStatus,C=e.fetchLocationMaterials,N=e.locationMaterials,O=e.redirect,j=e.redirectToExec,z=e.setRedirectToExec,x=e.changeStatusTriggered,A=e.inventoryLocationChooseMaterial,T=b(Object(n.useState)(!1),2),L=T[0],R=T[1],F=b(Object(n.useState)(!1),2),P=F[0],U=F[1],_=b(Object(n.useState)(!1),2),W=_[0],J=_[1],$=b(Object(n.useState)(!1),2),B=$[0],D=$[1],q=b(Object(n.useState)(!1),2),G=q[0],H=q[1],K=b(Object(n.useState)(!1),2),Q=K[0],V=K[1];Object(n.useEffect)((function(){0===h.length&&v(),j&&z(!1),p=null}),[]);var X=y.update;Object(n.useEffect)((function(){a&&c(a.centerId,t.params.warehouseMovementId)}),[a,X]),Object(n.useEffect)((function(){a&&s&&N.haveMore&&!N.fetching&&s.locations.length>0&&C(a.centerId,s.locations[0].locationId,{offset:N.offset,limit:N.limit})}),[s,N]),Object(n.useEffect)((function(){if(a&&s&&s.warehouseMovementStatus&&2!==s.warehouseMovementStatus.warehouseMovementStatusId&&!x){var e=h.find((function(e){return 2===e.warehouseMovementStatusId}));p||(p=setTimeout((function(){S(a.centerId,t.params.warehouseMovementId,e,s.warehouseMovementType.warehouseMovementTypeName,!1,!1)}),2e3))}}),[a,s]),Object(n.useEffect)((function(){var e=s&&s.locations&&(!s.materials||s.materials&&0===s.materials.length);a&&g.haveMore&&!g.fetching&&e&&k(a.centerId,t.params.warehouseMovementId,{offset:g.offset,limit:g.limit})}),[a,g,s]),Object(n.useEffect)((function(){y.scannedMaterial?D(!0):D(!1)}),[y]),Object(n.useEffect)((function(){O&&o.b.push("/stock/pda/warehouse-movements/".concat(t.params.warehouseMovementId))}),[O]),Object(n.useEffect)((function(){s&&100===s.progressPercent&&!Q&&H(!0)}),[s]);var Y=function(){if(2===s.warehouseMovementStatus.warehouseMovementStatusId){var e=h.find((function(e){return 4===e.warehouseMovementStatusId}));S(a.centerId,t.params.warehouseMovementId,e,s.warehouseMovementType.warehouseMovementTypeName,!0)}},Z=[{type:"primary",label:i.b.formatMessage({id:"stock.pda.work-order-exec.finalize"}),onClick:function(){return J(!0)},closeOnClick:!1},{type:"secondary",label:i.b.formatMessage({id:"stock.pda.work-order-exec.pause"}),onClick:function(){Y()},closeOnClick:!0}],ee=function(){var e=h.find((function(e){return 3===e.warehouseMovementStatusId}));S(a.centerId,t.params.warehouseMovementId,e,s.warehouseMovementType.warehouseMovementTypeName,!0),J(!1)},te=[];s&&s.progressPercent<100&&te.push({type:"text",label:r.a.createElement("span",{className:"error-msg"},r.a.createElement(i.a,{id:"stock.pda.exec-inventary-location.finalize-warning"}))}),te.push({type:"primary",label:i.b.formatMessage({id:"stock.pda.work-order-exec.finalize"}),onClick:ee,closeOnClick:!0}),te.push({type:"secondary",label:i.b.formatMessage({id:"stock.pda.work-order-detail.menu.back"}),onClick:function(){return J(!1)},closeOnClick:!1});var ae,ne=N.list.filter((function(e){return!g.list.some((function(t){return t.material.materialId===e.materialId}))})),re=Z;return re=W?te:re,r.a.createElement(u.a,{breadcrumb:i.b.formatMessage({id:"stock.pda.work-order.inventary.exect.title"}),onBack:Y,pageActions:re,onPageActionsClose:function(){return J(!1)},pageActionsTitle:W?i.b.formatMessage({id:"stock.pda.work-order-detail.menu.actions.confirm-finalize"}):i.b.formatMessage({id:"stock.pda.work-order-detail.menu.actions"}),onScan:Object(f.e)((function(e){e&&w(a?a.centerId:0,e)}),100),scanLabel:i.b.formatMessage({id:"stock.pda.work-order-detail.free-entry.scan-material"}),resourceName:"warehouseMovmementExecInventoryPage"},r.a.createElement("div",{className:"detail-container"},r.a.createElement(l.h,{className:"mb-16",title:i.b.formatMessage({id:"stock.pda.work-order.inventary.order-num"}),subtitle:s?"".concat(s.warehouseMovementId):null}),r.a.createElement(l.h,{className:"mb-16",title:i.b.formatMessage({id:"stock.pda.work-order-detail.location"}),subtitle:s&&s.locations&&s.locations.length>0?s.locations[0].locationName:null}),r.a.createElement(l.o,{className:"mb-16",title:i.b.formatMessage({id:"stock.pda.work-order-detail.inventary.references-and-units-pending"}),number:ne.length,icon:"sga-icon-info-circle",onActionClicked:function(){return R(!0)},disabledNumber:!0}),r.a.createElement(l.o,{className:"mb-16",title:i.b.formatMessage({id:"stock.pda.work-order-detail.inventary.references-and-units"}),number:g.list.length,icon:"sga-icon-info-circle",onActionClicked:function(){return U(!0)},disabledNumber:!0})),s&&N.list&&N.list.length>0?r.a.createElement(m.a,{title:i.b.formatMessage({id:"stock.pda.work-order-detail.inventary.references-and-units-pending"}),visible:L,onClose:function(){return R(!1)}},ne.map((function(e){return r.a.createElement(l.o,{key:e.materialId,className:"order-detail_references-list-item",number:e.locationStock||"-",title:e.manufacturerReference,subtitle:e.materialName.name})}))):null,s&&g.list&&g.list.length?r.a.createElement(m.a,{title:i.b.formatMessage({id:"stock.pda.work-order-detail.inventary.references-and-units"}),visible:P,onClose:function(){return U(!1)}},g.list&&g.list.map((function(e){return r.a.createElement(l.o,{key:e.material.materialId,className:"order-detail_references-list-item",number:e.sourceLocation.movementUnits||"-",title:e.material.materialId,subtitle:e.material.materialName.name})}))):null,(ae=[],y.currentStock&&y.currentStock<0&&ae.push(i.b.formatMessage({id:"stock.pda.work-order-detail.incorrect-value"})),r.a.createElement(m.a,{key:y.scannedMaterial?y.scannedMaterial.materialId:0,title:i.b.formatMessage({id:"stock.pda.work-order-detail.scanned-reference"}),visible:B,showArrowClose:!1},1===y.scannedMaterials.length?r.a.createElement(l.h,{className:"mb-16",title:i.b.formatMessage({id:"stock.pda.work-order-detail.material"}),subtitle:y.scannedMaterial?y.scannedMaterial.materialId:null}):r.a.createElement(l.r,{label:i.b.formatMessage({id:"stock.pda.work-order-detail.material"}),options:y.scannedMaterials.map((function(e){return{label:e.general.materialI18n.name,value:e.materialId}})),onChange:function(e){return A(e.value)},value:y.scannedMaterial?{label:y.scannedMaterial.general.materialI18n.name,value:y.scannedMaterial.materialId}:null}),r.a.createElement(l.m,{className:"mb-16",label:i.b.formatMessage({id:"stock.pda.work-order-detail.units-inventary"}),value:y.currentStock?y.currentStock:0,onChange:function(e){return M(e)},errors:ae}),r.a.createElement(l.d,{kind:"primary",className:"mb-16",disabled:ae.length>0,onClick:function(){return e={material:{materialId:y.scannedMaterial?y.scannedMaterial.materialId:0},sourceLocation:{location:{locationId:s.locations[0].locationId},movementUnits:y.currentStock?y.currentStock:0}},I(a.centerId,t.params.warehouseMovementId,e,{material:y.scannedMaterial.general.manufacturerReference}),void D(!1);var e},label:i.b.formatMessage({id:"stock.pda.work-order-detail.inventary"})}),r.a.createElement(l.d,{kind:"secondary",onClick:function(){D(!1),E()},label:i.b.formatMessage({id:"stock.pda.work-order-detail.cancel"})}))),r.a.createElement(d.a,{title:i.b.formatMessage({id:"stock.pda.work-order.inventary-location.finalize.title"}),content:i.b.formatMessage({id:"stock.pda.work-order.inventary-location.finalize.content"}),visible:G,onClose:function(){H(!1),V(!0)},onFinalize:ee}))})))}}]);