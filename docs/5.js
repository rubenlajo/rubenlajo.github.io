(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1309:function(e,t,a){"use strict";var r=a(5),n=a(0),o=a.n(n),i=a(52);a(1314);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,o,i,c=[],s=!0,l=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;s=!1}else for(;!(s=(r=o.call(a)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,n=e}finally{try{if(!s&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(l)throw n}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function l(e){var t=e.title,a=e.visible,s=e.onClose,l=e.closeIcon,u=e.children,f=e.showArrowClose,m=e.onSearch,d=e.searchText,b=e.className,p=e.onEdit,h=e.onDelete,g=e.footer,v=c(Object(n.useState)(!1),2),w=v[0],y=v[1];return o.a.createElement(o.a.Fragment,null,a?o.a.createElement("div",{className:"mobile-slide-panel_overlay",onClick:function(){f&&s()}}):null,o.a.createElement("div",{className:"mobile-slide-panel ".concat(b," ").concat(a?"is-open":"")},o.a.createElement("div",{className:"mobile-slide-panel_title ".concat(w?"search-active":"")},w?o.a.createElement(o.a.Fragment,null,o.a.createElement(i.s,{label:r.b.formatMessage({id:"shared.mobile-slide-panel.search"}),onChange:function(e){return m(e)},value:d}),o.a.createElement(i.i,{icon:"sga-icon-times",onClick:function(){y(!1),m("")},size:"size-xs"})):o.a.createElement(o.a.Fragment,null,f?o.a.createElement(i.i,{icon:l||"sga-icon-arrow-down",onClick:function(){s()},size:"size-s"}):null,o.a.createElement("div",{className:"title-text"},t),m?o.a.createElement(i.i,{icon:"sga-icon-search",onClick:function(){return y(!0)},size:"size-xs"}):null,p?o.a.createElement(i.i,{icon:"sga-icon-edit",onClick:function(){return p()},size:"size-xs"}):null,h?o.a.createElement(i.i,{icon:"sga-icon-trash",onClick:function(){return h()},size:"size-xs"}):null)),o.a.createElement("div",{className:"mobile-slide-panel_content"},u),g?o.a.createElement("footer",{className:"footer"},g):null))}l.defaultProps={className:"",visible:!1,onClose:function(){},closeIcon:null,searchText:"",title:"title",showArrowClose:!0,footer:null},t.a=l},1312:function(e,t,a){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.withGuards=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(0),i=l(o),c=a(46),s=l(a(1313));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}t.withGuards=function(e){return function(t){var a=function(a){function o(){return u(this,o),f(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,a),n(o,[{key:"render",value:function(){var a=this;return(0,c.guards)((function(t){return e(a.props,t)})),i.default.createElement(t,this.props)}}]),o}(o.Component);return a.displayName=(0,s.default)(t),a}}},1313:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.displayName||e.name||"Component"}},1314:function(e,t,a){},1315:function(e,t,a){"use strict";a(388);var r=a(129),n=a.n(r),o=a(0),i=a.n(o),c=a(1),s=a.n(c),l=a(1312),u=a(308),f=a(161);function m(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var d=function(e){var t=e.forRoles,a=e.onlyIf,r=e.user,n=e.children,c=m(e,["forRoles","onlyIf","user","children"]);return Object(u.a)(r,t,a)?function(e,t){return null===e?null:"string"==typeof e?e:o.Children.count(e)>1?i.a.createElement("div",null,o.Children.map(e,(function(e){return e?i.a.cloneElement(e,t):e}))):i.a.cloneElement(e,t)}(n,c):null};d.propTypes={forRoles:s.a.oneOfType([s.a.string,s.a.array]),onlyIf:s.a.func};var b=n()(f.a,Object(l.withGuards)((function(e,t){var a=e.forRoles,r=e.onlyIf;t((function(){return a||r}),"<Visible /> must receive at least the forRoles property or the onlyIf property.")})))(d);a(128);a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return f.a}))},1321:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r={LOCATION:"location",MATERIAL:"material"}},1322:function(e,t,a){"use strict";var r=a(0),n=a.n(r),o=a(5),i=a(52),c=a(1309);a(1323);t.a=function(e){var t=e.title,a=e.content,r=e.visible,s=e.onClose,l=e.onFinalize;return n.a.createElement(c.a,{className:"finalize-pannel",title:t,visible:r,onClose:function(){return s()},showArrowClose:!1},n.a.createElement("div",{className:"mb-16"},a),n.a.createElement(i.d,{kind:"primary",className:"mb-16",onClick:l,label:o.b.formatMessage({id:"stock.pda.work-order-transfer-exec.finalize-pannel.btn-finalize"})}),n.a.createElement(i.d,{kind:"secondary",className:"mb-16",onClick:function(){return s()},label:o.b.formatMessage({id:"stock.pda.work-order-transfer-exec.finalize-pannel.btn-cancel"})}))}},1323:function(e,t,a){},1325:function(e,t,a){"use strict";var r=a(0),n=a.n(r),o=a(5),i=a(52),c=a(1311),s=a(387);a(1326);function l(e){var t=e.centerSelected,a=e.materialId,c=e.availableLocations,s=e.fetchAvailableLoc,l=(e.onSelect,e.fetchNextAvailableLoc),u=e.disabled,f=e.excludeLocations;return Object(r.useEffect)((function(){var e=null===c.location&&c.hasMore&&!c.fetching,r=null!==c.location&&!c.fetching&&f&&f.length>0&&f.some((function(e){return e===c.location.locationId}));a&&t&&(e||r)&&s(t.centerId,a,{offset:c.offset,limit:c.limit})}),[t,c,u]),n.a.createElement("div",{className:"available-locations  mb-16 "},n.a.createElement(i.h,{title:o.b.formatMessage({id:"stock.pda.available-locations.title"}),subtitle:c.location?c.location.locationName:"-"}),n.a.createElement(i.f,{className:"btn-next",icon:"sga-icon-arrow-circle-right",onClick:function(){return l()},disabled:u||!c.hasMore}))}l.defaulProps={disabled:!1,excludeLocations:[]},t.a=Object(s.a)(Object(c.a)(l))},1326:function(e,t,a){},1346:function(e,t,a){},1360:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(162),i=a(5),c=(a(164),a(163),a(52)),s=a(387),l=a(1311),u=a(1316),f=a(1309),m=a(1321);var d=function(e){var t=e.transferType,a=e.warehouseMovementReferences,r=e.warehouseMovementLocations,o=e.showMovements,s=e.setShowMovements,l=[];t===m.a.LOCATION&&a.list&&a.list.forEach((function(e){l.push(n.a.createElement(c.p,{key:e.material.materialId,className:"order-detail_references-list-item",items:[{title:"".concat(Math.abs(e.sourceLocation.unitsToTransfer)," ").concat(i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.units"})),subtitle:e.material.materialName.name},{title:i.b.formatMessage({id:"stock.pda.work-order-detail.destination"}),subtitle:e.targetLocations?e.targetLocations.length>1?i.b.formatMessage({id:"stock.pda.work-order-detail.multiple"}):e.targetLocations[0].location.locationName:"-"}]}))})),t===m.a.MATERIAL&&r.list&&r.list.forEach((function(e){l.push(n.a.createElement(c.p,{key:e.sourceLocation.location.locationId,className:"order-detail_references-list-item",items:[{title:"".concat(Math.abs(e.sourceLocation.unitsToTransfer)," ").concat(i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.units"})),subtitle:e.sourceLocation.location.locationName},{title:i.b.formatMessage({id:"stock.pda.work-order-detail.destination"}),subtitle:e.targetLocations?e.targetLocations.length>1?i.b.formatMessage({id:"stock.pda.work-order-detail.multiple"}):e.targetLocations[0].location.locationName:"-"}]}))}));var u=t===m.a.LOCATION?i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.materials-to-traspase"}):i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.locations-to-traspase"});return n.a.createElement(f.a,{title:u,visible:o,onClose:function(){return s(!1)}},l)},b=a(1322),p=a(1325),h=a(20);a(1346);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,o,i,c=[],s=!0,l=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;s=!1}else for(;!(s=(r=o.call(a)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,n=e}finally{try{if(!s&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(l)throw n}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var w=null;t.default=Object(s.a)(Object(l.a)((function(e){var t=e.match,a=e.fetchWarehouseMovement,s=e.warehouseMovement,l=e.warehouseMovementsStatus,f=e.fetchWarehouseMovementStatus,v=e.setRedirect,y=e.centerSelected,k=e.redirect,M=e.warehouseMovementReferences,I=e.fetchWarehouseMovementReferences,O=e.warehouseMovementLocations,L=e.fetchWarehouseMovementLocations,E=e.updateWarehouseMovemementStatus,T=e.transferLocScanRef,N=e.transferLocationExec,A=e.transferMaterialExec,C=e.transferExec,S=e.changeTransferUnits,x=e.transferLocScanTargetLoc,j=e.transferStart,R=e.foceUpdateMovement,z=e.transferRefScanSourceLoc,_=e.transferRefScanTargetLoc,P=e.redirectToExec,U=e.setRedirectToExec,F=e.changeStatusTriggered,W=e.addNotification,J=e.transferLocationChooseMaterial,G=g(Object(r.useState)(!1),2),$=G[0],B=G[1],D=g(Object(r.useState)(""),2),V=D[0],q=D[1],H=g(Object(r.useState)(!1),2),K=H[0],Q=H[1],X=g(Object(r.useState)(!1),2),Y=X[0],Z=X[1],ee=g(Object(r.useState)(!1),2),te=ee[0],ae=ee[1];Object(r.useEffect)((function(){0===l.length&&f(),k&&v(!1),P&&U(!1),w=null}),[]),Object(r.useEffect)((function(){y&&a(y.centerId,t.params.warehouseMovementId)}),[y,R]),Object(r.useEffect)((function(){s&&s.materials&&1===s.materials.length&&q(m.a.MATERIAL),s&&s.locations&&1===s.locations.length&&q(m.a.LOCATION)}),[s]),Object(r.useEffect)((function(){if(y&&s&&s.warehouseMovementStatus&&2!==s.warehouseMovementStatus.warehouseMovementStatusId&&!F){var e=l.find((function(e){return 2===e.warehouseMovementStatusId}));w||(w=setTimeout((function(){E(y.centerId,t.params.warehouseMovementId,e,s.warehouseMovementType.warehouseMovementTypeName,!1,!1),clearTimeout(w)}),2e3))}}),[y,s]),Object(r.useEffect)((function(){y&&M.haveMore&&!M.fetching&&V===m.a.LOCATION&&I(y.centerId,t.params.warehouseMovementId,{offset:M.offset,limit:M.limit})}),[y,M,V]),Object(r.useEffect)((function(){y&&O.haveMore&&!O.fetching&&V===m.a.MATERIAL&&L(y.centerId,t.params.warehouseMovementId,{offset:O.offset,limit:O.limit})}),[y,O,V]),Object(r.useEffect)((function(){k&&o.b.push("/stock/pda/warehouse-movements/".concat(t.params.warehouseMovementId))}),[k]),Object(r.useEffect)((function(){if(V===m.a.LOCATION){if(N.error&&W({type:"error",fadeout:!0,content:i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.scan-material-error"})}),N.materials.length,N.material&&N.targetLocation){var e={material:{materialId:N.material.materialId},sourceLocation:{location:{locationId:s.locations[0].locationId},unitsToTransfer:N.transferUnits},targetLocations:[{location:{locationId:N.targetLocation.locationId},unitsToTransfer:N.transferUnits}]};C(y.centerId,s.warehouseMovementId,e,{location:N.targetLocation.locationName,material:N.material.general.manufacturerReference})}}else if(V===m.a.MATERIAL&&(A.error&&W({type:"error",fadeout:!0,content:i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.scan-location-error"})}),A.sourceLocation&&A.targetLocation)){var t={material:{materialId:s.materials[0].materialId},sourceLocation:{location:{locationId:A.sourceLocation.locationId},unitsToTransfer:A.transferUnits},targetLocations:[{location:{locationId:A.targetLocation.locationId},unitsToTransfer:A.transferUnits}]};C(y.centerId,s.warehouseMovementId,t,{location:A.targetLocation.locationName,material:s.materials[0].manufacturerReference})}}),[N,A]),Object(r.useEffect)((function(){var e=s&&100===s.progressPercent;V===m.a.LOCATION&&e&&j&&!te&&Z(!0),V===m.a.MATERIAL&&e&&j&&!te&&Z(!0)}),[M,O]);var re=function(){if(2===s.warehouseMovementStatus.warehouseMovementStatusId){var e=l.find((function(e){return 4===e.warehouseMovementStatusId}));E(y.centerId,t.params.warehouseMovementId,e,s.warehouseMovementType.warehouseMovementTypeName,!0)}},ne=function(){var e=l.find((function(e){return 3===e.warehouseMovementStatusId}));E(y.centerId,t.params.warehouseMovementId,e,s.warehouseMovementType.warehouseMovementTypeName,!0),Q(!1)},oe=[{type:"primary",label:i.b.formatMessage({id:"stock.pda.work-order-exec.finalize"}),onClick:function(){return Q(!0)},closeOnClick:!1},{type:"secondary",label:i.b.formatMessage({id:"stock.pda.work-order-exec.pause"}),onClick:function(){re()},closeOnClick:!0}],ie=[{type:"primary",label:i.b.formatMessage({id:"stock.pda.work-order-exec.finalize"}),onClick:ne,closeOnClick:!0},{type:"secondary",label:i.b.formatMessage({id:"stock.pda.work-order-detail.menu.back"}),onClick:function(){return Q(!1)},closeOnClick:!1}],ce=function(e){e&&(V===m.a.LOCATION?null===N.material?T(y.centerId,e):se()&&x(y.centerId,e):null===A.sourceLocation?z(y.centerId,e):se()&&_(y.centerId,e))},se=function(){return V===m.a.LOCATION&&null===N.material||V===m.a.MATERIAL&&null===A.sourceLocation||(V===m.a.LOCATION&&null!==N.material&&N.transferUnits>0||V===m.a.MATERIAL&&null!==A.sourceLocation&&A.transferUnits>0)},le=oe;return le=K?ie:le,n.a.createElement(u.a,{className:"transfer-exec-page",breadcrumb:i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.title"}),onBack:re,pageActions:le,pageActionsTitle:K?i.b.formatMessage({id:"stock.pda.work-order-detail.menu.actions.confirm-finalize"}):i.b.formatMessage({id:"stock.pda.work-order-detail.menu.actions"}),onScan:Object(h.e)(ce,100),resourceName:"warehouseMovmementExecTransferPage"},n.a.createElement("p",null,n.a.createElement(i.a,{id:"stock.pda.work-order-transfer-exec.title-name"})," ",t.params.warehouseMovementId),V===m.a.LOCATION?n.a.createElement(c.h,{className:"mb-16",title:i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.location"}),subtitle:s&&s.locations&&s.locations.length>0?s.locations[0].locationName:null}):n.a.createElement(c.h,{className:"mb-16",title:i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.material"}),subtitle:s&&s.materials&&s.materials.length>0?s.materials[0].manufacturerReference:null}),n.a.createElement(c.o,{className:"mb-16",title:V===m.a.LOCATION?i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.materials-to-traspase"}):i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.locations-to-traspase"}),number:V===m.a.LOCATION?M.list.length:O.list.length,icon:"sga-icon-info-circle",onActionClicked:function(){return B(!0)},disabledNumber:!0}),V===m.a.LOCATION?n.a.createElement(n.a.Fragment,null,N.materials.length>1?n.a.createElement(c.r,{label:i.b.formatMessage({id:"stock.pda.work-order-detail.material"}),options:N.materials.map((function(e){return{label:e.general.materialI18n.name,value:e.materialId}})),onChange:function(e){return J(e.value)},value:N.material?{label:N.material.general.materialI18n.name,value:N.material.materialId}:null}):n.a.createElement(c.h,{className:"mb-16",isActive:null===N.material,title:i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.material"}),subtitle:N.material?N.material.general.manufacturerReference:i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.pending"})})):n.a.createElement(c.h,{className:"mb-16",isActive:null===A.sourceLocation,title:i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.source-location"}),subtitle:A.sourceLocation?A.sourceLocation.locationName:i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.pending"})}),n.a.createElement(c.m,{className:"mb-16",label:i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.transfer-units"}),value:V===m.a.LOCATION?N.transferUnits:A.transferUnits,key:V===m.a.LOCATION?JSON.stringify(N.material):JSON.stringify(A.sourceLocation),disabled:V===m.a.LOCATION?null===N.material:null===A.sourceLocation,onChange:function(e){return S(e)},errors:se()?[]:[i.b.formatMessage({id:"stock.pda.work-order-detail.incorrect-value"})]}),n.a.createElement(p.a,{disabled:V===m.a.LOCATION?null===N.material:null===A.sourceLocation,materialId:V===m.a.MATERIAL?s.materials.length>0?s.materials[0].materialId:null:N.material&&N.material.materialId,onSelect:function(e){return ce(e.locationName)},excludeLocations:V===m.a.MATERIAL?A.sourceLocation?[A.sourceLocation.locationId]:[]:s&&s.locations&&s.locations.length>0?[s.locations[0].locationId]:[]}),n.a.createElement(c.h,{className:"mb-16",title:i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.target-location"}),isActive:V===m.a.LOCATION?null!==N.material:null!==A.sourceLocation,disabled:V===m.a.LOCATION?null===N.material:null===A.sourceLocation,subtitle:V===m.a.LOCATION?N.targetLocation&&N.targetLocation.locationName||i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.pending"}):A.targetLocation&&A.targetLocation.locationName||i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.pending"})}),s?n.a.createElement(d,{transferType:V,warehouseMovementReferences:M,warehouseMovementLocations:O,showMovements:$,setShowMovements:B}):null,n.a.createElement(b.a,{title:i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.finalize-pannel.title"}),content:i.b.formatMessage({id:"stock.pda.work-order-transfer-exec.finalize-pannel.msg-location"}),visible:Y,onClose:function(){Z(!1),ae(!0)},onFinalize:ne}))})))}}]);