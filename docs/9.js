(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1312:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.withGuards=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(0),c=s(o),i=n(46),l=s(n(1313));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==a(t)&&"function"!=typeof t?e:t}t.withGuards=function(e){return function(t){var n=function(n){function o(){return u(this,o),f(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+a(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n),r(o,[{key:"render",value:function(){var n=this;return(0,i.guards)((function(t){return e(n.props,t)})),c.default.createElement(t,this.props)}}]),o}(o.Component);return n.displayName=(0,l.default)(t),n}}},1313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.displayName||e.name||"Component"}},1315:function(e,t,n){"use strict";n(388);var a=n(129),r=n.n(a),o=n(0),c=n.n(o),i=n(1),l=n.n(i),s=n(1312),u=n(308),f=n(161);function d(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var m=function(e){var t=e.forRoles,n=e.onlyIf,a=e.user,r=e.children,i=d(e,["forRoles","onlyIf","user","children"]);return Object(u.a)(a,t,n)?function(e,t){return null===e?null:"string"==typeof e?e:o.Children.count(e)>1?c.a.createElement("div",null,o.Children.map(e,(function(e){return e?c.a.cloneElement(e,t):e}))):c.a.cloneElement(e,t)}(r,i):null};m.propTypes={forRoles:l.a.oneOfType([l.a.string,l.a.array]),onlyIf:l.a.func};var b=r()(f.a,Object(s.withGuards)((function(e,t){var n=e.forRoles,a=e.onlyIf;t((function(){return n||a}),"<Visible /> must receive at least the forRoles property or the onlyIf property.")})))(m);n(128);n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f.a}))},1317:function(e,t,n){},1318:function(e,t,n){},1319:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(59),c=n(5),i=n(52),l=n(387),s=n(66),u=n.n(s),f=n(67),d=n.n(f),m=n(34),b=n(94),p=n(14),y=function(e){var t=Object(m.a)((function(e){return{userNames:b.i(e),userNamesLoading:b.j(e)}}),(function(e){return{fetchUserNames:function(t){return e(p.g(t))}}}))(e);return d()(u()(e,"withUserNames"))(t)},g=n(1311),h=n(1309),v=(n(1317),n(389));var k=function(e){var t=e.name,n=e.login,a=e.progress,o=e.selected,c=e.onSelect;return r.a.createElement("div",{className:"assign-user-list-item",onClick:function(){return c()}},r.a.createElement(v.a,{className:"assign-user-avatar",users:[{login:n,name:t}]}),r.a.createElement("div",{className:"assign-user-list-content"},r.a.createElement("div",{className:"assign-user-name"},t),r.a.createElement("div",{className:"assign-user-progress"},r.a.createElement(i.g,{label:a,color:"var(--color-neutral100, #B5B5B5)",backgroundColor:"var(--color-neutral600, #363636)",info:!0}))),r.a.createElement(i.n,{label:"",value:o}))},M=n(20);n(1318);function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=o.call(n)).done)&&(i.push(a.value),i.length!==t);l=!0);}catch(e){s=!0,r=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}t.a=Object(l.a)(Object(g.a)(y((function(e){var t=e.visible,n=e.close,l=e.onSelect,s=e.centerSelected,u=e.fetchWarehouseMovementTechnicians,f=e.technicians,d=e.clearWarhouseMovementTechnicians,m=e.fetchUserNames,b=e.userNames,p=O(Object(a.useState)(""),2),y=p[0],g=p[1],v=O(Object(a.useState)(!1),2),E=v[0],j=v[1];Object(a.useEffect)((function(){s&&!f.requestDone&&!f.fetching&&t&&u(s.centerId)}),[s,f,t]);var I=Object(o.c)((function(e){return e.application.userNamesLoading}));return Object(a.useEffect)((function(){var e;if((null==f||null===(e=f.list)||void 0===e?void 0:e.length)>0){var t,n=[];null===(t=f.list)||void 0===t||t.forEach((function(e){e.technnician&&e.technnician.technnicianLogin&&n.push(e.technnician.technnicianLogin)})),(null==n?void 0:n.length)>0&&!I&&m(n)}}),[f]),r.a.createElement(h.a,{className:"assign-pannel",title:c.b.formatMessage({id:"stock.routes.pda.assign-warehouse-movement"}),visible:t,onClose:function(){n(),d()},searchText:y,onSearch:function(e){return g(e)}},t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"technicians-list"},f.list.filter((function(e){return!y||(e.technnician.technnicianName.toLowerCase().includes(y.toLowerCase())||e.technnician.technnicianLogin.toLowerCase().includes(y.toLowerCase()))})).map((function(e){var t=e.technnician,n=e.assignmentsTotalNum,a=e.assignmentsMaxNum;return r.a.createElement(k,{key:t.technnicianLogin,login:t.technnicianLogin,name:Object(M.k)(b,t.technnicianLogin)||"A A",progress:"".concat(n,"/").concat(a," ").concat(c.b.formatMessage({id:"stock.pda.work-order-detail.assign.executed-orders"})),selected:E&&E.technnicianLogin===t.technnicianLogin,onSelect:function(){return j(t)}})}))),0===f.list.length&&f.requestDone?r.a.createElement("div",{className:"no-technicians-found-msg"},r.a.createElement(c.a,{id:"stock.pda.work-order.assign.no-technicians-msg"})):null,r.a.createElement(i.d,{kind:"primary",disabled:!E,className:"technician-assign-btn",onClick:function(){l(E.technnicianLogin)},label:"Asignar"})))}))))},1340:function(e,t,n){},1357:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(5),c=n(162),i=n(1315),l=n(52),s=n(1316),u=n(1309),f=n(1319);var d=function(e){var t=e.src,n=e.altSrc,a=e.altText,o=e.className,c=e.onError,i=void 0===c?function(){}:c;return r.a.createElement("img",{className:"alternate-img ".concat(o||""),src:t,onError:function(e){e.target.onerror=null,e.target.src=n,e.target.classList.add("has-error"),i()},alt:a||""})},m=n(387),b=n(1327),p=n(1311),y=n(390),g=n(20),h=n.p+"assets/images/noimage.png";n(1340);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==v(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=o.call(n)).done)&&(i.push(a.value),i.length!==t);l=!0);}catch(e){s=!0,r=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}t.default=Object(i.b)(Object(m.a)(Object(b.a)(Object(p.a)((function(e){var t=e.fetchCenters,n=e.centers,i=e.match,m=e.centerSelected,b=e.material,p=e.fetchMaterialById,v=e.fetchMaterialLocations,O=e.setRedirect,E=e.createWarehouseMovementInventoryMaterial,j=e.warehouseMovementsCreated,I=e.assignWarehouseMovement,w=e.user,N=e.addNotification,C=e.redirectToExec,S=e.clearCreatedWarehouseMovement,A=Object(y.b)(w.roles,Object(y.a)("referencesEdit")),T=o.b.formatMessage({id:"stock.pda.location-detail.menu.cancel"}),L={MAIN:{key:"mainMenu",title:o.b.formatMessage({id:"stock.pda.location-detail.menu.title"}),cancelLabel:T},INVENTARY:{key:"inventaryMenu",title:o.b.formatMessage({id:"stock.pda.reference-detail-menu.inventary"}),cancelLabel:o.b.formatMessage({id:"stock.pda.reference-detail-menu.inventaryMenu.cancel"}),onCancel:function(){S(),N({type:"success",fadeout:!0,content:o.b.formatMessage({id:"stock.reactions.pda.invetary-created-ok"}).replace("XmaterialIdX",i.params.materialId)})}},TRASPASE:{key:"traspaseMenu",title:o.b.formatMessage({id:"stock.pda.location-detail.menu.traspase"}),cancelLabel:o.b.formatMessage({id:"stock.pda.reference-detail-menu.traspaseMenu.cancel"})},CANCEL:{key:"cancelMenu",title:o.b.formatMessage({id:"stock.pda.location-detail.menu.title-cancel-order"}),cancelLabel:T},PRINT:{key:"printMenu",title:o.b.formatMessage({id:"stock.pda.reference-detail-menu.print-menu.print"}),cancelLabel:T}},x=M(Object(a.useState)(L.MAIN),2),P=x[0],R=x[1],_=M(Object(a.useState)(!1),2),F=_[0],B=_[1],U=M(Object(a.useState)(!1),2),V=U[0],W=U[1],D=M(Object(a.useState)(0),2),Y=D[0],G=D[1],q=M(Object(a.useState)(!1),2),z=q[0],J=q[1];if(Object(a.useEffect)((function(){O(!1),0===n.length&&t()}),[]),Object(a.useEffect)((function(){m&&p(m.centerId,i.params.materialId)}),[m]),Object(a.useEffect)((function(){b&&0===b.locations.length&&!b.locationsFetching&&b.hasMore&&v(m.centerId,i.params.materialId,{offset:0,limit:100})}),[b]),Object(a.useEffect)((function(){b&&b.locations&&b.locations.length>0&&b.hasMore&&!b.locationsFetching&&v(m.centerId,i.params.materialId,{offset:b.filters.offset+b.filters.limit,limit:b.filters.limit})}),[b]),Object(a.useEffect)((function(){j&&j.length>0&&(1===j[0].warehouseMovementType.warehouseMovementTypeId&&R(L.INVENTARY))}),[j]),Object(a.useEffect)((function(){if(C&&null!==j){var e=j[0];c.b.push("/stock/pda/warehouse-movements-exec-inventary-materials/".concat(e.warehouseMovementId))}}),[C]),!b)return null;var X,$,H=function(){var e=j[0];I(m.centerId,e.warehouseMovementId,w.login,1===e.warehouseMovementType.warehouseMovementTypeId?o.b.formatMessage({id:"stock.routes.pda.inventory"}):o.b.formatMessage({id:"stock.routes.pda.transfer"}),!0)},K=null;switch(P.key){case"cancelMenu":K=[{type:"primary",disabled:!0,label:o.b.formatMessage({id:"stock.pda.reference-detail-menu.cancelMenu.yes"}),onClick:function(){},closeOnClick:!0},{type:"secondary",disabled:!0,label:o.b.formatMessage({id:"stock.pda.reference-detail-menu.cancelMenu.no"}),onClick:function(){return setShowConfirmCancel(!1)},closeOnClick:!1}];break;case"inventaryMenu":K=[{type:"text",label:o.b.formatMessage({id:"stock.pda.reference-detail-menu.inventaryMenu.title"}),disabled:!A},{type:"primary",label:o.b.formatMessage({id:"stock.pda.reference-detail-menu.inventaryMenu.yes"}),onClick:function(){return H()},disabled:!A},{type:"secondary",label:o.b.formatMessage({id:"stock.pda.reference-detail-menu.inventaryMenu.no"}),onClick:function(){J(!0),R(L.MAIN)},onlyCloseOnClick:!0,disabled:!A}];break;case"traspaseMenu":K=[{type:"text",label:o.b.formatMessage({id:"stock.pda.reference-detail-menu.traspaseMenu.title"}),disabled:!A},{type:"primary",label:o.b.formatMessage({id:"stock.pda.reference-detail-menu.traspaseMenu.yes"}),onClick:function(){return H()},disabled:!A},k({type:"secondary",disabled:!0,label:o.b.formatMessage({id:"stock.pda.reference-detail-menu.traspaseMenu.no"}),onClick:function(){return R(L.MAIN)}},"disabled",!A)];break;case"printMenu":K=[{type:"text",label:o.b.formatMessage({id:"stock.pda.reference-detail-menu.print-menu.title"}),disabled:!A},{type:"custom",component:r.a.createElement(r.a.Fragment,null,r.a.createElement(l.m,{label:o.b.formatMessage({id:"stock.pda.reference-detail-menu.print-menu.tags-number"}),value:Y,onChange:function(e){return G(e)}}),r.a.createElement(l.d,{kind:"primary",disabled:!0,size:"size-s",label:o.b.formatMessage({id:"stock.pda.reference-detail-menu.print-menu.print"})}))}];break;case"mainMenu":default:K=[{type:"primary",label:o.b.formatMessage({id:"stock.pda.reference-detail-menu.inventary"}),onClick:function(){E(m.centerId,i.params.materialId)},disabled:!Object(y.b)(w.roles,Object(y.a)("stockInventary"))},{type:"secondary",label:o.b.formatMessage({id:"stock.pda.reference-detail-menu.traspase"}),onClick:function(){return c.b.push("/stock/pda/materials/".concat(i.params.materialId,"/transfer"))},disabled:!Object(y.b)(w.roles,Object(y.a)("stockTraspase"))},{type:"secondary",label:o.b.formatMessage({id:"stock.pda.reference-detail-menu.freeentry"}),onClick:function(){return c.b.push("/stock/pda/warehouse-movements-exec-free-entry/".concat(i.params.materialId))},disabled:!Object(y.b)(w.roles,Object(y.a)("stockMovementExecute"))}]}return r.a.createElement(s.a,{className:"pda-material-detail",title:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"ID ",i.params.materialId," "),r.a.createElement(l.f,{icon:"sga-icon-camera",onClick:function(){return W(!0)}})),subtitle:"".concat(b.general.materialI18n.name),breadcrumb:o.b.formatMessage({id:"stock.pda.reference-detail.page.title"}),onBack:function(){return c.b.push("/stock/pda/dashboard")},pageActions:K,pageActionsTitle:P.title,pageActionsCancelLabel:P.cancelLabel,onPageActionsClose:function(){P.key===L.INVENTARY.key&&L.INVENTARY.onCancel(),R(L.MAIN)},resourceName:"referenceDetailPage"},r.a.createElement(l.g,{label:"".concat(b.local&&b.local.stock||0," ").concat(o.b.formatMessage({id:"stock.pda.reference-detail.stock"})),stateColor:{0:"info",1:"success",2:"link",3:"error"}[b&&b.local&&b.local.stockStatusId||0]}),r.a.createElement("div",{className:"detail-container"},r.a.createElement(l.o,{title:b.local.location?b.local.location.locationName:"-",subtitle:o.b.formatMessage({id:"stock.pda.reference-detail.principal-location"}),number:b.locations?b.locations.length:"00",icon:"sga-icon-info-circle",onActionClicked:function(){return B(!0)},disabledIcon:!b.locations||b.locations&&0===b.locations.length,disabledNumber:!0}),r.a.createElement(l.h,{title:o.b.formatMessage({id:"stock.pda.reference-detail.sfi-id"}),subtitle:b.general.codSFI}),r.a.createElement(l.h,{title:o.b.formatMessage({id:"stock.pda.reference-detail.manufaturer"}),subtitle:b.general.manufacturer?b.general.manufacturer.manufacturerName:"-"}),r.a.createElement(l.h,{title:o.b.formatMessage({id:"stock.pda.reference-detail.manufacturerReference"}),subtitle:b.general.manufacturerReference||"-"})),r.a.createElement(u.a,{title:o.b.formatMessage({id:"stock.pda.reference-detail.secondary-locations"}),visible:F,onClose:function(){return B(!1)}},b.locations?b.locations.map((function(e){return r.a.createElement(l.h,{key:e.locationCode,className:"material-detail_location-list-item",title:"".concat(e.stock," ").concat(o.b.formatMessage({id:"stock.pda.reference-detail.units"})),subtitle:e.locationCode})})):null),($=Object(g.a)(Object(g.i)("materialPhoto"),{materialId:b.materialId}),r.a.createElement(u.a,{title:o.b.formatMessage({id:"stock.pda.reference-detail.photo"}),visible:V,onClose:function(){return W(!1)}},r.a.createElement(d,{className:"w100",src:$,altSrc:h,altText:b.general.materialI18n.name}))),(X=function(){J(!1),S(),R(L.MAIN)},r.a.createElement(f.a,{visible:z,close:X,onSelect:function(e){var t=j[0];I(m.centerId,t.warehouseMovementId,e,1===t.warehouseMovementType.warehouseMovementTypeId?o.b.formatMessage({id:"stock.routes.pda.inventory"}):o.b.formatMessage({id:"stock.routes.pda.transfer"})),X(),J(!1),S()}})))})))))}}]);