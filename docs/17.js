(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1328:function(e,t,n){"use strict";(function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"m",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"l",(function(){return s})),n.d(t,"i",(function(){return c})),n.d(t,"j",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"g",(function(){return p})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"h",(function(){return h})),n.d(t,"k",(function(){return g})),n.d(t,"e",(function(){return m}));var r="undefined";function a(){return("undefined"==typeof globalThis?"undefined":i(globalThis))!==r&&globalThis?globalThis:("undefined"==typeof self?"undefined":i(self))!==r&&self?self:("undefined"==typeof window?"undefined":i(window))!==r&&window?window:(void 0===e?"undefined":i(e))!==r&&e?e:null}function o(e){var t=a();return t&&t[e]?t[e]:"window"===e&&s()?window:null}function s(){return Boolean("object"===("undefined"==typeof window?"undefined":i(window))&&window)}function c(){return s()?window:o("window")}function l(){return Boolean("object"===("undefined"==typeof document?"undefined":i(document))&&document)}function u(){return l()?document:o("document")}function p(){return Boolean("object"===("undefined"==typeof navigator?"undefined":i(navigator))&&navigator)?navigator:o("navigator")}function d(){return Boolean("object"===("undefined"==typeof history?"undefined":i(history))&&history)?history:o("history")}function f(){return"object"===("undefined"==typeof location?"undefined":i(location))&&location?location:o("location")}function h(){return o("performance")}function g(){return Boolean("object"===("undefined"==typeof JSON?"undefined":i(JSON))&&JSON||null!==o("JSON"))}function m(){return g()?JSON||o("JSON"):null}}).call(this,n(74))},1353:function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"Util",(function(){return ee})),n.d(i,"CorrelationIdHelper",(function(){return ne})),n.d(i,"UrlHelper",(function(){return te})),n.d(i,"DateTimeUtils",(function(){return re})),n.d(i,"ConnectionStringParser",(function(){return ke})),n.d(i,"FieldType",(function(){return W})),n.d(i,"RequestHeaders",(function(){return Y})),n.d(i,"DisabledPropertyName",(function(){return we})),n.d(i,"ProcessLegacy",(function(){return Ee})),n.d(i,"SampleRate",(function(){return De})),n.d(i,"HttpMethod",(function(){return Ae})),n.d(i,"DEFAULT_BREEZE_ENDPOINT",(function(){return Ne})),n.d(i,"AIData",(function(){return Le})),n.d(i,"AIBase",(function(){return Re})),n.d(i,"Envelope",(function(){return Pe})),n.d(i,"Event",(function(){return de})),n.d(i,"Exception",(function(){return Te})),n.d(i,"Metric",(function(){return ve})),n.d(i,"PageView",(function(){return Ie})),n.d(i,"PageViewData",(function(){return ye})),n.d(i,"RemoteDependencyData",(function(){return Me})),n.d(i,"Trace",(function(){return fe})),n.d(i,"PageViewPerformance",(function(){return xe})),n.d(i,"Data",(function(){return Oe})),n.d(i,"SeverityLevel",(function(){return ge})),n.d(i,"ConfigurationManager",(function(){return Ue})),n.d(i,"ContextTagKeys",(function(){return Fe})),n.d(i,"DataSanitizer",(function(){return J})),n.d(i,"TelemetryItemCreator",(function(){return ae})),n.d(i,"CtxTagKeys",(function(){return qe})),n.d(i,"Extensions",(function(){return je})),n.d(i,"DistributedTracingModes",(function(){return X})),n.d(i,"PropertiesPluginIdentifier",(function(){return He})),n.d(i,"BreezeChannelIdentifier",(function(){return ze}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function a(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=n(1328);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=o.m;function l(e,t){return s(e)===t}function u(e){return void 0===e||l(e,c)}function p(e){return u(e)||null===e}function d(e,t){return e&&Object.prototype.hasOwnProperty.call(e,t)}function f(e){return l(e,"object")}function h(e){return l(e,"function")}function g(e,t,n,i){void 0===i&&(i=!1);var r=!1;if(!p(e))try{p(e.addEventListener)?p(e.attachEvent)||(e.attachEvent("on"+t,n),r=!0):(e.addEventListener(t,n,i),r=!0)}catch(e){}return r}function m(e,t,n,i){if(void 0===i&&(i=!1),!p(e))try{p(e.removeEventListener)?p(e.detachEvent)||e.detachEvent("on"+t,n):e.removeEventListener(t,n,i)}catch(e){}}var v,y=function(){function e(){}return e.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.isString=function(e){return l(e,"string")},e.isNumber=function(e){return l(e,"number")},e.isBoolean=function(e){return l(e,"boolean")},e.disableCookies=function(){e._canUseCookies=!1},e.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(I,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},e.toISOString=function(t){if(e.isDate(t)){var n=function(e){var t=String(e);return 1===t.length&&(t="0"+t),t};return t.getUTCFullYear()+"-"+n(t.getUTCMonth()+1)+"-"+n(t.getUTCDate())+"T"+n(t.getUTCHours())+":"+n(t.getUTCMinutes())+":"+n(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}},e.arrForEach=function(e,t,n){for(var i=e.length,r=0;r<i;++r)r in e&&t.call(n||e,e[r],r,e)},e.arrIndexOf=function(e,t,n){for(var i=e.length,r=n||0,a=Math.max(r>=0?r:i-Math.abs(r),0);a<i;a++)if(a in e&&e[a]===t)return a;return-1},e.arrMap=function(e,t,n){for(var i=e.length,r=n||e,a=new Array(i),o=0;o<i;o++)o in e&&(a[o]=t.call(r,e[o],e));return a},e.arrReduce=function(e,t,n){var i,r=e.length,a=0;if(arguments.length>=3)i=arguments[2];else{for(;a<r&&!(a in e);)a++;i=e[a++]}for(;a<r;)a in e&&(i=t(i,e[a],a,e)),a++;return i},e.objCreate=function(e){if(null==e)return{};if(!f(e)&&!h(e))throw new TypeError("Object prototype may only be an Object: "+e);function t(){}return t.prototype=e,new t},e.objKeys=function(e){var t=!{toString:null}.propertyIsEnumerable("toString");if(!(h(e)||f(e)&&null!==e))throw new TypeError("objKeys called on non-object");var n=[];for(var i in e)d(e,i)&&n.push(i);if(t)for(var r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=r.length,o=0;o<a;o++)d(e,r[o])&&n.push(r[o]);return n},e.objDefineAccessors=function(e,t,n,i){var r=Object.defineProperty;if(r)try{var a={enumerable:!0,configurable:!0};return n&&(a.get=n),i&&(a.set=i),r(e,t,a),!0}catch(e){}return!1},e.addEventHandler=function(e,t){var n=!1,i=Object(o.i)();i&&(n=g(i,e,t),n=g(i.body,e,t)||n);var r=Object(o.a)();return r&&(n=x.Attach(r,e,t)||n),n},e.isTypeof=l,e.isUndefined=u,e.isNullOrUndefined=p,e.hasOwnProperty=d,e.isFunction=h,e.isObject=f,e}(),I=/[xy]/g,x=function(){function e(){}return e.Attach=g,e.AttachEvent=g,e.Detach=m,e.DetachEvent=m,e}();!function(e){e[e.CRITICAL=1]="CRITICAL",e[e.WARNING=2]="WARNING"}(v||(v={}));var _={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73},b=function(){function e(t,n,i,r){void 0===i&&(i=!1),this.messageId=t,this.message=(i?e.AiUserActionablePrefix:e.AiNonUserActionablePrefix)+t;var a="";Object(o.k)()&&(a=Object(o.e)().stringify(r));var s=(n?" message:"+e.sanitizeDiagnosticText(n):"")+(r?" props:"+e.sanitizeDiagnosticText(a):"");this.message+=s}return e.sanitizeDiagnosticText=function(e){return e?'"'+e.replace(/\"/g,"")+'"':""},e.dataType="MessageData",e.AiNonUserActionablePrefix="AI (Internal): ",e.AiUserActionablePrefix="AI: ",e}(),T=function(){function e(e){this.queue=[],this.AIInternalMessagePrefix="AITR_",this._messageCount=0,this._messageLogged={},this.enableDebugExceptions=function(){return!1},this.consoleLoggingLevel=function(){return 0},this.telemetryLoggingLevel=function(){return 1},this.maxInternalMessageLimit=function(){return 25},y.isNullOrUndefined(e)||(y.isNullOrUndefined(e.loggingLevelConsole)||(this.consoleLoggingLevel=function(){return e.loggingLevelConsole}),y.isNullOrUndefined(e.loggingLevelTelemetry)||(this.telemetryLoggingLevel=function(){return e.loggingLevelTelemetry}),y.isNullOrUndefined(e.maxMessageLimit)||(this.maxInternalMessageLimit=function(){return e.maxMessageLimit}),y.isNullOrUndefined(e.enableDebugExceptions)||(this.enableDebugExceptions=function(){return e.enableDebugExceptions}))}return e.prototype.throwInternal=function(e,t,n,i,r){void 0===r&&(r=!1);var a=new b(t,n,r,i);if(this.enableDebugExceptions())throw a;if(!y.isUndefined(a)&&a&&!y.isUndefined(a.message)){if(r){var o=+a.messageId;!this._messageLogged[o]&&this.consoleLoggingLevel()>=v.WARNING&&(this.warnToConsole(a.message),this._messageLogged[o]=!0)}else this.consoleLoggingLevel()>=v.WARNING&&this.warnToConsole(a.message);this.logInternalMessage(e,a)}},e.prototype.warnToConsole=function(e){!y.isUndefined(console)&&console&&(y.isFunction(console.warn)?console.warn(e):y.isFunction(console.log)&&console.log(e))},e.prototype.resetInternalMessageCount=function(){this._messageCount=0,this._messageLogged={}},e.prototype.logInternalMessage=function(e,t){if(!this._areInternalMessagesThrottled()){var n=!0,i=this.AIInternalMessagePrefix+t.messageId;if(this._messageLogged[i]?n=!1:this._messageLogged[i]=!0,n&&(e<=this.telemetryLoggingLevel()&&(this.queue.push(t),this._messageCount++),this._messageCount===this.maxInternalMessageLimit())){var r="Internal events throttle limit per PageView reached for this app.",a=new b(_.MessageLimitPerPVExceeded,r,!1);this.queue.push(a),this.warnToConsole(r)}}},e.prototype._areInternalMessagesThrottled=function(){return this._messageCount>=this.maxInternalMessageLimit()},e}(),S=y.isFunction,C=function(e,t){var n=this,i=null,r=S(e.processTelemetry),a=S(e.setNextPlugin);n._hasRun=!1,n.getPlugin=function(){return e},n.getNext=function(){return i},n.setNext=function(e){i=e},n.processTelemetry=function(o,s){if(s||(s=t),e&&r){n._hasRun=!0;try{s.setNext(i),a&&e.setNextPlugin(i),i&&(i._hasRun=!1),e.processTelemetry(o,s)}catch(t){var c=i&&i._hasRun;i&&c||s.diagLog().throwInternal(v.CRITICAL,_.PluginException,"Plugin ["+e.identifier+"] failed during processTelemetry - "+t),i&&!c&&i.processTelemetry(o,s)}}else i&&(n._hasRun=!0,i.processTelemetry(o,s))}},w=y.isNullOrUndefined;function D(e,t){var n=[];if(e&&e.length>0)for(var i=null,r=0;r<e.length;r++){var a=e[r];if(a&&y.isFunction(a.processTelemetry)){var o=new C(a,t);n.push(o),i&&i.setNext(o),i=o}}return n.length>0?n[0]:null}var E=function e(t,n,i,r){var a=this,o=null;null!==r&&(t&&y.isFunction(t.getPlugin)?o=function(e,t,n){var i=[],r=!n;if(e)for(;e;){var a=e.getPlugin();(r||a===n)&&(r=!0,i.push(a)),e=e.getNext()}return r||i.push(n),D(i,t)}(t,a,r||t.getPlugin()):r?o=function(e,t,n){var i=e,r=!1;return n&&e&&(i=[],y.arrForEach(e,(function(e){(r||e===n)&&(r=!0,i.push(e))}))),n&&!r&&(i||(i=[]),i.push(n)),D(i,t)}(t,a,r):y.isUndefined(r)&&(o=D(t,a))),a.core=function(){return i},a.diagLog=function(){var e=(i||{}).logger;return e||(e=new T(n||{})),e},a.getCfg=function(){return n},a.getExtCfg=function(e,t){var i;if(void 0===t&&(t={}),n){var r=n.extensionConfig;r&&e&&(i=r[e])}return i||t},a.getConfig=function(e,t,i){var r;void 0===i&&(i=!1);var o=a.getExtCfg(e,null);return o&&!w(o[t])?r=o[t]:n&&!w(n[t])&&(r=n[t]),w(r)?i:r},a.hasNext=function(){return null!=o},a.getNext=function(){return o},a.setNext=function(e){o=e},a.processNext=function(e){var t=o;t&&(o=t.getNext(),t.processTelemetry(e,a))},a.createNew=function(t,r){return void 0===t&&(t=null),new e(t||o,n,i,r)}},A=y.isFunction,N=function(){function e(){var e=this,t=!1,n=null,i=null;e.core=null,e.diagLog=function(t){return e._getTelCtx(t).diagLog()},e.isInitialized=function(){return t},e.setInitialized=function(e){t=e},e.setNextPlugin=function(e){i=e},e.processNext=function(e,t){t?t.processNext(e):i&&A(i.processTelemetry)&&i.processTelemetry(e,null)},e._getTelCtx=function(t){void 0===t&&(t=null);var r=t;if(!r){var a=n||new E(null,{},e.core);r=i&&i.getPlugin?a.createNew(null,i.getPlugin):a.createNew(null,i)}return r},e._baseTelInit=function(r,a,o,s){r&&(r.extensionConfig=r.extensionConfig||[]),!s&&a&&(s=a.getProcessTelContext().getNext());var c=i;i&&i.getPlugin&&(c=i.getPlugin()),e.core=a,n=new E(s,r,a,c),t=!0}}return e.prototype.initialize=function(e,t,n,i){this._baseTelInit(e,t,n,i)},e}(),k=y.isFunction;function R(e,t){for(var n=[],i=null,r=e.getNext();r;){var a=r.getPlugin();a&&(i&&k(i.setNextPlugin)&&k(a.processTelemetry)&&i.setNextPlugin(a),k(a.isInitialized)&&a.isInitialized()||n.push(a),i=a,r=r.getNext())}y.arrForEach(n,(function(n){n.initialize(e.getCfg(),e.core(),t,e.getNext())}))}function L(e){return e.sort((function(e,t){var n=0,i=k(t.processTelemetry);return k(e.processTelemetry)?n=i?e.priority-t.priority:1:i&&(n=-1),n}))}var P=y.arrForEach,M=y.objDefineAccessors;function O(e,t){t&&t.length>0&&(function(e){P(e,(function(e){if(e.priority<500)throw Error("Channel has invalid priority"+e.identifier)}))}(t=t.sort((function(e,t){return e.priority-t.priority}))),e.push(t))}var U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.identifier="ChannelControllerPlugin",t.priority=500,t}return a(t,e),t.prototype.processTelemetry=function(e,t){var n=this;this._channelQueue&&P(this._channelQueue,(function(i){i.length>0&&n._getTelCtx(t).createNew(i).processNext(e)}))},t.prototype.getChannelControls=function(){return this._channelQueue},t.prototype.initialize=function(t,n,i){if(!this.isInitialized()){e.prototype.initialize.call(this,t,n,i),t.isCookieUseDisabled&&y.disableCookies();var r=this._channelQueue=function(e,t){var n=[];if(e&&P(e,(function(e){return O(n,e)})),t){var i=[];P(t,(function(e){e.priority>500&&i.push(e)})),O(n,i)}return n}((t||{}).channels,i);P(r,(function(e){return R(new E(e,t,n),i)}))}},t._staticInit=(M(t.prototype,"ChannelControls",t.prototype.getChannelControls),void M(t.prototype,"channelQueue",t.prototype.getChannelControls)),t}(N),F=y.arrForEach,j=y.isNullOrUndefined,q=function(){function e(){var e=!1;this._extensions=new Array,this._channelController=new U,this.isInitialized=function(){return e},this._setInit=function(t){e=t},this._eventQueue=[]}return e.prototype.initialize=function(e,t,n,i){if(this.isInitialized())throw Error("Core should not be initialized more than once");if(!e||j(e.instrumentationKey))throw Error("Please provide instrumentation key");this.config=e;var r=this._channelController;i||(i=y.objCreate({addNotificationListener:function(e){},removeNotificationListener:function(e){},eventsSent:function(e){},eventsDiscarded:function(e,t){}})),this._notificationManager=i,e.extensions=j(e.extensions)?[]:e.extensions,(e.extensionConfig=j(e.extensionConfig)?{}:e.extensionConfig).NotificationManager=i,n||(n=y.objCreate({throwInternal:function(e,t,n,i,r){void 0===r&&(r=!1)},warnToConsole:function(e){},resetInternalMessageCount:function(){}})),this.logger=n;var a=[];a.push.apply(a,t.concat(e.extensions)),a=L(a);var o=[],s=[],c={};if(F(a,(function(e){if(j(e)||j(e.initialize))throw Error("Extensions must provide callback to initialize");var t=e.priority,i=e.identifier;e&&t&&(j(c[t])?c[t]=i:n.warnToConsole("Two extensions have same priority #"+t+" - "+c[t]+", "+i)),!t||t<r.priority?o.push(e):s.push(e)})),a.push(r),o.push(r),a=L(a),this._extensions=a,R(new E([r],e,this),a),R(new E(o,e,this),a),this._extensions=o,0===this.getTransmissionControls().length)throw new Error("No channels available");this._setInit(!0)},e.prototype.getTransmissionControls=function(){return this._channelController.getChannelControls()},e.prototype.track=function(e){var t=this;e.iKey||(e.iKey=t.config.instrumentationKey),e.time||(e.time=y.toISOString(new Date)),j(e.ver)&&(e.ver="4.0"),t.isInitialized()?(t._eventQueue.length>0&&(F(t._eventQueue,(function(e){t.getProcessTelContext().processNext(e)})),t._eventQueue=[]),t.getProcessTelContext().processNext(e)):t._eventQueue.push(e)},e.prototype.getProcessTelContext=function(){var e=this._extensions,t=e;return e&&0!==e.length||(t=[this._channelController]),new E(t,this.config,this)},e}(),H=2,z=function(){function e(){this.listeners=[]}return e.prototype.addNotificationListener=function(e){this.listeners.push(e)},e.prototype.removeNotificationListener=function(e){for(var t=y.arrIndexOf(this.listeners,e);t>-1;)this.listeners.splice(t,1),t=y.arrIndexOf(this.listeners,e)},e.prototype.eventsSent=function(e){for(var t=this,n=function(n){i.listeners[n].eventsSent&&setTimeout((function(){return t.listeners[n].eventsSent(e)}),0)},i=this,r=0;r<this.listeners.length;++r)n(r)},e.prototype.eventsDiscarded=function(e,t){for(var n=this,i=function(i){r.listeners[i].eventsDiscarded&&setTimeout((function(){return n.listeners[i].eventsDiscarded(e,t)}),0)},r=this,a=0;a<this.listeners.length;++a)i(a)},e}(),B=function(e){function t(){return e.call(this)||this}return a(t,e),t.prototype.initialize=function(t,n){this._notificationManager=new z,this.logger=new T(t),this.config=t,e.prototype.initialize.call(this,t,n,this.logger,this._notificationManager)},t.prototype.getTransmissionControls=function(){return e.prototype.getTransmissionControls.call(this)},t.prototype.track=function(t){if(null===t)throw this._notifyInvalidEvent(t),Error("Invalid telemetry item");this._validateTelemetryItem(t),e.prototype.track.call(this,t)},t.prototype.addNotificationListener=function(e){this._notificationManager&&this._notificationManager.addNotificationListener(e)},t.prototype.removeNotificationListener=function(e){this._notificationManager&&this._notificationManager.removeNotificationListener(e)},t.prototype.pollInternalLogs=function(e){var t=this,n=this.config.diagnosticLogInterval;return n>0||(n=1e4),setInterval((function(){var n=t,i=n.logger?n.logger.queue:[];y.arrForEach(i,(function(t){var i={name:e||"InternalMessageId: "+t.messageId,iKey:n.config.instrumentationKey,time:y.toISOString(new Date),baseType:b.dataType,baseData:{message:t.message}};n.track(i)})),i.length=0}),n)},t.prototype._validateTelemetryItem=function(e){if(y.isNullOrUndefined(e.name))throw this._notifyInvalidEvent(e),Error("telemetry name required")},t.prototype._notifyInvalidEvent=function(e){this._notificationManager&&this._notificationManager.eventsDiscarded([e],H)},t}(q);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var V=function(e,t){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var G,W,X,K=function(){return(K=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};!function(e){e[e.LocalStorage=0]="LocalStorage",e[e.SessionStorage=1]="SessionStorage"}(G||(G={})),function(e){e[e.Default=0]="Default",e[e.Required=1]="Required",e[e.Array=2]="Array",e[e.Hidden=4]="Hidden"}(W||(W={})),function(e){e[e.AI=0]="AI",e[e.AI_AND_W3C=1]="AI_AND_W3C",e[e.W3C=2]="W3C"}(X||(X={}));var Y=function(){function e(){}return e.requestContextHeader="Request-Context",e.requestContextTargetKey="appId",e.requestContextAppIdFormat="appId=cid-v1:",e.requestIdHeader="Request-Id",e.traceParentHeader="traceparent",e.sdkContextHeader="Sdk-Context",e.sdkContextHeaderAppIdRequest="appId",e.requestContextHeaderLowerCase="request-context",e}(),J=function(){function e(){}return e.sanitizeKeyAndAddUniqueness=function(t,n,i){var r=n.length,a=e.sanitizeKey(t,n);if(a.length!==r){for(var o=0,s=a;void 0!==i[s];)o++,s=a.substring(0,e.MAX_NAME_LENGTH-3)+e.padNumber(o);a=s}return a},e.sanitizeKey=function(t,n){var i;return n&&(n=e.trim(n.toString())).length>e.MAX_NAME_LENGTH&&(i=n.substring(0,e.MAX_NAME_LENGTH),t.throwInternal(v.WARNING,_.NameTooLong,"name is too long.  It has been truncated to "+e.MAX_NAME_LENGTH+" characters.",{name:n},!0)),i||n},e.sanitizeString=function(t,n,i){var r;return void 0===i&&(i=e.MAX_STRING_LENGTH),n&&(i=i||e.MAX_STRING_LENGTH,(n=e.trim(n)).toString().length>i&&(r=n.toString().substring(0,i),t.throwInternal(v.WARNING,_.StringValueTooLong,"string value is too long. It has been truncated to "+i+" characters.",{value:n},!0))),r||n},e.sanitizeUrl=function(t,n){return e.sanitizeInput(t,n,e.MAX_URL_LENGTH,_.UrlTooLong)},e.sanitizeMessage=function(t,n){var i;return n&&n.length>e.MAX_MESSAGE_LENGTH&&(i=n.substring(0,e.MAX_MESSAGE_LENGTH),t.throwInternal(v.WARNING,_.MessageTruncated,"message is too long, it has been truncated to "+e.MAX_MESSAGE_LENGTH+" characters.",{message:n},!0)),i||n},e.sanitizeException=function(t,n){var i;return n&&n.length>e.MAX_EXCEPTION_LENGTH&&(i=n.substring(0,e.MAX_EXCEPTION_LENGTH),t.throwInternal(v.WARNING,_.ExceptionTruncated,"exception is too long, it has been truncated to "+e.MAX_EXCEPTION_LENGTH+" characters.",{exception:n},!0)),i||n},e.sanitizeProperties=function(t,n){if(n){var i={};for(var r in n){var a=n[r];if(y.isObject(a)&&Object(o.k)())try{a=Object(o.e)().stringify(a)}catch(e){t.throwInternal(v.WARNING,_.CannotSerializeObjectNonSerializable,"custom property is not valid",{exception:e},!0)}a=e.sanitizeString(t,a,e.MAX_PROPERTY_LENGTH),i[r=e.sanitizeKeyAndAddUniqueness(t,r,i)]=a}n=i}return n},e.sanitizeMeasurements=function(t,n){if(n){var i={};for(var r in n){var a=n[r];i[r=e.sanitizeKeyAndAddUniqueness(t,r,i)]=a}n=i}return n},e.sanitizeId=function(t,n){return n?e.sanitizeInput(t,n,e.MAX_ID_LENGTH,_.IdTooLong).toString():n},e.sanitizeInput=function(t,n,i,r){var a;return n&&(n=e.trim(n)).length>i&&(a=n.substring(0,i),t.throwInternal(v.WARNING,r,"input is too long, it has been truncated to "+i+" characters.",{data:n},!0)),a||n},e.padNumber=function(e){var t="00"+e;return t.substr(t.length-3)},e.trim=function(e){return y.isString(e)?e.replace(/^\s+|\s+$/g,""):e},e.MAX_NAME_LENGTH=150,e.MAX_ID_LENGTH=128,e.MAX_PROPERTY_LENGTH=8192,e.MAX_STRING_LENGTH=1024,e.MAX_URL_LENGTH=2048,e.MAX_MESSAGE_LENGTH=32768,e.MAX_EXCEPTION_LENGTH=32768,e}(),Q=Object(o.g)(),Z=y.isString,$=null;var ee=function(){function e(){}return e.createDomEvent=function(e){var t=null;if(y.isFunction(Event))t=new Event(e);else{var n=Object(o.a)();n&&n.createEvent&&(t=n.createEvent("Event")).initEvent(e,!0,!0)}return t},e.disableStorage=function(){e._canUseLocalStorage=!1,e._canUseSessionStorage=!1},e._getLocalStorageObject=function(){return e.canUseLocalStorage()?e._getVerifiedStorageObject(G.LocalStorage):null},e._getVerifiedStorageObject=function(e){var t,n,i=null;try{if(y.isNullOrUndefined(Object(o.b)()))return null;n=new Date,(i=e===G.LocalStorage?Object(o.c)("localStorage"):Object(o.c)("sessionStorage")).setItem(n.toString(),n.toString()),t=i.getItem(n.toString())!==n.toString(),i.removeItem(n.toString()),t&&(i=null)}catch(e){i=null}return i},e.isInternalApplicationInsightsEndpoint=function(t){return-1!==e._internalEndpoints.indexOf(t.toLowerCase())},e.canUseLocalStorage=function(){return void 0===e._canUseLocalStorage&&(e._canUseLocalStorage=!!e._getVerifiedStorageObject(G.LocalStorage)),e._canUseLocalStorage},e.getStorage=function(t,n){var i=e._getLocalStorageObject();if(null!==i)try{return i.getItem(n)}catch(n){e._canUseLocalStorage=!1,t.throwInternal(v.WARNING,_.BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+e.getExceptionName(n),{exception:e.dump(n)})}return null},e.setStorage=function(t,n,i){var r=e._getLocalStorageObject();if(null!==r)try{return r.setItem(n,i),!0}catch(n){e._canUseLocalStorage=!1,t.throwInternal(v.WARNING,_.BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+e.getExceptionName(n),{exception:e.dump(n)})}return!1},e.removeStorage=function(t,n){var i=e._getLocalStorageObject();if(null!==i)try{return i.removeItem(n),!0}catch(n){e._canUseLocalStorage=!1,t.throwInternal(v.WARNING,_.BrowserFailedRemovalFromLocalStorage,"Browser failed removal of local storage item. "+e.getExceptionName(n),{exception:e.dump(n)})}return!1},e._getSessionStorageObject=function(){return e.canUseSessionStorage()?e._getVerifiedStorageObject(G.SessionStorage):null},e.canUseSessionStorage=function(){return void 0===e._canUseSessionStorage&&(e._canUseSessionStorage=!!e._getVerifiedStorageObject(G.SessionStorage)),e._canUseSessionStorage},e.getSessionStorageKeys=function(){var t=[];if(e.canUseSessionStorage())for(var n in Object(o.c)("sessionStorage"))t.push(n);return t},e.getSessionStorage=function(t,n){var i=e._getSessionStorageObject();if(null!==i)try{return i.getItem(n)}catch(n){e._canUseSessionStorage=!1,t.throwInternal(v.WARNING,_.BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+e.getExceptionName(n),{exception:e.dump(n)})}return null},e.setSessionStorage=function(t,n,i){var r=e._getSessionStorageObject();if(null!==r)try{return r.setItem(n,i),!0}catch(n){e._canUseSessionStorage=!1,t.throwInternal(v.WARNING,_.BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+e.getExceptionName(n),{exception:e.dump(n)})}return!1},e.removeSessionStorage=function(t,n){var i=e._getSessionStorageObject();if(null!==i)try{return i.removeItem(n),!0}catch(n){e._canUseSessionStorage=!1,t.throwInternal(v.WARNING,_.BrowserFailedRemovalFromSessionStorage,"Browser failed removal of session storage item. "+e.getExceptionName(n),{exception:e.dump(n)})}return!1},e.disableCookies=function(){y.disableCookies()},e.canUseCookies=function(t){if(void 0===y._canUseCookies){y._canUseCookies=!1;try{y._canUseCookies=void 0!==e.document.cookie}catch(n){t.throwInternal(v.WARNING,_.CannotAccessCookie,"Cannot access document.cookie - "+e.getExceptionName(n),{exception:e.dump(n)})}}return y._canUseCookies&&e.document&&e.document.cookie},e.disallowsSameSiteNone=function(e){return!!Z(e)&&(-1!==e.indexOf("CPU iPhone OS 12")||-1!==e.indexOf("iPad; CPU OS 12")||(-1!==e.indexOf("Macintosh; Intel Mac OS X 10_14")&&-1!==e.indexOf("Version/")&&-1!==e.indexOf("Safari")||(-1!==e.indexOf("Macintosh; Intel Mac OS X 10_14")&&(n="AppleWebKit/605.1.15 (KHTML, like Gecko)",i=(t=e).length,r=i-n.length,t.substring(r>=0?r:0,i)===n)||(-1!==e.indexOf("Chrome/5")||-1!==e.indexOf("Chrome/6")||(-1!==e.indexOf("UnrealEngine")&&-1===e.indexOf("Chrome")||(-1!==e.indexOf("UCBrowser/12")||-1!==e.indexOf("UCBrowser/11")))))));var t,n,i,r},e.setCookie=function(t,n,i,r){if(e.canUseCookies(t)){var a="",s="";r&&(a=";domain="+r);var c=Object(o.f)();c&&"https:"===c.protocol&&(s=";secure",null===$&&($=e.disallowsSameSiteNone((Object(o.g)()||{}).userAgent)),$||(i+=";SameSite=None")),e.document.cookie=n+"="+i+a+";path=/"+s}},e.stringToBoolOrDefault=function(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString().toLowerCase()},e.getCookie=function(t,n){if(e.canUseCookies(t)){var i="";if(n&&n.length)for(var r=n+"=",a=e.document.cookie.split(";"),o=0;o<a.length;o++){var s=a[o];if((s=e.trim(s))&&0===s.indexOf(r)){i=s.substring(r.length,a[o].length);break}}return i}},e.deleteCookie=function(t,n){e.canUseCookies(t)&&(e.document.cookie=n+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},e.trim=function(e){return Z(e)?e.replace(/^\s+|\s+$/g,""):e},e.newId=function(){for(var e="",t=1073741824*Math.random();t>0;){e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t%64),t=Math.floor(t/64)}return e},e.random32=function(){return 4294967296*Math.random()|0},e.generateW3CId=function(){for(var t,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],i="",r=0;r<4;r++)i+=n[15&(t=e.random32())]+n[t>>4&15]+n[t>>8&15]+n[t>>12&15]+n[t>>16&15]+n[t>>20&15]+n[t>>24&15]+n[t>>28&15];var a=n[8+4*Math.random()|0];return i.substr(0,8)+i.substr(9,4)+"4"+i.substr(13,3)+a+i.substr(16,3)+i.substr(19,12)},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isError=function(e){return"[object Error]"===Object.prototype.toString.call(e)},e.getIEVersion=function(e){void 0===e&&(e=null);var t=e?e.toLowerCase():Q?(Q.userAgent||"").toLowerCase():"";return-1!==t.indexOf("msie")?parseInt(t.split("msie")[1]):null},e.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=""+(e=Math.round(e))%1e3,n=""+Math.floor(e/1e3)%60,i=""+Math.floor(e/6e4)%60,r=""+Math.floor(e/36e5)%24,a=Math.floor(e/864e5);return t=1===t.length?"00"+t:2===t.length?"0"+t:t,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i,(a>0?a+".":"")+(r=r.length<2?"0"+r:r)+":"+i+":"+n+"."+t},e.isCrossOriginError=function(e,t,n,i,r){return("Script error."===e||"Script error"===e)&&!r},e.dump=function(e){var t=Object.prototype.toString.call(e),n="";return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":Object(o.k)()&&(n=Object(o.e)().stringify(e)),t+n},e.getExceptionName=function(e){return"[object Error]"===Object.prototype.toString.call(e)?e.name:""},e.addEventHandler=function(e,t){return x.Attach(Object(o.i)(),e,t)},e.IsBeaconApiSupported=function(){return"sendBeacon"in Q&&Q.sendBeacon},e.getExtension=function(e,t){for(var n=null,i=0;!n&&i<e.length;)e[i]&&e[i].identifier===t&&(n=e[i]),i++;return n},e.document=Object(o.a)()||{},e._canUseLocalStorage=void 0,e._canUseSessionStorage=void 0,e._internalEndpoints=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],e.NotSpecified="not_specified",e.isDate=y.isDate,e.toISOStringForIE8=y.toISOString,e}(),te=function(){function e(){}return e.parseUrl=function(t){return e.htmlAnchorElement||(e.htmlAnchorElement=e.document.createElement?e.document.createElement("a"):{host:e.parseHost(t)}),e.htmlAnchorElement.href=t,e.htmlAnchorElement},e.getAbsoluteUrl=function(t){var n,i=e.parseUrl(t);return i&&(n=i.href),n},e.getPathName=function(t){var n,i=e.parseUrl(t);return i&&(n=i.pathname),n},e.getCompleteUrl=function(e,t){return e?e.toUpperCase()+" "+t:t},e.parseHost=function(e){if(e){var t=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);if(null!=t&&t.length>2&&Z(t[2])&&t[2].length>0)return t[2]}return null},e.document=Object(o.a)()||{},e}(),ne=function(){function e(){}return e.canIncludeCorrelationHeader=function(e,t,n){if(e&&e.disableCorrelationHeaders)return!1;if(!t)return!1;var i=te.parseUrl(t).host.toLowerCase();if(!(e&&e.enableCorsCorrelation||i===n))return!1;var r,a=e&&e.correlationHeaderDomains;if(a&&(y.arrForEach(a,(function(e){var t=new RegExp(e.toLowerCase().replace(/\./g,".").replace(/\*/g,".*"));r=r||t.test(i)})),!r))return!1;var o=e&&e.correlationHeaderExcludedDomains;if(!o||0===o.length)return!0;for(var s=0;s<o.length;s++){if(new RegExp(o[s].toLowerCase().replace(/\./g,".").replace(/\*/g,".*")).test(i))return!1}return i&&i.length>0},e.getCorrelationContext=function(t){if(t){var n=e.getCorrelationContextValue(t,Y.requestContextTargetKey);if(n&&n!==e.correlationIdPrefix)return n}},e.getCorrelationContextValue=function(e,t){if(e)for(var n=e.split(","),i=0;i<n.length;++i){var r=n[i].split("=");if(2===r.length&&r[0]===t)return r[1]}},e.correlationIdPrefix="cid-v1:",e}(),ie=function(){function e(){}return e.ParseDependencyPath=function(e,t,n,i){var r,a=i,o=i;if(t&&t.length>0){var s=te.parseUrl(t);if(r=s.host,!a)if(null!=s.pathname){var c=0===s.pathname.length?"/":s.pathname;"/"!==c.charAt(0)&&(c="/"+c),o=s.pathname,a=J.sanitizeString(e,n?n+" "+c:c)}else a=J.sanitizeString(e,t)}else r=i,a=i;return{target:r,name:a,data:o}},e}(),re=function(){function e(){}return e.Now=function(){var e=Object(o.h)();return e&&e.now&&e.timing?e.now()+e.timing.navigationStart:(new Date).getTime()},e.GetDuration=function(e,t){var n=null;return 0===e||0===t||y.isNullOrUndefined(e)||y.isNullOrUndefined(t)||(n=t-e),n},e}(),ae=function(){function e(){}return e.create=function(e,t,n,i,r,a){if(n=J.sanitizeString(i,n)||ee.NotSpecified,y.isNullOrUndefined(e)||y.isNullOrUndefined(t)||y.isNullOrUndefined(n))throw Error("Input doesn't contain all required fields");var o={name:n,time:y.toISOString(new Date),iKey:"",ext:a||{},tags:[],data:{},baseType:t,baseData:e};if(!y.isNullOrUndefined(r))for(var s in r)r.hasOwnProperty(s)&&(o.data[s]=r[s]);return o},e}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var oe=function(e,t){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function se(e,t){function n(){this.constructor=e}oe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ce=function(){return(ce=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};var le,ue=function(){},pe=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return se(t,e),t}(ue),de=function(e){function t(t,n,i,r){var a=e.call(this)||this;return a.aiDataContract={ver:W.Required,name:W.Required,properties:W.Default,measurements:W.Default},a.name=J.sanitizeString(t,n)||ee.NotSpecified,a.properties=J.sanitizeProperties(t,i),a.measurements=J.sanitizeMeasurements(t,r),a}return se(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Event",t.dataType="EventData",t}(pe),fe=function(e){function t(t,n,i,r,a){var o=e.call(this)||this;return o.aiDataContract={ver:W.Required,message:W.Required,severityLevel:W.Default,properties:W.Default},n=n||ee.NotSpecified,o.message=J.sanitizeMessage(t,n),o.properties=J.sanitizeProperties(t,r),o.measurements=J.sanitizeMeasurements(t,a),i&&(o.severityLevel=i),o}return se(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Message",t.dataType="MessageData",t}(function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return se(t,e),t}(ue)),he=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t.measurements={},t}return se(t,e),t}(ue);!function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"}(le||(le={}));var ge,me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.aiDataContract={name:W.Required,kind:W.Default,value:W.Required,count:W.Default,min:W.Default,max:W.Default,stdDev:W.Default},t}return se(t,e),t}((function(){this.kind=le.Measurement})),ve=function(e){function t(t,n,i,r,a,o,s,c){var l=e.call(this)||this;l.aiDataContract={ver:W.Required,metrics:W.Required,properties:W.Default};var u=new me;return u.count=r>0?r:void 0,u.max=isNaN(o)||null===o?void 0:o,u.min=isNaN(a)||null===a?void 0:a,u.name=J.sanitizeString(t,n)||ee.NotSpecified,u.value=i,l.metrics=[u],l.properties=J.sanitizeProperties(t,s),l.measurements=J.sanitizeMeasurements(t,c),l}return se(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",t.dataType="MetricData",t}(he),ye=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return se(t,e),t}(pe),Ie=function(e){function t(t,n,i,r,a,o,s){var c=e.call(this)||this;return c.aiDataContract={ver:W.Required,name:W.Default,url:W.Default,duration:W.Default,properties:W.Default,measurements:W.Default,id:W.Default},c.id=J.sanitizeId(t,s),c.url=J.sanitizeUrl(t,i),c.name=J.sanitizeString(t,n)||ee.NotSpecified,isNaN(r)||(c.duration=ee.msToTimeSpan(r)),c.properties=J.sanitizeProperties(t,a),c.measurements=J.sanitizeMeasurements(t,o),c}return se(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",t.dataType="PageviewData",t}(ye),xe=function(e){function t(t,n,i,r,a,o,s){var c=e.call(this)||this;return c.aiDataContract={ver:W.Required,name:W.Default,url:W.Default,duration:W.Default,perfTotal:W.Default,networkConnect:W.Default,sentRequest:W.Default,receivedResponse:W.Default,domProcessing:W.Default,properties:W.Default,measurements:W.Default},c.url=J.sanitizeUrl(t,i),c.name=J.sanitizeString(t,n)||ee.NotSpecified,c.properties=J.sanitizeProperties(t,a),c.measurements=J.sanitizeMeasurements(t,o),s&&(c.domProcessing=s.domProcessing,c.duration=s.duration,c.networkConnect=s.networkConnect,c.perfTotal=s.perfTotal,c.receivedResponse=s.receivedResponse,c.sentRequest=s.sentRequest),c}return se(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",t.dataType="PageviewPerformanceData",t}(function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return se(t,e),t}(ye)),_e=function(){},be=function(){this.hasFullStack=!0,this.parsedStack=[]},Te=function(e){function t(t,n,i,r,a,o){var s=e.call(this)||this;return s.aiDataContract={ver:W.Required,exceptions:W.Required,severityLevel:W.Default,properties:W.Default,measurements:W.Default},n instanceof Error?(s.exceptions=[new Se(t,n)],s.properties=J.sanitizeProperties(t,i),s.measurements=J.sanitizeMeasurements(t,r),a&&(s.severityLevel=a),o&&(s.id=o)):(s.exceptions=n.exceptions,s.properties=n.properties,s.measurements=n.measurements,n.severityLevel&&(s.severityLevel=n.severityLevel),n.id&&(s.id=n.id),n.problemGroup&&(s.problemGroup=n.problemGroup),s.ver=2,y.isNullOrUndefined(n.isManual)||(s.isManual=n.isManual)),s}return se(t,e),t.CreateFromInterface=function(e,n){var i=n.exceptions&&y.arrMap(n.exceptions,(function(t){return Se.CreateFromInterface(e,t)}));return new t(e,ce({},n,{exceptions:i}))},t.prototype.toInterface=function(){var e=this,t=e.exceptions,n=e.properties,i=e.measurements,r=e.severityLevel,a=(e.ver,e.problemGroup),o=e.id,s=e.isManual;return{ver:"4.0",exceptions:t instanceof Array&&y.arrMap(t,(function(e){return e.toInterface()}))||void 0,severityLevel:r,properties:n,measurements:i,problemGroup:a,id:o,isManual:s}},t.CreateSimpleException=function(e,t,n,i,r,a){return{exceptions:[{hasFullStack:!0,message:e,stack:r,typeName:t}]}},t.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",t.dataType="ExceptionData",t}(function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}return se(t,e),t}(ue)),Se=function(e){function t(n,i){var r=e.call(this)||this;if(r.aiDataContract={id:W.Default,outerId:W.Default,typeName:W.Required,message:W.Required,hasFullStack:W.Default,stack:W.Default,parsedStack:W.Array},i instanceof Error){r.typeName=J.sanitizeString(n,i.name)||ee.NotSpecified,r.message=J.sanitizeMessage(n,i.message)||ee.NotSpecified;var a=i.stack;r.parsedStack=t.parseStack(a),r.stack=J.sanitizeException(n,a),r.hasFullStack=ee.isArray(r.parsedStack)&&r.parsedStack.length>0}else r.typeName=i.typeName,r.message=i.message,r.stack=i.stack,r.parsedStack=i.parsedStack,r.hasFullStack=i.hasFullStack;return r}return se(t,e),t.prototype.toInterface=function(){var e=this.parsedStack instanceof Array&&y.arrMap(this.parsedStack,(function(e){return e.toInterface()}));return{id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this.stack,parsedStack:e||void 0}},t.CreateFromInterface=function(e,n){var i=n.parsedStack instanceof Array&&y.arrMap(n.parsedStack,(function(e){return Ce.CreateFromInterface(e)}))||n.parsedStack;return new t(e,ce({},n,{parsedStack:i}))},t.parseStack=function(e){var t;if(y.isString(e)){var n=e.split("\n");t=[];for(var i=0,r=0,a=0;a<=n.length;a++){var o=n[a];if(Ce.regex.test(o)){var s=new Ce(n[a],i++);r+=s.sizeInBytes,t.push(s)}}if(r>32768)for(var c=0,l=t.length-1,u=0,p=c,d=l;c<l;){if((u+=t[c].sizeInBytes+t[l].sizeInBytes)>32768){var f=d-p+1;t.splice(p,f);break}p=c,d=l,c++,l--}}return t},t}(be),Ce=function(e){function t(n,i){var r=e.call(this)||this;if(r.sizeInBytes=0,r.aiDataContract={level:W.Required,method:W.Required,assembly:W.Default,fileName:W.Default,line:W.Default},"string"==typeof n){var a=n;r.level=i,r.method="<no_method>",r.assembly=ee.trim(a),r.fileName="",r.line=0;var o=a.match(t.regex);o&&o.length>=5&&(r.method=ee.trim(o[2])||r.method,r.fileName=ee.trim(o[4]),r.line=parseInt(o[5])||0)}else r.level=n.level,r.method=n.method,r.assembly=n.assembly,r.fileName=n.fileName,r.line=n.line,r.sizeInBytes=0;return r.sizeInBytes+=r.method.length,r.sizeInBytes+=r.fileName.length,r.sizeInBytes+=r.assembly.length,r.sizeInBytes+=t.baseSize,r.sizeInBytes+=r.level.toString().length,r.sizeInBytes+=r.line.toString().length,r}return se(t,e),t.CreateFromInterface=function(e){return new t(e,null)},t.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},t.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,t.baseSize=58,t}(_e);!function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"}(ge||(ge={}));var we="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",De="sampleRate",Ee="ProcessLegacy",Ae="http.method",Ne="https://dc.services.visualstudio.com",ke=function(){function e(){}return e.parse=function(t){if(!t)return{};var n=t.split(e._FIELDS_SEPARATOR),i=y.arrReduce(n,(function(t,n){var i=n.split(e._FIELD_KEY_VALUE_SEPARATOR);if(2===i.length){var r=i[0].toLowerCase(),a=i[1];t[r]=a}return t}),{});if(y.objKeys(i).length>0){if(i.endpointsuffix){var r=i.location?i.location+".":"";i.ingestionendpoint=i.ingestionendpoint||"https://"+r+"dc."+i.endpointsuffix}i.ingestionendpoint=i.ingestionendpoint||Ne}return i},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}(),Re=function(){},Le=function(e){function t(){return e.call(this)||this}return se(t,e),t}(Re),Pe=function(e){function t(t,n,i){var r=e.call(this)||this;return r.name=J.sanitizeString(t,i)||ee.NotSpecified,r.data=n,r.time=y.toISOString(new Date),r.aiDataContract={time:W.Required,iKey:W.Required,name:W.Required,sampleRate:function(){return 100===r.sampleRate?W.Hidden:W.Required},tags:W.Required,data:W.Required},r}return se(t,e),t}((function(){this.ver=1,this.sampleRate=100,this.tags={}})),Me=function(e){function t(t,n,i,r,a,o,s,c,l,u,p,d){void 0===l&&(l="Ajax");var f=e.call(this)||this;f.aiDataContract={id:W.Required,ver:W.Required,name:W.Default,resultCode:W.Default,duration:W.Default,success:W.Default,data:W.Default,target:W.Default,type:W.Default,properties:W.Default,measurements:W.Default,kind:W.Default,value:W.Default,count:W.Default,min:W.Default,max:W.Default,stdDev:W.Default,dependencyKind:W.Default,dependencySource:W.Default,commandName:W.Default,dependencyTypeName:W.Default},f.id=n,f.duration=ee.msToTimeSpan(a),f.success=o,f.resultCode=s+"",f.type=J.sanitizeString(t,l);var h=ie.ParseDependencyPath(t,i,c,r);return f.data=J.sanitizeUrl(t,r)||h.data,f.target=J.sanitizeString(t,h.target),u&&(f.target=f.target+" | "+u),f.name=J.sanitizeString(t,h.name),f.properties=J.sanitizeProperties(t,p),f.measurements=J.sanitizeMeasurements(t,d),f}return se(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",t.dataType="RemoteDependencyData",t}(function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}return se(t,e),t}(ue)),Oe=function(e){function t(t,n){var i=e.call(this)||this;return i.aiDataContract={baseType:W.Required,baseData:W.Required},i.baseType=t,i.baseData=n,i}return se(t,e),t}(Le),Ue=function(){function e(){}return e.getConfig=function(e,t,n,i){var r;return void 0===i&&(i=!1),r=n&&e.extensionConfig&&e.extensionConfig[n]&&!y.isNullOrUndefined(e.extensionConfig[n][t])?e.extensionConfig[n][t]:e[t],y.isNullOrUndefined(r)?i:r},e}(),Fe=function(){this.applicationVersion="ai.application.ver",this.applicationBuild="ai.application.build",this.applicationTypeId="ai.application.typeId",this.applicationId="ai.application.applicationId",this.applicationLayer="ai.application.layer",this.deviceId="ai.device.id",this.deviceIp="ai.device.ip",this.deviceLanguage="ai.device.language",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceFriendlyName="ai.device.friendlyName",this.deviceNetwork="ai.device.network",this.deviceNetworkName="ai.device.networkName",this.deviceOEMName="ai.device.oemName",this.deviceOS="ai.device.os",this.deviceOSVersion="ai.device.osVersion",this.deviceRoleInstance="ai.device.roleInstance",this.deviceRoleName="ai.device.roleName",this.deviceScreenResolution="ai.device.screenResolution",this.deviceType="ai.device.type",this.deviceMachineName="ai.device.machineName",this.deviceVMName="ai.device.vmName",this.deviceBrowser="ai.device.browser",this.deviceBrowserVersion="ai.device.browserVersion",this.locationIp="ai.location.ip",this.locationCountry="ai.location.country",this.locationProvince="ai.location.province",this.locationCity="ai.location.city",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationRootId="ai.operation.rootId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.sessionIsNew="ai.session.isNew",this.userAccountAcquisitionDate="ai.user.accountAcquisitionDate",this.userAccountId="ai.user.accountId",this.userAgent="ai.user.userAgent",this.userId="ai.user.id",this.userStoreRegion="ai.user.storeRegion",this.userAuthUserId="ai.user.authUserId",this.userAnonymousUserAcquisitionDate="ai.user.anonUserAcquisitionDate",this.userAuthenticatedUserAcquisitionDate="ai.user.authUserAcquisitionDate",this.cloudName="ai.cloud.name",this.cloudRole="ai.cloud.role",this.cloudRoleVer="ai.cloud.roleVer",this.cloudRoleInstance="ai.cloud.roleInstance",this.cloudEnvironment="ai.cloud.environment",this.cloudLocation="ai.cloud.location",this.cloudDeploymentUnit="ai.cloud.deploymentUnit",this.internalNodeName="ai.internal.nodeName",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion"},je=function(){function e(){}return e.UserExt="user",e.DeviceExt="device",e.TraceExt="trace",e.WebExt="web",e.AppExt="app",e.OSExt="os",e.SessionExt="ses",e.SDKExt="sdk",e}(),qe=new Fe,He="AppInsightsPropertiesPlugin",ze="AppInsightsChannelPlugin",Be=function(){function e(e,t,n,i){this.pageViewPerformanceSent=!1,this.overridePageViewDuration=!1,this.overridePageViewDuration=t,this.appInsights=e,this._pageViewPerformanceManager=i,n&&(this._channel=function(){return n.getTransmissionControls()},this._logger=n.logger)}return e.prototype.trackPageView=function(e,t){var n=this,i=e.name;if(y.isNullOrUndefined(i)||"string"!=typeof i){var r=Object(o.a)();i=e.name=r&&r.title||""}var a=e.uri;if(y.isNullOrUndefined(a)||"string"!=typeof a){var s=Object(o.f)();a=e.uri=s&&s.href||""}if(!this._pageViewPerformanceManager.isPerformanceTimingSupported())return this.appInsights.sendPageViewInternal(e,t),y.arrForEach(this._channel(),(function(e){y.arrForEach(e,(function(e){return e.flush(!0)}))})),void this._logger.throwInternal(v.WARNING,_.NavigationTimingNotSupported,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info.");var c,l,u=!1,p=this._pageViewPerformanceManager.getPerformanceTiming().navigationStart;c=re.GetDuration(p,+new Date),this._pageViewPerformanceManager.shouldCollectDuration(c)||(c=void 0),y.isNullOrUndefined(t)||y.isNullOrUndefined(t.duration)||(l=t.duration),!this.overridePageViewDuration&&isNaN(l)||(isNaN(l)&&(t||(t={}),t.duration=c),this.appInsights.sendPageViewInternal(e,t),y.arrForEach(this._channel(),(function(e){y.arrForEach(e,(function(e){return e.flush(!0)}))})),u=!0);t||(t={});var d=setInterval((function(){try{if(n._pageViewPerformanceManager.isPerformanceTimingDataReady()){clearInterval(d);var r={name:i,uri:a};n._pageViewPerformanceManager.populatePageViewPerformanceEvent(r),r.isValid||u?(u||(t.duration=r.durationMs,n.appInsights.sendPageViewInternal(e,t)),n.pageViewPerformanceSent||(n.appInsights.sendPageViewPerformanceInternal(r,t),n.pageViewPerformanceSent=!0),y.arrForEach(n._channel(),(function(e){y.arrForEach(e,(function(e){return e.flush(!0)}))}))):(t.duration=c,n.appInsights.sendPageViewInternal(e,t),y.arrForEach(n._channel(),(function(e){y.arrForEach(e,(function(e){return e.flush(!0)}))})))}else re.GetDuration(p,+new Date)>6e4&&(clearInterval(d),u||(t.duration=6e4,n.appInsights.sendPageViewInternal(e,t),y.arrForEach(n._channel(),(function(e){y.arrForEach(e,(function(e){return e.flush(!0)}))}))))}catch(e){n._logger.throwInternal(v.CRITICAL,_.TrackPVFailedCalc,"trackPageView failed on page load calculation: "+ee.getExceptionName(e),{exception:ee.dump(e)})}}),100)},e}(),Ve=function(){function e(e,t){this.prevPageVisitDataKeyName="prevPageVisitData",this.pageVisitTimeTrackingHandler=t,this._logger=e}return e.prototype.trackPreviousPageVisit=function(e,t){try{var n=this.restartPageVisitTimer(e,t);n&&this.pageVisitTimeTrackingHandler(n.pageName,n.pageUrl,n.pageVisitTime)}catch(e){this._logger.warnToConsole("Auto track page visit time failed, metric will not be collected: "+ee.dump(e))}},e.prototype.restartPageVisitTimer=function(e,t){try{var n=this.stopPageVisitTimer();return this.startPageVisitTimer(e,t),n}catch(e){return this._logger.warnToConsole("Call to restart failed: "+ee.dump(e)),null}},e.prototype.startPageVisitTimer=function(e,t){try{if(ee.canUseSessionStorage()){if(null!=ee.getSessionStorage(this._logger,this.prevPageVisitDataKeyName))throw new Error("Cannot call startPageVisit consecutively without first calling stopPageVisit");var n=new Ge(e,t),i=Object(o.e)().stringify(n);ee.setSessionStorage(this._logger,this.prevPageVisitDataKeyName,i)}}catch(e){this._logger.warnToConsole("Call to start failed: "+ee.dump(e))}},e.prototype.stopPageVisitTimer=function(){try{if(ee.canUseSessionStorage()){var e=Date.now(),t=ee.getSessionStorage(this._logger,this.prevPageVisitDataKeyName);if(t&&Object(o.k)()){var n=Object(o.e)().parse(t);return n.pageVisitTime=e-n.pageVisitStartTime,ee.removeSessionStorage(this._logger,this.prevPageVisitDataKeyName),n}return null}return null}catch(e){return this._logger.warnToConsole("Stop page visit timer failed: "+ee.dump(e)),null}},e}(),Ge=function(e,t){this.pageVisitStartTime=Date.now(),this.pageName=e,this.pageUrl=t},We=function(){function e(e){this.MAX_DURATION_ALLOWED=36e5,e&&(this._logger=e.logger)}return e.prototype.populatePageViewPerformanceEvent=function(e){e.isValid=!1;var t=this.getPerformanceNavigationTiming(),n=this.getPerformanceTiming();if(t||n){if(t)var i=t.duration,r=re.GetDuration(t.startTime,t.connectEnd),a=re.GetDuration(t.requestStart,t.responseStart),o=re.GetDuration(t.responseStart,t.responseEnd),s=re.GetDuration(t.responseEnd,t.loadEventEnd);else i=re.GetDuration(n.navigationStart,n.loadEventEnd),r=re.GetDuration(n.navigationStart,n.connectEnd),a=re.GetDuration(n.requestStart,n.responseStart),o=re.GetDuration(n.responseStart,n.responseEnd),s=re.GetDuration(n.responseEnd,n.loadEventEnd);0===i?this._logger.throwInternal(v.WARNING,_.ErrorPVCalc,"error calculating page view performance.",{total:i,network:r,request:a,response:o,dom:s}):this.shouldCollectDuration(i,r,a,o,s)?i<Math.floor(r)+Math.floor(a)+Math.floor(o)+Math.floor(s)?this._logger.throwInternal(v.WARNING,_.ClientPerformanceMathError,"client performance math error.",{total:i,network:r,request:a,response:o,dom:s}):(e.durationMs=i,e.perfTotal=e.duration=ee.msToTimeSpan(i),e.networkConnect=ee.msToTimeSpan(r),e.sentRequest=ee.msToTimeSpan(a),e.receivedResponse=ee.msToTimeSpan(o),e.domProcessing=ee.msToTimeSpan(s),e.isValid=!0):this._logger.throwInternal(v.WARNING,_.InvalidDurationValue,"Invalid page load duration value. Browser perf data won't be sent.",{total:i,network:r,request:a,response:o,dom:s})}},e.prototype.getPerformanceTiming=function(){return this.isPerformanceTimingSupported()?Object(o.h)().timing:null},e.prototype.getPerformanceNavigationTiming=function(){return this.isPerformanceNavigationTimingSupported()?Object(o.h)().getEntriesByType("navigation")[0]:null},e.prototype.isPerformanceNavigationTimingSupported=function(){var e=Object(o.h)();return e&&e.getEntriesByType&&e.getEntriesByType("navigation").length>0},e.prototype.isPerformanceTimingSupported=function(){var e=Object(o.h)();return e&&e.timing},e.prototype.isPerformanceTimingDataReady=function(){var e=Object(o.h)(),t=e?e.timing:0;return t&&t.domainLookupStart>0&&t.navigationStart>0&&t.responseStart>0&&t.requestStart>0&&t.loadEventEnd>0&&t.responseEnd>0&&t.connectEnd>0&&t.domLoading>0},e.prototype.shouldCollectDuration=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object(o.g)()||{},i=["googlebot","adsbot-google","apis-google","mediapartners-google"],r=n.userAgent,a=!1;if(r)for(var s=0;s<i.length;s++)a=a||-1!==r.toLowerCase().indexOf(i[s]);if(a)return!1;for(s=0;s<e.length;s++)if(e[s]>=this.MAX_DURATION_ALLOWED)return!1;return!0},e}();function Xe(e,t){e&&e.dispatchEvent&&t&&e.dispatchEvent(t)}var Ke=function(e){function t(){var t=e.call(this)||this;t.identifier="ApplicationInsightsAnalytics",t.priority=180,t.autoRoutePVDelay=500,t._trackAjaxAttempts=0;var n=Object(o.f)();return t._prevUri=n&&n.href||"",t}return function(e,t){function n(){this.constructor=e}V(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.getDefaultConfig=function(e){return e||(e={}),e.sessionRenewalMs=18e5,e.sessionExpirationMs=864e5,e.disableExceptionTracking=ee.stringToBoolOrDefault(e.disableExceptionTracking),e.autoTrackPageVisitTime=ee.stringToBoolOrDefault(e.autoTrackPageVisitTime),e.overridePageViewDuration=ee.stringToBoolOrDefault(e.overridePageViewDuration),e.enableUnhandledPromiseRejectionTracking=ee.stringToBoolOrDefault(e.enableUnhandledPromiseRejectionTracking),(isNaN(e.samplingPercentage)||e.samplingPercentage<=0||e.samplingPercentage>=100)&&(e.samplingPercentage=100),e.isCookieUseDisabled=ee.stringToBoolOrDefault(e.isCookieUseDisabled),e.isStorageUseDisabled=ee.stringToBoolOrDefault(e.isStorageUseDisabled),e.isBrowserLinkTrackingEnabled=ee.stringToBoolOrDefault(e.isBrowserLinkTrackingEnabled),e.enableAutoRouteTracking=ee.stringToBoolOrDefault(e.enableAutoRouteTracking),e.namePrefix=e.namePrefix||"",e},t.prototype.processTelemetry=function(e,t){var n=!1,i=this._telemetryInitializers.length;t=this._getTelCtx(t);for(var r=0;r<i;++r){var a=this._telemetryInitializers[r];if(a)try{if(!1===a.apply(null,[e])){n=!0;break}}catch(e){t.diagLog().throwInternal(v.CRITICAL,_.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+ee.getExceptionName(e),{exception:ee.dump(e)},!0)}}n||this.processNext(e,t)},t.prototype.trackEvent=function(e,t){try{var n=ae.create(e,de.dataType,de.envelopeType,this.diagLog(),t);this.core.track(n)}catch(e){this.diagLog().throwInternal(v.WARNING,_.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+ee.getExceptionName(e),{exception:ee.dump(e)})}},t.prototype.startTrackEvent=function(e){try{this._eventTracking.start(e)}catch(e){this.diagLog().throwInternal(v.CRITICAL,_.StartTrackEventFailed,"startTrackEvent failed, event will not be collected: "+ee.getExceptionName(e),{exception:ee.dump(e)})}},t.prototype.stopTrackEvent=function(e,t,n){try{this._eventTracking.stop(e,void 0,t)}catch(e){this.diagLog().throwInternal(v.CRITICAL,_.StopTrackEventFailed,"stopTrackEvent failed, event will not be collected: "+ee.getExceptionName(e),{exception:ee.dump(e)})}},t.prototype.trackTrace=function(e,t){try{var n=ae.create(e,fe.dataType,fe.envelopeType,this.diagLog(),t);this.core.track(n)}catch(e){this.diagLog().throwInternal(v.WARNING,_.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+ee.getExceptionName(e),{exception:ee.dump(e)})}},t.prototype.trackMetric=function(e,t){try{var n=ae.create(e,ve.dataType,ve.envelopeType,this.diagLog(),t);this.core.track(n)}catch(e){this.diagLog().throwInternal(v.CRITICAL,_.TrackMetricFailed,"trackMetric failed, metric will not be collected: "+ee.getExceptionName(e),{exception:ee.dump(e)})}},t.prototype.trackPageView=function(e,t){try{var n=e||{};this._pageViewManager.trackPageView(n,K({},n.properties,n.measurements,t)),this.config.autoTrackPageVisitTime&&this._pageVisitTimeManager.trackPreviousPageVisit(n.name,n.uri)}catch(e){this.diagLog().throwInternal(v.CRITICAL,_.TrackPVFailed,"trackPageView failed, page view will not be collected: "+ee.getExceptionName(e),{exception:ee.dump(e)})}},t.prototype.sendPageViewInternal=function(e,t,n){var i=Object(o.a)();i&&(e.refUri=void 0===e.refUri?i.referrer:e.refUri);var r=ae.create(e,Ie.dataType,Ie.envelopeType,this.diagLog(),t,n);this.core.track(r),this._trackAjaxAttempts=0},t.prototype.sendPageViewPerformanceInternal=function(e,t,n){var i=ae.create(e,xe.dataType,xe.envelopeType,this.diagLog(),t,n);this.core.track(i)},t.prototype.trackPageViewPerformance=function(e,t){try{this._pageViewPerformanceManager.populatePageViewPerformanceEvent(e),this.sendPageViewPerformanceInternal(e,t)}catch(e){this.diagLog().throwInternal(v.CRITICAL,_.TrackPVFailed,"trackPageViewPerformance failed, page view will not be collected: "+ee.getExceptionName(e),{exception:ee.dump(e)})}},t.prototype.startTrackPage=function(e){try{if("string"!=typeof e){var t=Object(o.a)();e=t&&t.title||""}this._pageTracking.start(e)}catch(e){this.diagLog().throwInternal(v.CRITICAL,_.StartTrackFailed,"startTrackPage failed, page view may not be collected: "+ee.getExceptionName(e),{exception:ee.dump(e)})}},t.prototype.stopTrackPage=function(e,t,n,i){try{if("string"!=typeof e){var r=Object(o.a)();e=r&&r.title||""}if("string"!=typeof t){var a=Object(o.f)();t=a&&a.href||""}this._pageTracking.stop(e,t,n,i),this.config.autoTrackPageVisitTime&&this._pageVisitTimeManager.trackPreviousPageVisit(e,t)}catch(e){this.diagLog().throwInternal(v.CRITICAL,_.StopTrackFailed,"stopTrackPage failed, page view will not be collected: "+ee.getExceptionName(e),{exception:ee.dump(e)})}},t.prototype.sendExceptionInternal=function(e,t,n){var i=new Te(this.diagLog(),e.exception||new Error(ee.NotSpecified),e.properties,e.measurements,e.severityLevel,e.id).toInterface(),r=ae.create(i,Te.dataType,Te.envelopeType,this.diagLog(),t,n);this.core.track(r)},t.prototype.trackException=function(e,t){try{this.sendExceptionInternal(e,t)}catch(e){this.diagLog().throwInternal(v.CRITICAL,_.TrackExceptionFailed,"trackException failed, exception will not be collected: "+ee.getExceptionName(e),{exception:ee.dump(e)})}},t.prototype._onerror=function(e){try{var t={url:e&&e.url||(Object(o.a)()||{}).URL,lineNumber:e.lineNumber,columnNumber:e.columnNumber,message:e.message};if(ee.isCrossOriginError(e.message,e.url,e.lineNumber,e.columnNumber,e.error))this._sendCORSException(t.url);else{if(!ee.isError(e.error)){var n="window.onerror@"+t.url+":"+e.lineNumber+":"+(e.columnNumber||0);e.error=new Error(e.message),e.error.stack=n}this.trackException({exception:e.error,severityLevel:ge.Error},t)}}catch(t){var i=e.error?e.error.name+", "+e.error.message:"null";this.diagLog().throwInternal(v.CRITICAL,_.ExceptionWhileLoggingError,"_onError threw exception while logging error, error will not be collected: "+ee.getExceptionName(t),{exception:ee.dump(t),errorString:i})}},t.prototype.addTelemetryInitializer=function(e){this._telemetryInitializers.push(e)},t.prototype.initialize=function(n,i,r,a){var s=this;if(!this.isInitialized()){if(y.isNullOrUndefined(i))throw Error("Error initializing");e.prototype.initialize.call(this,n,i,r,a),this.setInitialized(!1);var c=this._getTelCtx(),l=this.identifier;this._globalconfig={instrumentationKey:n.instrumentationKey,endpointUrl:n.endpointUrl||"https://dc.services.visualstudio.com/v2/track"},this.config=c.getExtCfg(l);var u=t.getDefaultConfig();if(void 0!==u){for(var p in u)this.config[p]=c.getConfig(l,p,u[p]);if(this._globalconfig)for(var p in u)void 0===this._globalconfig[p]&&(this._globalconfig[p]=u[p])}this.config.isCookieUseDisabled&&ee.disableCookies(),this.config.isStorageUseDisabled&&ee.disableStorage();var d={instrumentationKey:function(){return n.instrumentationKey},accountId:function(){return s.config.accountId||n.accountId},sessionRenewalMs:function(){return s.config.sessionRenewalMs||n.sessionRenewalMs},sessionExpirationMs:function(){return s.config.sessionExpirationMs||n.sessionExpirationMs},sampleRate:function(){return s.config.samplingPercentage||n.samplingPercentage},cookieDomain:function(){return s.config.cookieDomain||n.cookieDomain},sdkExtension:function(){return s.config.sdkExtension||n.sdkExtension},isBrowserLinkTrackingEnabled:function(){return s.config.isBrowserLinkTrackingEnabled||n.isBrowserLinkTrackingEnabled},appId:function(){return s.config.appId||n.appId}};this._pageViewPerformanceManager=new We(this.core),this._pageViewManager=new Be(this,this.config.overridePageViewDuration,this.core,this._pageViewPerformanceManager),this._pageVisitTimeManager=new Ve(this.diagLog(),(function(e,t,n){return s.trackPageVisitTime(e,t,n)})),this._telemetryInitializers=this._telemetryInitializers||[],this._addDefaultTelemetryInitializers(d),this._eventTracking=new Ye(this.diagLog(),"trackEvent"),this._eventTracking.action=function(e,t,n,i){i||(i={}),i.duration=n.toString(),s.trackEvent({name:e,properties:i})},this._pageTracking=new Ye(this.diagLog(),"trackPageView"),this._pageTracking.action=function(e,t,n,i,r){y.isNullOrUndefined(i)&&(i={}),i.duration=n.toString();var a={name:e,uri:t,properties:i,measurements:r};s.sendPageViewInternal(a)};var f,h=Object(o.i)(),g=Object(o.d)(),m=Object(o.f)(),v=this;if(!1===this.config.disableExceptionTracking&&!this.config.autoExceptionInstrumented&&h){var I=h.onerror;h.onerror=function(e,t,n,i,r){var a=I&&I(e,t,n,i,r);return!0!==a&&v._onerror({message:e,url:t,lineNumber:n,columnNumber:i,error:r}),a},this.config.autoExceptionInstrumented=!0}if(!1===this.config.disableExceptionTracking&&!0===this.config.enableUnhandledPromiseRejectionTracking&&!this.config.autoUnhandledPromiseInstrumented&&h){var x=h.onunhandledrejection;h.onunhandledrejection=function(e){var t=x&&x.call(h,e);return!0!==t&&v._onerror({message:e.reason.toString(),error:e.reason instanceof Error?e.reason:new Error(e.reason.toString()),url:m?m.href:"",lineNumber:0,columnNumber:0}),t},this.config.autoUnhandledPromiseInstrumented=!0}if(!0===this.config.enableAutoRouteTracking&&g&&y.isFunction(g.pushState)&&y.isFunction(g.replaceState)&&h&&"undefined"!=typeof Event){var _=this;y.arrForEach(r,(function(e){e.identifier===He&&(s._properties=e)})),g.pushState=(f=g.pushState,function(){var e=f.apply(this,arguments);return Xe(h,ee.createDomEvent(_.config.namePrefix+"pushState")),Xe(h,ee.createDomEvent(_.config.namePrefix+"locationchange")),e}),g.replaceState=function(e){return function(){var t=e.apply(this,arguments);return Xe(h,ee.createDomEvent(_.config.namePrefix+"replaceState")),Xe(h,ee.createDomEvent(_.config.namePrefix+"locationchange")),t}}(g.replaceState),h.addEventListener&&(h.addEventListener(_.config.namePrefix+"popstate",(function(){Xe(h,ee.createDomEvent(_.config.namePrefix+"locationchange"))})),h.addEventListener(_.config.namePrefix+"locationchange",(function(){_._properties&&_._properties.context&&_._properties.context.telemetryTrace&&(_._properties.context.telemetryTrace.traceID=ee.generateW3CId(),_._properties.context.telemetryTrace.name=m&&m.pathname||"_unknown_"),s._currUri?(s._prevUri=s._currUri,s._currUri=m&&m.href||""):s._currUri=m&&m.href||"",setTimeout(function(e){_.trackPageView({refUri:e,properties:{duration:0}})}.bind(s,s._prevUri),_.autoRoutePVDelay)})))}this.setInitialized(!0)}},t.prototype.trackPageVisitTime=function(e,t,n){var i={PageName:e,PageUrl:t};this.trackMetric({name:"PageVisitTime",average:n,max:n,min:n,sampleCount:1},i)},t.prototype._addDefaultTelemetryInitializers=function(e){if(!e.isBrowserLinkTrackingEnabled()){var t=["/browserLinkSignalR/","/__browserLink/"];this._addTelemetryInitializer((function(e){if(e.baseType===Me.dataType){var n=e.baseData;if(n)for(var i=0;i<t.length;i++)if(n.target&&n.target.indexOf(t[i])>=0)return!1}return!0}))}},t.prototype._addTelemetryInitializer=function(e){this._telemetryInitializers.push(e)},t.prototype._sendCORSException=function(e){var t={message:"Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",url:e,lineNumber:0,columnNumber:0,error:void 0},n=ae.create(t,Te.dataType,Te.envelopeType,this.diagLog(),{url:e});this.core.track(n)},t.Version="2.4.4",t}(N),Ye=function(){function e(e,t){this._name=t,this._events={},this._logger=e}return e.prototype.start=function(e){void 0!==this._events[e]&&this._logger.throwInternal(v.WARNING,_.StartCalledMoreThanOnce,"start was called more than once for this event without calling stop.",{name:this._name,key:e},!0),this._events[e]=+new Date},e.prototype.stop=function(e,t,n,i){var r=this._events[e];if(isNaN(r))this._logger.throwInternal(v.WARNING,_.StopCalledWithoutStart,"stop was called without a corresponding start.",{name:this._name,key:e},!0);else{var a=+new Date,o=re.GetDuration(r,a);this.action(e,t,o,n,i)}delete this._events[e],this._events[e]=void 0},e}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Je=function(e,t){return(Je=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Qe(e,t){function n(){this.constructor=e}Je(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ze=function(){return(Ze=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};var $e=function(){function e(e){this._config=e,this._buffer=[]}return e.prototype.enqueue=function(e){this._buffer.push(e)},e.prototype.count=function(){return this._buffer.length},e.prototype.clear=function(){this._buffer.length=0},e.prototype.getItems=function(){return this._buffer.slice(0)},e.prototype.batchPayloads=function(e){return e&&e.length>0?this._config.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},e.prototype.markAsSent=function(e){this.clear()},e.prototype.clearSent=function(e){},e}(),et=function(){function e(t,n){this._bufferFullMessageSent=!1,this._logger=t,this._config=n;var i=this.getBuffer(e.BUFFER_KEY),r=this.getBuffer(e.SENT_BUFFER_KEY);this._buffer=i.concat(r),this._buffer.length>e.MAX_BUFFER_SIZE&&(this._buffer.length=e.MAX_BUFFER_SIZE),this.setBuffer(e.SENT_BUFFER_KEY,[]),this.setBuffer(e.BUFFER_KEY,this._buffer)}return e.prototype.enqueue=function(t){this._buffer.length>=e.MAX_BUFFER_SIZE?this._bufferFullMessageSent||(this._logger.throwInternal(v.WARNING,_.SessionStorageBufferFull,"Maximum buffer size reached: "+this._buffer.length,!0),this._bufferFullMessageSent=!0):(this._buffer.push(t),this.setBuffer(e.BUFFER_KEY,this._buffer))},e.prototype.count=function(){return this._buffer.length},e.prototype.clear=function(){this._buffer.length=0,this.setBuffer(e.BUFFER_KEY,[]),this.setBuffer(e.SENT_BUFFER_KEY,[]),this._bufferFullMessageSent=!1},e.prototype.getItems=function(){return this._buffer.slice(0)},e.prototype.batchPayloads=function(e){return e&&e.length>0?this._config.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},e.prototype.markAsSent=function(t){this._buffer=this.removePayloadsFromBuffer(t,this._buffer),this.setBuffer(e.BUFFER_KEY,this._buffer);var n=this.getBuffer(e.SENT_BUFFER_KEY);n instanceof Array&&t instanceof Array&&((n=n.concat(t)).length>e.MAX_BUFFER_SIZE&&(this._logger.throwInternal(v.CRITICAL,_.SessionStorageBufferFull,"Sent buffer reached its maximum size: "+n.length,!0),n.length=e.MAX_BUFFER_SIZE),this.setBuffer(e.SENT_BUFFER_KEY,n))},e.prototype.clearSent=function(t){var n=this.getBuffer(e.SENT_BUFFER_KEY);n=this.removePayloadsFromBuffer(t,n),this.setBuffer(e.SENT_BUFFER_KEY,n)},e.prototype.removePayloadsFromBuffer=function(e,t){var n=[];for(var i in t){var r=!1;for(var a in e)if(e[a]===t[i]){r=!0;break}r||n.push(t[i])}return n},e.prototype.getBuffer=function(e){var t=e;try{t=this._config.namePrefix&&this._config.namePrefix()?this._config.namePrefix()+"_"+t:t;var n=ee.getSessionStorage(this._logger,t);if(n){var i=Object(o.e)().parse(n);if(i)return i}}catch(e){this._logger.throwInternal(v.CRITICAL,_.FailedToRestoreStorageBuffer," storage key: "+t+", "+ee.getExceptionName(e),{exception:ee.dump(e)})}return[]},e.prototype.setBuffer=function(e,t){var n=e;try{n=this._config.namePrefix&&this._config.namePrefix()?this._config.namePrefix()+"_"+n:n;var i=JSON.stringify(t);ee.setSessionStorage(this._logger,n,i)}catch(e){ee.setSessionStorage(this._logger,n,JSON.stringify([])),this._logger.throwInternal(v.WARNING,_.FailedToSetStorageBuffer," storage key: "+n+", "+ee.getExceptionName(e)+". Buffer cleared",{exception:ee.dump(e)})}},e.BUFFER_KEY="AI_buffer",e.SENT_BUFFER_KEY="AI_sentBuffer",e.MAX_BUFFER_SIZE=2e3,e}(),tt=function(){function e(){}return e.extractPropsAndMeasurements=function(e,t,n){if(!y.isNullOrUndefined(e))for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];y.isNumber(r)?n[i]=r:y.isString(r)?t[i]=r:Object(o.k)()&&(t[i]=Object(o.e)().stringify(r))}},e.createEnvelope=function(t,n,i,r){var a=new Pe(t,r,n);i[De]&&(a.sampleRate=i[De]),a.iKey=i.iKey;var o=i.iKey.replace(/-/g,"");return a.name=a.name.replace("{0}",o),e.extractPartAExtensions(i,a),i.tags||(i.tags=[]),a},e.extractPartAExtensions=function(t,n){if(n.tags||(n.tags={}),t.ext||(t.ext={}),t.tags||(t.tags=[]),t.ext.user){t.ext.user.authId&&(n.tags[qe.userAuthUserId]=t.ext.user.authId);var i=t.ext.user.id||t.ext.user.localId;i&&(n.tags[qe.userId]=i)}if(t.ext.app&&t.ext.app.sesId&&(n.tags[qe.sessionId]=t.ext.app.sesId),t.ext.device&&((t.ext.device.id||t.ext.device.localId)&&(n.tags[qe.deviceId]=t.ext.device.id||t.ext.device.localId),t.ext.device.deviceClass&&(n.tags[qe.deviceType]=t.ext.device.deviceClass),t.ext.device.ip&&(n.tags[qe.deviceIp]=t.ext.device.ip)),t.ext.web){var r=t.ext.web;r.browserLang&&(n.tags[qe.deviceLanguage]=r.browserLang),r.browserVer&&(n.tags[qe.deviceBrowserVersion]=r.browserVer),r.browser&&(n.tags[qe.deviceBrowser]=r.browser),n.data=n.data||{},n.data.baseData=n.data.baseData||{},n.data.baseData.properties=n.data.baseData.properties||{},r.domain&&(n.data.baseData.properties.domain=r.domain),r.isManual&&(n.data.baseData.properties.isManual=r.isManual.toString()),r.screenRes&&(n.data.baseData.properties.screenRes=r.screenRes),r.userConsent&&(n.data.baseData.properties.userConsent=r.userConsent.toString())}t.ext.device&&t.ext.device.model&&(n.tags[qe.deviceModel]=t.ext.device.model),t.ext.os&&t.ext.os.name&&(n.tags[qe.deviceOS]=t.ext.os.name),t.ext.device&&t.ext.device.deviceType&&(n.tags[qe.deviceType]=t.ext.device.deviceType),t.ext.trace&&(t.ext.trace.parentID&&(n.tags[qe.operationParentId]=t.ext.trace.parentID),t.ext.trace.name&&(n.tags[qe.operationName]=t.ext.trace.name),t.ext.trace.traceID&&(n.tags[qe.operationId]=t.ext.trace.traceID));for(var a={},o=function(e){var n=t.tags[e];y.arrForEach(y.objKeys(n),(function(e){a[e]=n[e]})),t.tags.splice(e,1)},s=t.tags.length-1;s>=0;s--)o(s);for(var c in t.tags)a[c]=t.tags[c];n.tags=Ze({},n.tags,a),n.tags[qe.internalSdkVersion]||(n.tags[qe.internalSdkVersion]="javascript:"+e.Version)},e.Version="2.4.4",e}(),nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qe(t,e),t.prototype.Create=function(e,t){this._logger=e,y.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(v.CRITICAL,_.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null.");var n=t.baseData.measurements||{},i=t.baseData.properties||{};tt.extractPropsAndMeasurements(t.data,i,n);var r=t.baseData;if(y.isNullOrUndefined(r))return e.warnToConsole("Invalid input for dependency data"),null;var a=r.id,o=r.target,s=r.name,c=r.duration,l=r.success,u=r.responseCode,p=r.type,d=r.correlationContext,f=r.properties&&r.properties[Ae]?r.properties[Ae]:"GET",h=new Me(e,a,o,s,c,l,u,f,p,d,i,n),g=new Oe(Me.dataType,h);return tt.createEnvelope(e,Me.envelopeType,t,g)},t.DependencyEnvelopeCreator=new t,t}(tt),it=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qe(t,e),t.prototype.Create=function(e,t){this._logger=e,y.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(v.CRITICAL,_.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null.");var n={},i={};t.baseType!==de.dataType&&(n.baseTypeSource=t.baseType),t.baseType===de.dataType?(n=t.baseData.properties||{},i=t.baseData.measurements||{}):t.baseData&&tt.extractPropsAndMeasurements(t.baseData,n,i),tt.extractPropsAndMeasurements(t.data,n,i);var r=t.baseData.name,a=new de(e,r,n,i),o=new Oe(de.dataType,a);return tt.createEnvelope(e,de.envelopeType,t,o)},t.EventEnvelopeCreator=new t,t}(tt),rt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qe(t,e),t.prototype.Create=function(e,t){this._logger=e,y.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(v.CRITICAL,_.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null.");var n=t.baseData,i=Te.CreateFromInterface(e,n),r=new Oe(Te.dataType,i);return tt.createEnvelope(e,Te.envelopeType,t,r)},t.ExceptionEnvelopeCreator=new t,t}(tt),at=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qe(t,e),t.prototype.Create=function(e,t){this._logger=e,y.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(v.CRITICAL,_.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null.");var n=t.baseData.properties||{},i=t.baseData.measurements||{};tt.extractPropsAndMeasurements(t.data,n,i);var r=t.baseData.name,a=t.baseData.average,o=t.baseData.sampleCount,s=t.baseData.min,c=t.baseData.max,l=new ve(e,r,a,o,s,c,n,i),u=new Oe(ve.dataType,l);return tt.createEnvelope(e,ve.envelopeType,t,u)},t.MetricEnvelopeCreator=new t,t}(tt),ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qe(t,e),t.prototype.Create=function(e,t){var n;this._logger=e,y.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(v.CRITICAL,_.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null."),y.isNullOrUndefined(t.baseData)||y.isNullOrUndefined(t.baseData.properties)||y.isNullOrUndefined(t.baseData.properties.duration)?y.isNullOrUndefined(t.data)||y.isNullOrUndefined(t.data.duration)||(n=t.data.duration,delete t.data.duration):(n=t.baseData.properties.duration,delete t.baseData.properties.duration);var i,r=t.baseData;t.ext&&t.ext.trace&&t.ext.trace.traceID&&(i=t.ext.trace.traceID);var a=r.id||i,o=r.name,s=r.uri,c=r.properties||{},l=r.measurements||{};if(y.isNullOrUndefined(r.refUri)||(c.refUri=r.refUri),y.isNullOrUndefined(r.pageType)||(c.pageType=r.pageType),y.isNullOrUndefined(r.isLoggedIn)||(c.isLoggedIn=r.isLoggedIn.toString()),!y.isNullOrUndefined(r.properties)){var u=r.properties;for(var p in u)u.hasOwnProperty(p)&&(c[p]=u[p])}tt.extractPropsAndMeasurements(t.data,c,l);var d=new Ie(e,o,s,n,c,l,a),f=new Oe(Ie.dataType,d);return tt.createEnvelope(e,Ie.envelopeType,t,f)},t.PageViewEnvelopeCreator=new t,t}(tt),st=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qe(t,e),t.prototype.Create=function(e,t){this._logger=e,y.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(v.CRITICAL,_.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null.");var n=t.baseData,i=n.name,r=n.uri||n.url,a=n.properties||{},o=n.measurements||{};tt.extractPropsAndMeasurements(t.data,a,o);var s=new xe(e,i,r,void 0,a,o,n),c=new Oe(xe.dataType,s);return tt.createEnvelope(e,xe.envelopeType,t,c)},t.PageViewPerformanceEnvelopeCreator=new t,t}(tt),ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qe(t,e),t.prototype.Create=function(e,t){this._logger=e,y.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(v.CRITICAL,_.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null.");var n=t.baseData.message,i=t.baseData.severityLevel,r=t.baseData.properties||{},a=t.baseData.measurements||{};tt.extractPropsAndMeasurements(t.data,r,a);var o=new fe(e,n,i,r,a),s=new Oe(fe.dataType,o);return tt.createEnvelope(e,fe.envelopeType,t,s)},t.TraceEnvelopeCreator=new t,t}(tt),lt=function(){function e(e){this._logger=e}return e.prototype.serialize=function(e){var t=this._serializeObject(e,"root");try{return Object(o.e)().stringify(t)}catch(e){this._logger.throwInternal(v.CRITICAL,_.CannotSerializeObject,e&&y.isFunction(e.toString)?e.toString():"Error serializing object",null,!0)}},e.prototype._serializeObject=function(e,t){var n={};if(!e)return this._logger.throwInternal(v.CRITICAL,_.CannotSerializeObject,"cannot serialize object because it is null or undefined",{name:t},!0),n;if(e.__aiCircularRefCheck)return this._logger.throwInternal(v.WARNING,_.CircularReferenceDetected,"Circular reference detected while serializing object",{name:t},!0),n;if(!e.aiDataContract){if("measurements"===t)n=this._serializeStringMap(e,"number",t);else if("properties"===t)n=this._serializeStringMap(e,"string",t);else if("tags"===t)n=this._serializeStringMap(e,"string",t);else if(ee.isArray(e))n=this._serializeArray(e,t);else{this._logger.throwInternal(v.WARNING,_.CannotSerializeObjectNonSerializable,"Attempting to serialize an object which does not implement ISerializable",{name:t},!0);try{Object(o.e)().stringify(e),n=e}catch(e){this._logger.throwInternal(v.CRITICAL,_.CannotSerializeObject,e&&y.isFunction(e.toString)?e.toString():"Error serializing object",null,!0)}}return n}for(var i in e.__aiCircularRefCheck=!0,e.aiDataContract){var r=e.aiDataContract[i],a=y.isFunction(r)?r()&W.Required:r&W.Required,s=y.isFunction(r)?r()&W.Hidden:r&W.Hidden,c=r&W.Array,l=void 0!==e[i],u=y.isObject(e[i])&&null!==e[i];if(!a||l||c){if(!s){var p=void 0;void 0!==(p=u?c?this._serializeArray(e[i],i):this._serializeObject(e[i],i):e[i])&&(n[i]=p)}}else this._logger.throwInternal(v.CRITICAL,_.MissingRequiredFieldSpecification,"Missing required field specification. The field is required but not present on source",{field:i,name:t})}return delete e.__aiCircularRefCheck,n},e.prototype._serializeArray=function(e,t){var n;if(e)if(ee.isArray(e)){n=[];for(var i=0;i<e.length;i++){var r=e[i],a=this._serializeObject(r,t+"["+i+"]");n.push(a)}}else this._logger.throwInternal(v.CRITICAL,_.ItemNotInArray,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:t},!0);return n},e.prototype._serializeStringMap=function(e,t,n){var i;if(e)for(var r in i={},e){var a=e[r];if("string"===t)void 0===a?i[r]="undefined":null===a?i[r]="null":a.toString?i[r]=a.toString():i[r]="invalid field: toString() is not defined.";else if("number"===t)if(void 0===a)i[r]="undefined";else if(null===a)i[r]="null";else{var o=parseFloat(a);isNaN(o)?i[r]="NaN":i[r]=o}else i[r]="invalid field: "+n+" is of unknown type.",this._logger.throwInternal(v.CRITICAL,i[r],null,!0)}return i},e}(),ut=function(){function e(){this._onlineStatus=!0;var e=Object(o.i)(),t=Object(o.a)(),n=!1;try{if(e&&x.Attach(e,"online",this._setOnline.bind(this))&&(x.Attach(e,"offline",this._setOffline.bind(this)),n=!0),t){var i=t.body||t;y.isUndefined(i.ononline)||(i.ononline=this._setOnline.bind(this),i.onoffline=this._setOffline.bind(this),n=!0)}}catch(e){n=!1}this.isListening=n}return e.prototype.isOnline=function(){var e=Object(o.g)();return this.isListening?this._onlineStatus:!(e&&!y.isNullOrUndefined(e.onLine))||e.onLine},e.prototype.isOffline=function(){return!this.isOnline()},e.prototype._setOnline=function(){this._onlineStatus=!0},e.prototype._setOffline=function(){this._onlineStatus=!1},e.Offline=new e,e}().Offline,pt=function(){function e(){}return e.prototype.getHashCodeScore=function(t){return 100*(this.getHashCode(t)/e.INT_MAX_VALUE)},e.prototype.getHashCode=function(t){if(""===t)return 0;for(;t.length<e.MIN_INPUT_LENGTH;)t=t.concat(t);for(var n=5381,i=0;i<t.length;++i)n=(n<<5)+n+t.charCodeAt(i),n&=n;return Math.abs(n)},e.INT_MAX_VALUE=2147483647,e.MIN_INPUT_LENGTH=8,e}(),dt=function(){function e(){this.hashCodeGeneragor=new pt,this.keys=new Fe}return e.prototype.getSamplingScore=function(e){return e.tags&&e.tags[this.keys.userId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.userId]):e.ext&&e.ext.user&&e.ext.user.id?this.hashCodeGeneragor.getHashCodeScore(e.ext.user.id):e.tags&&e.tags[this.keys.operationId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.operationId]):e.ext&&e.ext.telemetryTrace&&e.ext.telemetryTrace.traceID?this.hashCodeGeneragor.getHashCodeScore(e.ext.telemetryTrace.traceID):100*Math.random()},e}(),ft=function(){function e(e,t){this.INT_MAX_VALUE=2147483647,this._logger=y.isNullOrUndefined(t)?new T:t,(e>100||e<0)&&(this._logger.throwInternal(v.WARNING,_.SampleRateOutOfRange,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),this.sampleRate=100),this.sampleRate=e,this.samplingScoreGenerator=new dt}return e.prototype.isSampledIn=function(e){var t=this.sampleRate;return null==t||t>=100||(e.baseType===ve.dataType||this.samplingScoreGenerator.getSamplingScore(e)<t)},e}(),ht=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=1001,t.identifier=ze,t._XMLHttpRequestSupported=!1,t}return Qe(t,e),t.constructEnvelope=function(e,t,n){var i;switch((i=t===e.iKey||y.isNullOrUndefined(t)?e:Ze({},e,{iKey:t})).baseType){case de.dataType:return it.EventEnvelopeCreator.Create(n,i);case fe.dataType:return ct.TraceEnvelopeCreator.Create(n,i);case Ie.dataType:return ot.PageViewEnvelopeCreator.Create(n,i);case xe.dataType:return st.PageViewPerformanceEnvelopeCreator.Create(n,i);case Te.dataType:return rt.ExceptionEnvelopeCreator.Create(n,i);case ve.dataType:return at.MetricEnvelopeCreator.Create(n,i);case Me.dataType:return nt.DependencyEnvelopeCreator.Create(n,i);default:return it.EventEnvelopeCreator.Create(n,i)}},t._getDefaultAppInsightsChannelConfig=function(){return{endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){},namePrefix:function(){},samplingPercentage:function(){return 100}}},t._getEmptyAppInsightsChannelConfig=function(){return{endpointUrl:void 0,emitLineDelimitedJson:void 0,maxBatchInterval:void 0,maxBatchSizeInBytes:void 0,disableTelemetry:void 0,enableSessionStorageBuffer:void 0,isRetryDisabled:void 0,isBeaconApiDisabled:void 0,onunloadDisableBeacon:void 0,instrumentationKey:void 0,namePrefix:void 0,samplingPercentage:void 0}},t.prototype.pause=function(){throw new Error("Method not implemented.")},t.prototype.resume=function(){throw new Error("Method not implemented.")},t.prototype.flush=function(){try{this.triggerSend()}catch(e){this.diagLog().throwInternal(v.CRITICAL,_.FlushFailed,"flush failed, telemetry will not be collected: "+ee.getExceptionName(e),{exception:ee.dump(e)})}},t.prototype.onunloadFlush=function(){if(!1!==this._senderConfig.onunloadDisableBeacon()&&!1!==this._senderConfig.isBeaconApiDisabled()||!ee.IsBeaconApiSupported())this.flush();else try{this.triggerSend(!0,this._beaconSender)}catch(e){this.diagLog().throwInternal(v.CRITICAL,_.FailedToSendQueuedTelemetry,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+ee.getExceptionName(e),{exception:ee.dump(e)})}},t.prototype.teardown=function(){throw new Error("Method not implemented.")},t.prototype.initialize=function(n,i,r,a){e.prototype.initialize.call(this,n,i,r,a);var o=this._getTelCtx(),s=this.identifier;this._serializer=new lt(i.logger),this._consecutiveErrors=0,this._retryAt=null,this._lastSend=0,this._sender=null;var c=t._getDefaultAppInsightsChannelConfig();this._senderConfig=t._getEmptyAppInsightsChannelConfig();var l=function(e){u._senderConfig[e]=function(){return o.getConfig(s,e,c[e]())}},u=this;for(var p in c)l(p);(this._buffer=this._senderConfig.enableSessionStorageBuffer&&ee.canUseSessionStorage()?new et(this.diagLog(),this._senderConfig):new $e(this._senderConfig),this._sample=new ft(this._senderConfig.samplingPercentage(),this.diagLog()),!this._senderConfig.isBeaconApiDisabled()&&ee.IsBeaconApiSupported())?this._sender=this._beaconSender:y.isUndefined(XMLHttpRequest)||("withCredentials"in new XMLHttpRequest?(this._sender=this._xhrSender,this._XMLHttpRequestSupported=!0):y.isUndefined(XDomainRequest)||(this._sender=this._xdrSender))},t.prototype.processTelemetry=function(e,n){n=this._getTelCtx(n);try{if(this._senderConfig.disableTelemetry())return;if(!e)return void n.diagLog().throwInternal(v.CRITICAL,_.CannotSendEmptyTelemetry,"Cannot send empty telemetry");if(e.baseData&&!e.baseType)return void n.diagLog().throwInternal(v.CRITICAL,_.InvalidEvent,"Cannot send telemetry without baseData and baseType");if(e.baseType||(e.baseType="EventData"),!this._sender)return void n.diagLog().throwInternal(v.CRITICAL,_.SenderNotInitialized,"Sender was not initialized");if(!this._isSampledIn(e))return void n.diagLog().throwInternal(v.WARNING,_.TelemetrySampledAndNotSent,"Telemetry item was sampled out and not sent",{SampleRate:this._sample.sampleRate});e[De]=this._sample.sampleRate;var i=t.constructEnvelope(e,this._senderConfig.instrumentationKey(),n.diagLog());if(!i)return void n.diagLog().throwInternal(v.CRITICAL,_.CreateEnvelopeError,"Unable to create an AppInsights envelope");var r=!1;if(e.tags&&e.tags[Ee]&&(y.arrForEach(e.tags[Ee],(function(e){try{e&&!1===e(i)&&(r=!0,n.diagLog().warnToConsole("Telemetry processor check returns false"))}catch(e){n.diagLog().throwInternal(v.CRITICAL,_.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+ee.getExceptionName(e),{exception:ee.dump(e)},!0)}})),delete e.tags[Ee]),r)return;var a=this._serializer.serialize(i),o=this._buffer.getItems(),s=this._buffer.batchPayloads(o);s&&s.length+a.length>this._senderConfig.maxBatchSizeInBytes()&&this.triggerSend(),this._buffer.enqueue(a),this._setupTimer()}catch(e){n.diagLog().throwInternal(v.WARNING,_.FailedAddingTelemetryToBuffer,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+ee.getExceptionName(e),{exception:ee.dump(e)})}this.processNext(e,n)},t.prototype._xhrReadyStateChange=function(e,t,n){if(4===e.readyState){var i=null;if(this._appId||(i=this._parseResponse(e.responseText||e.response))&&i.appId&&(this._appId=i.appId),(e.status<200||e.status>=300)&&0!==e.status)!this._senderConfig.isRetryDisabled()&&this._isRetriable(e.status)?(this._resendPayload(t),this.diagLog().throwInternal(v.WARNING,_.TransmissionFailed,". Response code "+e.status+". Will retry to send "+t.length+" items.")):this._onError(t,this._formatErrorMessageXhr(e));else if(ut.isOffline()){if(!this._senderConfig.isRetryDisabled()){this._resendPayload(t,10),this.diagLog().throwInternal(v.WARNING,_.TransmissionFailed,". Offline - Response Code: "+e.status+". Offline status: "+ut.isOffline()+". Will retry to send "+t.length+" items.")}}else 206===e.status?(i||(i=this._parseResponse(e.responseText||e.response)),i&&!this._senderConfig.isRetryDisabled()?this._onPartialSuccess(t,i):this._onError(t,this._formatErrorMessageXhr(e))):(this._consecutiveErrors=0,this._onSuccess(t,n))}},t.prototype.triggerSend=function(e,t){void 0===e&&(e=!0);try{if(this._senderConfig.disableTelemetry())this._buffer.clear();else{if(this._buffer.count()>0){var n=this._buffer.getItems();t?t.call(this,n,e):this._sender(n,e)}this._lastSend=+new Date}clearTimeout(this._timeoutHandle),this._timeoutHandle=null,this._retryAt=null}catch(e){(!ee.getIEVersion()||ee.getIEVersion()>9)&&this.diagLog().throwInternal(v.CRITICAL,_.TransmissionFailed,"Telemetry transmission failed, some telemetry will be lost: "+ee.getExceptionName(e),{exception:ee.dump(e)})}},t.prototype._onError=function(e,t,n){this.diagLog().throwInternal(v.WARNING,_.OnError,"Failed to send telemetry.",{message:t}),this._buffer.clearSent(e)},t.prototype._onPartialSuccess=function(e,t){for(var n=[],i=[],r=0,a=t.errors.reverse();r<a.length;r++){var o=a[r],s=e.splice(o.index,1)[0];this._isRetriable(o.statusCode)?i.push(s):n.push(s)}e.length>0&&this._onSuccess(e,t.itemsAccepted),n.length>0&&this._onError(n,this._formatErrorMessageXhr(null,["partial success",t.itemsAccepted,"of",t.itemsReceived].join(" "))),i.length>0&&(this._resendPayload(i),this.diagLog().throwInternal(v.WARNING,_.TransmissionFailed,"Partial success. Delivered: "+e.length+", Failed: "+n.length+". Will retry to send "+i.length+" our of "+t.itemsReceived+" items"))},t.prototype._onSuccess=function(e,t){this._buffer.clearSent(e)},t.prototype._xdrOnLoad=function(e,t){if(!e||e.responseText+""!="200"&&""!==e.responseText){var n=this._parseResponse(e.responseText);n&&n.itemsReceived&&n.itemsReceived>n.itemsAccepted&&!this._senderConfig.isRetryDisabled()?this._onPartialSuccess(t,n):this._onError(t,this._formatErrorMessageXdr(e))}else this._consecutiveErrors=0,this._onSuccess(t,0)},t.prototype._isSampledIn=function(e){return this._sample.isSampledIn(e)},t.prototype._beaconSender=function(e,t){var n=this._senderConfig.endpointUrl(),i=this._buffer.batchPayloads(e),r=new Blob([i],{type:"text/plain;charset=UTF-8"});Object(o.g)().sendBeacon(n,r)?(this._buffer.markAsSent(e),this._onSuccess(e,e.length)):(this._xhrSender(e,!0),this.diagLog().throwInternal(v.WARNING,_.TransmissionFailed,". Failed to send telemetry with Beacon API, retried with xhrSender."))},t.prototype._xhrSender=function(e,t){var n=this,i=new XMLHttpRequest;i[we]=!0,i.open("POST",this._senderConfig.endpointUrl(),t),i.setRequestHeader("Content-type","application/json"),ee.isInternalApplicationInsightsEndpoint(this._senderConfig.endpointUrl())&&i.setRequestHeader(Y.sdkContextHeader,Y.sdkContextHeaderAppIdRequest),i.onreadystatechange=function(){return n._xhrReadyStateChange(i,e,e.length)},i.onerror=function(t){return n._onError(e,n._formatErrorMessageXhr(i),t)};var r=this._buffer.batchPayloads(e);i.send(r),this._buffer.markAsSent(e)},t.prototype._parseResponse=function(e){try{if(e&&""!==e){var t=Object(o.e)().parse(e);if(t&&t.itemsReceived&&t.itemsReceived>=t.itemsAccepted&&t.itemsReceived-t.itemsAccepted===t.errors.length)return t}}catch(t){this.diagLog().throwInternal(v.CRITICAL,_.InvalidBackendResponse,"Cannot parse the response. "+ee.getExceptionName(t),{response:e})}return null},t.prototype._resendPayload=function(e,t){if(void 0===t&&(t=1),e&&0!==e.length){this._buffer.clearSent(e),this._consecutiveErrors++;for(var n=0,i=e;n<i.length;n++){var r=i[n];this._buffer.enqueue(r)}this._setRetryTime(t),this._setupTimer()}},t.prototype._setRetryTime=function(e){var t;if(this._consecutiveErrors<=1)t=10;else{var n=(Math.pow(2,this._consecutiveErrors)-1)/2,i=Math.floor(Math.random()*n*10)+1;i*=e,t=Math.max(Math.min(i,3600),10)}var r=Date.now()+1e3*t;this._retryAt=r},t.prototype._setupTimer=function(){var e=this;if(!this._timeoutHandle){var t=this._retryAt?Math.max(0,this._retryAt-Date.now()):0,n=Math.max(this._senderConfig.maxBatchInterval(),t);this._timeoutHandle=setTimeout((function(){e.triggerSend()}),n)}},t.prototype._isRetriable=function(e){return 408===e||429===e||500===e||503===e},t.prototype._formatErrorMessageXhr=function(e,t){return e?"XMLHttpRequest,Status:"+e.status+",Response:"+e.responseText||!1:t},t.prototype._xdrSender=function(e,t){var n=this,i=Object(o.i)(),r=new XDomainRequest;r.onload=function(){return n._xdrOnLoad(r,e)},r.onerror=function(t){return n._onError(e,n._formatErrorMessageXdr(r),t)};var a=i&&i.location&&i.location.protocol||"";if(0!==this._senderConfig.endpointUrl().lastIndexOf(a,0))return this.diagLog().throwInternal(v.WARNING,_.TransmissionFailed,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void this._buffer.clear();var s=this._senderConfig.endpointUrl().replace(/^(https?:)/,"");r.open("POST",s);var c=this._buffer.batchPayloads(e);r.send(c),this._buffer.markAsSent(e)},t.prototype._formatErrorMessageXdr=function(e,t){return e?"XDomainRequest,Response:"+e.responseText||!1:t},t}(N);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var gt=function(e,t){return(gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var mt=function(){},vt=function(){function e(t,n){var i=this;y.isNullOrUndefined(n)?this._logger=new T:this._logger=n,t||(t={}),"function"!=typeof t.sessionExpirationMs&&(t.sessionExpirationMs=function(){return e.acquisitionSpan}),"function"!=typeof t.sessionRenewalMs&&(t.sessionRenewalMs=function(){return e.renewalSpan}),this.config=t,this._storageNamePrefix=function(){return i.config.namePrefix&&i.config.namePrefix()?e.cookieNameConst+i.config.namePrefix():e.cookieNameConst},this.automaticSession=new mt}return e.prototype.update=function(){this.automaticSession.id||this.initializeAutomaticSession();var t=re.Now(),n=0!==this.config.sessionExpirationMs()&&t-this.automaticSession.acquisitionDate>this.config.sessionExpirationMs(),i=0!==this.config.sessionExpirationMs()&&t-this.automaticSession.renewalDate>this.config.sessionRenewalMs();n||i?this.renew():(!this.cookieUpdatedTimestamp||t-this.cookieUpdatedTimestamp>e.cookieUpdateInterval)&&(this.automaticSession.renewalDate=t,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate))},e.prototype.backup=function(){this.setStorage(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate)},e.prototype.initializeAutomaticSession=function(){var e=ee.getCookie(this._logger,this._storageNamePrefix());if(e&&"function"==typeof e.split)this.initializeAutomaticSessionWithData(e);else{var t=ee.getStorage(this._logger,this._storageNamePrefix());t&&this.initializeAutomaticSessionWithData(t)}this.automaticSession.id||this.renew()},e.prototype.initializeAutomaticSessionWithData=function(e){var t=e.split("|");t.length>0&&(this.automaticSession.id=t[0]);try{if(t.length>1){var n=+t[1];this.automaticSession.acquisitionDate=+new Date(n),this.automaticSession.acquisitionDate=this.automaticSession.acquisitionDate>0?this.automaticSession.acquisitionDate:0}if(t.length>2){var i=+t[2];this.automaticSession.renewalDate=+new Date(i),this.automaticSession.renewalDate=this.automaticSession.renewalDate>0?this.automaticSession.renewalDate:0}}catch(e){this._logger.throwInternal(v.CRITICAL,_.ErrorParsingAISessionCookie,"Error parsing ai_session cookie, session will be reset: "+ee.getExceptionName(e),{exception:ee.dump(e)})}0===this.automaticSession.renewalDate&&this._logger.throwInternal(v.WARNING,_.SessionRenewalDateIsZero,"AI session renewal date is 0, session will be reset.")},e.prototype.renew=function(){var e=re.Now();this.automaticSession.id=ee.newId(),this.automaticSession.acquisitionDate=e,this.automaticSession.renewalDate=e,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate),ee.canUseLocalStorage()||this._logger.throwInternal(v.WARNING,_.BrowserDoesNotSupportLocalStorage,"Browser does not support local storage. Session durations will be inaccurate.")},e.prototype.setCookie=function(e,t,n){var i=t+this.config.sessionExpirationMs(),r=n+this.config.sessionRenewalMs(),a=new Date,o=[e,t,n];i<r?a.setTime(i):a.setTime(r);var s=this.config.cookieDomain?this.config.cookieDomain():null,c=0===this.config.sessionExpirationMs()?"0":a.toUTCString();ee.setCookie(this._logger,this._storageNamePrefix(),o.join("|")+";expires="+c,s),this.cookieUpdatedTimestamp=re.Now()},e.prototype.setStorage=function(e,t,n){ee.setStorage(this._logger,this._storageNamePrefix(),[e,t,n].join("|"))},e.acquisitionSpan=864e5,e.renewalSpan=18e5,e.cookieUpdateInterval=6e4,e.cookieNameConst="ai_session",e}(),yt=function(){},It=function(){this.id="browser",this.deviceClass="Browser"},xt=function(e){this.sdkVersion=(e.sdkExtension&&e.sdkExtension()?e.sdkExtension()+"_":"")+"javascript:2.4.4"},_t=function(){function e(t,n){this.isNewUser=!1,this._logger=n;var i=ee.getCookie(this._logger,e.userCookieName);if(i){this.isNewUser=!1;var r=i.split(e.cookieSeparator);r.length>0&&(this.id=r[0])}if(this.config=t,!this.id){this.id=ee.newId();var a=new Date,o=y.toISOString(a);this.accountAcquisitionDate=o,this.isNewUser=!0,a.setTime(a.getTime()+31536e6);var s=[this.id,o],c=this.config.cookieDomain?this.config.cookieDomain():void 0;ee.setCookie(this._logger,e.userCookieName,s.join(e.cookieSeparator)+";expires="+a.toUTCString(),c);var l=t.namePrefix&&t.namePrefix()?t.namePrefix()+"ai_session":"ai_session";ee.removeStorage(this._logger,l)}this.accountId=t.accountId?t.accountId():void 0;var u=ee.getCookie(this._logger,e.authUserCookieName);if(u){var p=(u=decodeURI(u)).split(e.cookieSeparator);p[0]&&(this.authenticatedId=p[0]),p.length>1&&p[1]&&(this.accountId=p[1])}}return e.prototype.setAuthenticatedUserContext=function(t,n,i){if(void 0===i&&(i=!1),!this.validateUserInput(t)||n&&!this.validateUserInput(n))this._logger.throwInternal(v.WARNING,_.SetAuthContextFailedAccountName,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0);else{this.authenticatedId=t;var r=this.authenticatedId;n&&(this.accountId=n,r=[this.authenticatedId,this.accountId].join(e.cookieSeparator)),i&&ee.setCookie(this._logger,e.authUserCookieName,encodeURI(r),this.config.cookieDomain())}},e.prototype.clearAuthenticatedUserContext=function(){this.authenticatedId=null,this.accountId=null,ee.deleteCookie(this._logger,e.authUserCookieName)},e.prototype.validateUserInput=function(e){return!("string"!=typeof e||!e||e.match(/,|;|=| |\|/))},e.cookieSeparator="|",e.userCookieName="ai_user",e.authUserCookieName="ai_authUser",e}(),bt=function(){},Tt=function(e,t,n){this.traceID=e||ee.generateW3CId(),this.parentID=t,this.name=n;var i=Object(o.f)();!n&&i&&i.pathname&&(this.name=i.pathname)},St=function(){function e(e,t){Object(o.l)()&&(this.sessionManager=new vt(t,e),this.application=new yt,this.device=new It,this.internal=new xt(t),this.location=new bt,this.user=new _t(t,e),this.telemetryTrace=new Tt,this.session=new mt),this.appId=function(){return null}}return e.prototype.applySessionContext=function(e,t){var n=this.session||this.sessionManager&&this.sessionManager.automaticSession;n&&"string"==typeof n.id&&(e.ext.app.sesId=n.id),this.session&&("string"==typeof this.session.id?e.ext.app.sesId=this.session.id:e.ext.app.sesId=this.sessionManager.automaticSession.id)},e.prototype.applyOperatingSystemContxt=function(e,t){this.os&&this.os.name&&(e.ext.os=this.os)},e.prototype.applyApplicationContext=function(e,t){this.application&&("string"==typeof this.application.ver&&(e.tags[qe.applicationVersion]=this.application.ver),"string"==typeof this.application.build&&(e.tags[qe.applicationBuild]=this.application.build))},e.prototype.applyDeviceContext=function(e,t){this.device&&("string"==typeof this.device.id&&(e.ext.device.localId=this.device.id),"string"==typeof this.device.ip&&(e.ext.device.ip=this.device.ip),"string"==typeof this.device.model&&(e.ext.device.model=this.device.model),"string"==typeof this.device.deviceClass&&(e.ext.device.deviceClass=this.device.deviceClass))},e.prototype.applyInternalContext=function(e,t){this.internal&&("string"==typeof this.internal.agentVersion&&(e.tags[qe.internalAgentVersion]=this.internal.agentVersion),"string"==typeof this.internal.sdkVersion&&(e.tags[qe.internalSdkVersion]=this.internal.sdkVersion))},e.prototype.applyLocationContext=function(e,t){this.location&&"string"==typeof this.location.ip&&(e.tags[qe.locationIp]=this.location.ip)},e.prototype.applyOperationContext=function(e,t){if(this.telemetryTrace){var n=e.ext.trace||{traceID:void 0,parentID:void 0};"string"==typeof this.telemetryTrace.traceID&&(n.traceID=this.telemetryTrace.traceID),"string"==typeof this.telemetryTrace.name&&(n.name=this.telemetryTrace.name),"string"==typeof this.telemetryTrace.parentID&&(n.parentID=this.telemetryTrace.parentID),e.ext.trace=n}},e.prototype.applyWebContext=function(e,t){this.web&&(e.ext.web=e.ext.web||{},e.ext.web=this.web)},e.prototype.applyUserContext=function(e,t){if(this.user){if(e.tags||(e.tags=[]),"string"==typeof this.user.accountId){e.tags[qe.userAccountId]=this.user.accountId}"string"==typeof this.user.id&&(e.ext.user.id=this.user.id),"string"==typeof this.user.authenticatedId&&(e.ext.user.authId=this.user.authenticatedId)}},e.prototype.cleanUp=function(e,t){e.ext[je.DeviceExt]&&0===y.objKeys(e.ext[je.DeviceExt]).length&&delete e.ext[je.DeviceExt],e.ext[je.UserExt]&&0===y.objKeys(e.ext[je.UserExt]).length&&delete e.ext[je.UserExt],e.ext[je.WebExt]&&0===y.objKeys(e.ext[je.WebExt]).length&&delete e.ext[je.WebExt],e.ext[je.OSExt]&&0===y.objKeys(e.ext[je.OSExt]).length&&delete e.ext[je.OSExt],e.ext[je.AppExt]&&0===y.objKeys(e.ext[je.AppExt]).length&&delete e.ext[je.AppExt],e.ext[je.TraceExt]&&0===y.objKeys(e.ext[je.TraceExt]).length&&delete e.ext[je.TraceExt]},e}(),Ct=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=110,t.identifier=He,t}return function(e,t){function n(){this.constructor=e}gt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.getDefaultConfig=function(){return{instrumentationKey:function(){},accountId:function(){return null},sessionRenewalMs:function(){return 18e5},samplingPercentage:function(){return 100},sessionExpirationMs:function(){return 864e5},cookieDomain:function(){return null},sdkExtension:function(){return null},isBrowserLinkTrackingEnabled:function(){return!1},appId:function(){return null},namePrefix:function(){}}},t.prototype.initialize=function(n,i,r,a){var o=this;e.prototype.initialize.call(this,n,i,r,a);var s=this._getTelCtx(),c=this.identifier,l=t.getDefaultConfig();this._extensionConfig=this._extensionConfig||t.getDefaultConfig();var u=function(e){p._extensionConfig[e]=function(){return s.getConfig(c,e,l[e]())}},p=this;for(var d in l)u(d);this.context=new St(i.logger,this._extensionConfig),this._breezeChannel=ee.getExtension(r,ze),this.context.appId=function(){return o._breezeChannel?o._breezeChannel._appId:null}},t.prototype.processTelemetry=function(e,t){if(y.isNullOrUndefined(e));else{if(t=this._getTelCtx(t),e.name===Ie.envelopeType&&t.diagLog().resetInternalMessageCount(),this.context.session&&"string"!=typeof this.context.session.id&&this.context.sessionManager.update(),this._processTelemetryInternal(e,t),this.context&&this.context.user&&this.context.user.isNewUser){this.context.user.isNewUser=!1;var n=new b(_.SendBrowserInfoOnUserInit,(Object(o.g)()||{}).userAgent||"");t.diagLog().logInternalMessage(v.CRITICAL,n)}this.processNext(e,t)}},t.prototype._processTelemetryInternal=function(e,t){e.tags||(e.tags=[]),e.ext||(e.ext={});var n=e.ext;n[je.DeviceExt]=n[je.DeviceExt]||{},n[je.WebExt]=n[je.WebExt]||{},n[je.UserExt]=n[je.UserExt]||{},n[je.OSExt]=n[je.OSExt]||{},n[je.AppExt]=n[je.AppExt]||{},n[je.TraceExt]=n[je.TraceExt]||{};var i=this.context;i.applySessionContext(e,t),i.applyApplicationContext(e,t),i.applyDeviceContext(e,t),i.applyOperationContext(e,t),i.applyUserContext(e,t),i.applyOperatingSystemContxt(e,t),i.applyWebContext(e,t),i.applyLocationContext(e,t),i.applyInternalContext(e,t),i.cleanUp(e,t)},t}(N);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var wt=function(e,t){return(wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var Dt=function(){this.openDone=!1,this.setRequestHeaderDone=!1,this.sendDone=!1,this.abortDone=!1,this.onreadystatechangeCallbackAttached=!1},Et=function(){function e(e,t,n){this.completed=!1,this.requestHeadersSize=null,this.requestHeaders=null,this.ttfb=null,this.responseReceivingDuration=null,this.callbackDuration=null,this.ajaxTotalDuration=null,this.aborted=null,this.pageUrl=null,this.requestUrl=null,this.requestSize=0,this.method=null,this.status=null,this.requestSentTime=null,this.responseStartedTime=null,this.responseFinishedTime=null,this.callbackFinishedTime=null,this.endTime=null,this.originalOnreadystatechage=null,this.xhrMonitoringState=new Dt,this.clientFailure=0,this.CalculateMetrics=function(){this.ajaxTotalDuration=Math.round(1e3*re.GetDuration(this.requestSentTime,this.responseFinishedTime))/1e3},this.traceID=e,this.spanID=t,this._logger=n}return e.prototype.getAbsoluteUrl=function(){return this.requestUrl?te.getAbsoluteUrl(this.requestUrl):null},e.prototype.getPathName=function(){return this.requestUrl?J.sanitizeUrl(this._logger,te.getCompleteUrl(this.method,this.requestUrl)):null},e}(),At=function(){function e(t,n){this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&e.isValidTraceId(t)?this.traceId=t:this.traceId=ee.generateW3CId(),n&&e.isValidSpanId(n)?this.spanId=n:this.spanId=ee.generateW3CId().substr(0,16)}return e.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},e.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}();function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var kt=y.isNullOrUndefined,Rt=function(e){function t(){var n=e.call(this)||this;n.identifier=t.identifier,n.priority=120,n._config=t.getEmptyConfig(),n._trackAjaxAttempts=0;var i=Object(o.f)();return n.currentWindowHost=i&&i.host&&i.host.toLowerCase(),n.initialized=!1,n._fetchInitialized=!1,n}return function(e,t){function n(){this.constructor=e}wt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.getDefaultConfig=function(){return{maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!0,disableCorrelationHeaders:!1,distributedTracingMode:X.AI,correlationHeaderExcludedDomains:["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],correlationHeaderDomains:void 0,appId:void 0,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1,enableAjaxErrorStatusText:!1}},t.getEmptyConfig=function(){return{maxAjaxCallsPerView:void 0,disableAjaxTracking:void 0,disableFetchTracking:void 0,disableCorrelationHeaders:void 0,distributedTracingMode:void 0,correlationHeaderExcludedDomains:void 0,appId:void 0,enableCorsCorrelation:void 0,correlationHeaderDomains:void 0,enableRequestHeaderTracking:void 0,enableResponseHeaderTracking:void 0,enableAjaxErrorStatusText:void 0}},t.getFailedAjaxDiagnosticsMessage=function(e){var t="";try{kt(e)||kt(e.ajaxData)||kt(e.ajaxData.requestUrl)||(t+="(url: '"+e.ajaxData.requestUrl+"')")}catch(e){}return t},t.prototype.trackDependencyData=function(e,t){this.trackDependencyDataInternal(e,t)},t.prototype.processTelemetry=function(e,t){this.processNext(e,t)},t.prototype.includeCorrelationHeaders=function(e,t,n,i){if(t){if(ne.canIncludeCorrelationHeader(this._config,e.getAbsoluteUrl(),this.currentWindowHost)){if(n||(n={}),n.headers=new Headers(n.headers||t instanceof Request&&t.headers||{}),this._isUsingAIHeaders){var r="|"+e.traceID+"."+e.spanID;n.headers.set(Y.requestIdHeader,r),this._config.enableRequestHeaderTracking&&(e.requestHeaders[Y.requestIdHeader]=r)}if((o=this._config.appId||this._context&&this._context.appId())&&(n.headers.set(Y.requestContextHeader,Y.requestContextAppIdFormat+o),this._config.enableRequestHeaderTracking&&(e.requestHeaders[Y.requestContextHeader]=Y.requestContextAppIdFormat+o)),this._isUsingW3CHeaders){var a=new At(e.traceID,e.spanID);n.headers.set(Y.traceParentHeader,a.toString()),this._config.enableRequestHeaderTracking&&(e.requestHeaders[Y.traceParentHeader]=a.toString())}return n}return n}if(i){if(ne.canIncludeCorrelationHeader(this._config,i.ajaxData.getAbsoluteUrl(),this.currentWindowHost)){if(this._isUsingAIHeaders){r="|"+i.ajaxData.traceID+"."+i.ajaxData.spanID;i.setRequestHeader(Y.requestIdHeader,r),this._config.enableRequestHeaderTracking&&(i.ajaxData.requestHeaders[Y.requestIdHeader]=r)}var o;if((o=this._config.appId||this._context&&this._context.appId())&&(i.setRequestHeader(Y.requestContextHeader,Y.requestContextAppIdFormat+o),this._config.enableRequestHeaderTracking&&(i.ajaxData.requestHeaders[Y.requestContextHeader]=Y.requestContextAppIdFormat+o)),this._isUsingW3CHeaders){a=new At(i.ajaxData.traceID,i.ajaxData.spanID);i.setRequestHeader(Y.traceParentHeader,a.toString()),this._config.enableRequestHeaderTracking&&(i.ajaxData.requestHeaders[Y.traceParentHeader]=a.toString())}}return i}},t.prototype.initialize=function(n,i,r,a){e.prototype.initialize.call(this,n,i,r,a);var o=this._getTelCtx();if(!this.initialized&&!this._fetchInitialized){var s=t.getDefaultConfig();for(var c in s)this._config[c]=o.getConfig(t.identifier,c,s[c]);if(this._isUsingAIHeaders=this._config.distributedTracingMode===X.AI||this._config.distributedTracingMode===X.AI_AND_W3C,this._isUsingW3CHeaders=this._config.distributedTracingMode===X.AI_AND_W3C||this._config.distributedTracingMode===X.W3C,!1===this._config.disableAjaxTracking&&this.instrumentXhr(),!1===this._config.disableFetchTracking&&this.instrumentFetch(),r.length>0&&r){for(var l=void 0,u=0;!l&&u<r.length;)r[u]&&r[u].identifier===He&&(l=r[u]),u++;l&&(this._context=l.context)}}},t.prototype.trackDependencyDataInternal=function(e,t,n){if(-1===this._config.maxAjaxCallsPerView||this._trackAjaxAttempts<this._config.maxAjaxCallsPerView){var i=ae.create(e,Me.dataType,Me.envelopeType,this.diagLog(),t,n);this.core.track(i)}else this._trackAjaxAttempts===this._config.maxAjaxCallsPerView&&this.diagLog().throwInternal(v.CRITICAL,_.MaxAjaxPerPVExceeded,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0);++this._trackAjaxAttempts},t.prototype.instrumentFetch=function(){var e=this;if(e.supportsFetch()&&!e._fetchInitialized){var t=Object(o.b)(),n=t.fetch,i=e;t.fetch=function(t,r){var a;if(i.isFetchInstrumented(t)&&i.isMonitoredInstance(void 0,void 0,t,r))try{a=i.createFetchRecord(t,r),r=i.includeCorrelationHeaders(a,t,r)}catch(n){i.diagLog().throwInternal(v.CRITICAL,_.FailedMonitorAjaxOpen,"Failed to monitor Window.fetch, monitoring data for this fetch call may be incorrect.",{ajaxDiagnosticsMessage:e.getFailedFetchDiagnosticsMessage(t),exception:ee.dump(n)})}return n(t,r).then((function(e){return i.onFetchComplete(e,a),e})).catch((function(e){throw i.onFetchFailed(t,a,e),e}))},e._fetchInitialized=!0}},t.prototype.instrumentXhr=function(){this.supportsAjaxMonitoring()&&!this.initialized&&(this.instrumentOpen(),this.instrumentSend(),this.instrumentAbort(),this.instrumentSetRequestHeader(),this.initialized=!0)},t.prototype.isMonitoredInstance=function(e,t,n,i){var r=!1,a=!0,o=!1;return void 0!==n?(o=this._fetchInitialized,r="object"===Nt(n)&&!0===n[we]||!!i&&!0===i[we]):void 0!==e&&(o=this.initialized,r=!0===e[we],a=!0===t||!kt(e.ajaxData)),o&&a&&!r},t.prototype.supportsAjaxMonitoring=function(){var e=!0;("undefined"==typeof XMLHttpRequest||kt(XMLHttpRequest)||kt(XMLHttpRequest.prototype)||kt(XMLHttpRequest.prototype.open)||kt(XMLHttpRequest.prototype.send)||kt(XMLHttpRequest.prototype.abort))&&(e=!1);try{" a ".trim()}catch(t){e=!1}return e},t.prototype.instrumentOpen=function(){var e=XMLHttpRequest.prototype.open,n=this;XMLHttpRequest.prototype.open=function(i,r,a){var o=this;try{!n.isMonitoredInstance(o,!0)||o.ajaxData&&o.ajaxData.xhrMonitoringState.openDone||n.openHandler(o,i,r,a)}catch(e){n.diagLog().throwInternal(v.CRITICAL,_.FailedMonitorAjaxOpen,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:t.getFailedAjaxDiagnosticsMessage(o),exception:ee.dump(e)})}return e.apply(o,arguments)}},t.prototype.openHandler=function(e,t,n,i){var r=this._context&&this._context.telemetryTrace&&this._context.telemetryTrace.traceID||ee.generateW3CId(),a=ee.generateW3CId().substr(0,16),o=new Et(r,a,this.diagLog());o.method=t,o.requestUrl=n,o.xhrMonitoringState.openDone=!0,o.requestHeaders={},e.ajaxData=o,this.attachToOnReadyStateChange(e)},t.prototype.instrumentSend=function(){var e=XMLHttpRequest.prototype.send,n=this;XMLHttpRequest.prototype.send=function(i){var r=this;try{n.isMonitoredInstance(r)&&!r.ajaxData.xhrMonitoringState.sendDone&&n.sendHandler(r,i)}catch(e){n.diagLog().throwInternal(v.CRITICAL,_.FailedMonitorAjaxSend,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:t.getFailedAjaxDiagnosticsMessage(r),exception:ee.dump(e)})}return e.apply(r,arguments)}},t.prototype.sendHandler=function(e,t){e.ajaxData.requestSentTime=re.Now(),(e=this.includeCorrelationHeaders(e.ajaxData,void 0,void 0,e)).ajaxData.xhrMonitoringState.sendDone=!0},t.prototype.instrumentAbort=function(){var e=XMLHttpRequest.prototype.abort,n=this;XMLHttpRequest.prototype.abort=function(){var i=this;try{n.isMonitoredInstance(i)&&!i.ajaxData.xhrMonitoringState.abortDone&&(i.ajaxData.aborted=1,i.ajaxData.xhrMonitoringState.abortDone=!0)}catch(e){n.diagLog().throwInternal(v.CRITICAL,_.FailedMonitorAjaxAbort,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:t.getFailedAjaxDiagnosticsMessage(i),exception:ee.dump(e)})}return e.apply(i,arguments)}},t.prototype.instrumentSetRequestHeader=function(){if(this._config.enableRequestHeaderTracking){var e=XMLHttpRequest.prototype.setRequestHeader,n=this;XMLHttpRequest.prototype.setRequestHeader=function(i,r){var a=this;try{n.isMonitoredInstance(a)&&(a.ajaxData.requestHeaders[i]=r)}catch(e){n.diagLog().throwInternal(v.CRITICAL,_.FailedMonitorAjaxSetRequestHeader,"Failed to monitor XMLHttpRequest.setRequestHeader, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:t.getFailedAjaxDiagnosticsMessage(a),exception:ee.dump(e)})}return e.apply(a,arguments)}}},t.prototype.attachToOnReadyStateChange=function(e){var n=this;e.ajaxData.xhrMonitoringState.onreadystatechangeCallbackAttached=x.Attach(e,"readystatechange",(function(){try{n.isMonitoredInstance(e)&&4===e.readyState&&n.onAjaxComplete(e)}catch(r){var i=ee.dump(r);i&&-1!==i.toLowerCase().indexOf("c00c023f")||n.diagLog().throwInternal(v.CRITICAL,_.FailedMonitorAjaxRSC,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:t.getFailedAjaxDiagnosticsMessage(e),exception:ee.dump(r)})}}))},t.prototype.onAjaxComplete=function(e){if(e.ajaxData.responseFinishedTime=re.Now(),e.ajaxData.status=e.status,e.ajaxData.CalculateMetrics(),e.ajaxData.ajaxTotalDuration<0)this.diagLog().throwInternal(v.WARNING,_.FailedMonitorAjaxDur,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",{ajaxDiagnosticsMessage:t.getFailedAjaxDiagnosticsMessage(e),requestSentTime:e.ajaxData.requestSentTime,responseFinishedTime:e.ajaxData.responseFinishedTime});else{var n={id:"|"+e.ajaxData.traceID+"."+e.ajaxData.spanID,target:e.ajaxData.getAbsoluteUrl(),name:e.ajaxData.getPathName(),type:"Ajax",duration:e.ajaxData.ajaxTotalDuration,success:+e.ajaxData.status>=200&&+e.ajaxData.status<400,responseCode:+e.ajaxData.status,method:e.ajaxData.method},i=this.getAjaxCorrelationContext(e);if(i&&(n.correlationContext=i),this._config.enableRequestHeaderTracking&&y.objKeys(e.ajaxData.requestHeaders).length>0&&(n.properties=n.properties||{},n.properties.requestHeaders={},n.properties.requestHeaders=e.ajaxData.requestHeaders),this._config.enableResponseHeaderTracking){var r=e.getAllResponseHeaders();if(r){var a=r.trim().split(/[\r\n]+/),o={};y.arrForEach(a,(function(e){var t=e.split(": "),n=t.shift(),i=t.join(": ");o[n]=i})),y.objKeys(o).length>0&&(n.properties=n.properties||{},n.properties.responseHeaders={},n.properties.responseHeaders=o)}}this._config.enableAjaxErrorStatusText&&e.status>=400&&(n.properties=n.properties||{},n.properties.responseText=e.statusText+" - "+e.responseText),this.trackDependencyDataInternal(n),e.ajaxData=null}},t.prototype.getAjaxCorrelationContext=function(e){try{var n=e.getAllResponseHeaders();if(null!==n)if(-1!==n.toLowerCase().indexOf(Y.requestContextHeaderLowerCase)){var i=e.getResponseHeader(Y.requestContextHeader);return ne.getCorrelationContext(i)}}catch(n){this.diagLog().throwInternal(v.WARNING,_.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{ajaxDiagnosticsMessage:t.getFailedAjaxDiagnosticsMessage(e),exception:ee.dump(n)})}},t.prototype.isFetchInstrumented=function(e){return this._fetchInitialized&&!0!==e[we]},t.prototype.supportsFetch=function(){var e=!0,t=Object(o.b)();return(!t||kt(t.Request)||kt(t.Request.prototype)||kt(t.fetch))&&(e=!1),e},t.prototype.createFetchRecord=function(e,t){var n=this._context&&this._context.telemetryTrace&&this._context.telemetryTrace.traceID||ee.generateW3CId(),i=ee.generateW3CId().substr(0,16),r=new Et(n,i,this.diagLog());return r.requestSentTime=re.Now(),e instanceof Request?r.requestUrl=e?e.url:"":r.requestUrl=e,t&&t.method?r.method=t.method:e&&e instanceof Request?r.method=e.method:r.method="GET",t&&t.headers&&this._config.enableRequestHeaderTracking?r.requestHeaders=t.headers:r.requestHeaders={},r},t.prototype.getFailedFetchDiagnosticsMessage=function(e){var t="";try{kt(e)||(t+="string"==typeof e?"(url: '"+e+"')":"(url: '"+e.url+"')")}catch(e){this.diagLog().throwInternal(v.CRITICAL,_.FailedMonitorAjaxOpen,"Failed to grab failed fetch diagnostics message",{exception:ee.dump(e)})}return t},t.prototype.onFetchComplete=function(e,t){if(t)try{if(t.responseFinishedTime=re.Now(),t.CalculateMetrics(),t.ajaxTotalDuration<0)this.diagLog().throwInternal(v.WARNING,_.FailedMonitorAjaxDur,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",{fetchDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(e),requestSentTime:t.requestSentTime,responseFinishedTime:t.responseFinishedTime});else{var n={id:"|"+t.traceID+"."+t.spanID,target:t.getAbsoluteUrl(),name:t.getPathName(),type:"Fetch",duration:t.ajaxTotalDuration,success:e.status>=200&&e.status<400,responseCode:e.status,properties:{HttpMethod:t.method}},i=this.getFetchCorrelationContext(e);if(i&&(n.correlationContext=i),this._config.enableRequestHeaderTracking&&y.objKeys(t.requestHeaders).length>0&&(n.properties=n.properties||{},n.properties.requestHeaders=t.requestHeaders),this._config.enableResponseHeaderTracking){var r={};e.headers.forEach((function(e,t){r[t]=e})),y.objKeys(r).length>0&&(n.properties=n.properties||{},n.properties.responseHeaders=r)}this.trackDependencyDataInternal(n)}}catch(t){this.diagLog().throwInternal(v.WARNING,_.FailedMonitorAjaxGetCorrelationHeader,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",{fetchDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(e),exception:ee.dump(t)})}},t.prototype.onFetchFailed=function(e,t,n){if(t)try{if(t.responseFinishedTime=re.Now(),t.CalculateMetrics(),t.ajaxTotalDuration<0)this.diagLog().throwInternal(v.WARNING,_.FailedMonitorAjaxDur,"Failed to calculate the duration of the failed fetch call, monitoring data for this fetch call won't be sent.",{fetchDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(e),requestSentTime:t.requestSentTime,responseFinishedTime:t.responseFinishedTime});else{var i={id:"|"+t.traceID+"."+t.spanID,target:t.getAbsoluteUrl(),name:t.getPathName(),type:"Fetch",duration:t.ajaxTotalDuration,success:!1,responseCode:0,properties:{HttpMethod:t.method}};this.trackDependencyDataInternal(i,{error:n.message})}}catch(t){this.diagLog().throwInternal(v.WARNING,_.FailedMonitorAjaxGetCorrelationHeader,"Failed to calculate the duration of the failed fetch call, monitoring data for this fetch call won't be sent.",{fetchDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(e),exception:ee.dump(t)})}},t.prototype.getFetchCorrelationContext=function(e){try{var t=e.headers.get(Y.requestContextHeader);return ne.getCorrelationContext(t)}catch(t){this.diagLog().throwInternal(v.WARNING,_.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{fetchDiagnosticsMessage:this.getFailedFetchDiagnosticsMessage(e),exception:ee.dump(t)})}},t.identifier="AjaxDependencyPlugin",t}(N),Lt=i,Pt=function(){function e(e){e.queue=e.queue||[],e.version=e.version||2;var t=e.config||{};if(t.connectionString){var n=ke.parse(t.connectionString),i=n.ingestionendpoint;t.endpointUrl=i?i+"/v2/track":t.endpointUrl,t.instrumentationKey=n.instrumentationkey||t.instrumentationKey}this.appInsights=new Ke,this.properties=new Ct,this.dependencies=new Rt,this.core=new B,this.snippet=e,this.config=t,this.getSKUDefaults()}return e.prototype.trackEvent=function(e,t){this.appInsights.trackEvent(e,t)},e.prototype.trackPageView=function(e){var t=e||{};this.appInsights.trackPageView(t)},e.prototype.trackPageViewPerformance=function(e){var t=e||{};this.appInsights.trackPageViewPerformance(t)},e.prototype.trackException=function(e){!e.exception&&e.error&&(e.exception=e.error),this.appInsights.trackException(e)},e.prototype._onerror=function(e){this.appInsights._onerror(e)},e.prototype.trackTrace=function(e,t){this.appInsights.trackTrace(e,t)},e.prototype.trackMetric=function(e,t){this.appInsights.trackMetric(e,t)},e.prototype.startTrackPage=function(e){this.appInsights.startTrackPage(e)},e.prototype.stopTrackPage=function(e,t,n,i){this.appInsights.stopTrackPage(e,t,n,i)},e.prototype.startTrackEvent=function(e){this.appInsights.startTrackEvent(e)},e.prototype.stopTrackEvent=function(e,t,n){this.appInsights.stopTrackEvent(e,t,n)},e.prototype.addTelemetryInitializer=function(e){return this.appInsights.addTelemetryInitializer(e)},e.prototype.setAuthenticatedUserContext=function(e,t,n){void 0===n&&(n=!1),this.properties.context.user.setAuthenticatedUserContext(e,t,n)},e.prototype.clearAuthenticatedUserContext=function(){this.properties.context.user.clearAuthenticatedUserContext()},e.prototype.trackDependencyData=function(e){this.dependencies.trackDependencyData(e)},e.prototype.flush=function(e){void 0===e&&(e=!0),y.arrForEach(this.core.getTransmissionControls(),(function(t){y.arrForEach(t,(function(t){t.flush(e)}))}))},e.prototype.onunloadFlush=function(e){void 0===e&&(e=!0),y.arrForEach(this.core.getTransmissionControls(),(function(t){y.arrForEach(t,(function(t){t.onunloadFlush?t.onunloadFlush():t.flush(e)}))}))},e.prototype.loadAppInsights=function(e){void 0===e&&(e=!1);if(e&&this.config.extensions&&this.config.extensions.length>0)throw new Error("Extensions not allowed in legacy mode");var t=[],n=new ht;return t.push(n),t.push(this.properties),t.push(this.dependencies),t.push(this.appInsights),this.core.initialize(this.config,t),this.emptyQueue(),this.pollInternalLogs(),this.addHousekeepingBeforeUnload(this),this.context=this.properties.context,this},e.prototype.updateSnippetDefinitions=function(e){for(var t in this)y.isString(t)&&(e[t]=this[t])},e.prototype.emptyQueue=function(){try{if(ee.isArray(this.snippet.queue)){for(var e=this.snippet.queue.length,t=0;t<e;t++){(0,this.snippet.queue[t])()}this.snippet.queue=void 0,delete this.snippet.queue}}catch(e){e&&y.isFunction(e.toString)&&e.toString()}},e.prototype.pollInternalLogs=function(){this.core.pollInternalLogs()},e.prototype.addHousekeepingBeforeUnload=function(e){if(Object(o.l)()||Object(o.j)()){var t=function(){e.onunloadFlush(!1);var t=e.appInsights.core._extensions[He];t&&t.context&&t.context._sessionManager&&t.context._sessionManager.backup()};if(!e.appInsights.config.disableFlushOnBeforeUnload){var n=y.addEventHandler("beforeunload",t);(n=y.addEventHandler("pagehide",t)||n)||e.appInsights.core.logger.throwInternal(v.CRITICAL,_.FailedToAddHandlerForOnBeforeUnload,"Could not add handler for beforeunload and pagehide")}e.appInsights.config.disableFlushOnUnload||y.addEventHandler("pagehide",t)}},e.prototype.getSKUDefaults=function(){this.config.diagnosticLogInterval=this.config.diagnosticLogInterval&&this.config.diagnosticLogInterval>0?this.config.diagnosticLogInterval:1e4},e}(),Mt=function(){function e(t,n){this._hasLegacyInitializers=!1,this._queue=[],this.config=e.getDefaultConfig(t.config),this.appInsightsNew=n,this.context={addTelemetryInitializer:this.addTelemetryInitializers.bind(this)}}return e.getDefaultConfig=function(e){return e||(e={}),e.endpointUrl=e.endpointUrl||"https://dc.services.visualstudio.com/v2/track",e.sessionRenewalMs=18e5,e.sessionExpirationMs=864e5,e.maxBatchSizeInBytes=e.maxBatchSizeInBytes>0?e.maxBatchSizeInBytes:102400,e.maxBatchInterval=isNaN(e.maxBatchInterval)?15e3:e.maxBatchInterval,e.enableDebug=ee.stringToBoolOrDefault(e.enableDebug),e.disableExceptionTracking=ee.stringToBoolOrDefault(e.disableExceptionTracking),e.disableTelemetry=ee.stringToBoolOrDefault(e.disableTelemetry),e.verboseLogging=ee.stringToBoolOrDefault(e.verboseLogging),e.emitLineDelimitedJson=ee.stringToBoolOrDefault(e.emitLineDelimitedJson),e.diagnosticLogInterval=e.diagnosticLogInterval||1e4,e.autoTrackPageVisitTime=ee.stringToBoolOrDefault(e.autoTrackPageVisitTime),(isNaN(e.samplingPercentage)||e.samplingPercentage<=0||e.samplingPercentage>=100)&&(e.samplingPercentage=100),e.disableAjaxTracking=ee.stringToBoolOrDefault(e.disableAjaxTracking),e.maxAjaxCallsPerView=isNaN(e.maxAjaxCallsPerView)?500:e.maxAjaxCallsPerView,e.isBeaconApiDisabled=ee.stringToBoolOrDefault(e.isBeaconApiDisabled,!0),e.disableCorrelationHeaders=ee.stringToBoolOrDefault(e.disableCorrelationHeaders),e.correlationHeaderExcludedDomains=e.correlationHeaderExcludedDomains||["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],e.disableFlushOnBeforeUnload=ee.stringToBoolOrDefault(e.disableFlushOnBeforeUnload),e.disableFlushOnUnload=ee.stringToBoolOrDefault(e.disableFlushOnUnload,e.disableFlushOnBeforeUnload),e.enableSessionStorageBuffer=ee.stringToBoolOrDefault(e.enableSessionStorageBuffer,!0),e.isRetryDisabled=ee.stringToBoolOrDefault(e.isRetryDisabled),e.isCookieUseDisabled=ee.stringToBoolOrDefault(e.isCookieUseDisabled),e.isStorageUseDisabled=ee.stringToBoolOrDefault(e.isStorageUseDisabled),e.isBrowserLinkTrackingEnabled=ee.stringToBoolOrDefault(e.isBrowserLinkTrackingEnabled),e.enableCorsCorrelation=ee.stringToBoolOrDefault(e.enableCorsCorrelation),e},e.prototype.addTelemetryInitializers=function(e){var t=this;this._hasLegacyInitializers||(this.appInsightsNew.addTelemetryInitializer((function(e){t._processLegacyInitializers(e)})),this._hasLegacyInitializers=!0),this._queue.push(e)},e.prototype.startTrackPage=function(e){this.appInsightsNew.startTrackPage(e)},e.prototype.stopTrackPage=function(e,t,n,i){this.appInsightsNew.stopTrackPage(e,t,n)},e.prototype.trackPageView=function(e,t,n,i,r){var a={name:e,uri:t,properties:n,measurements:i};this.appInsightsNew.trackPageView(a)},e.prototype.trackEvent=function(e,t,n){this.appInsightsNew.trackEvent({name:e})},e.prototype.trackDependency=function(e,t,n,i,r,a,o){this.appInsightsNew.trackDependencyData({id:e,target:n,type:i,duration:r,properties:{HttpMethod:t},success:a,responseCode:o})},e.prototype.trackException=function(e,t,n,i,r){this.appInsightsNew.trackException({exception:e})},e.prototype.trackMetric=function(e,t,n,i,r,a){this.appInsightsNew.trackMetric({name:e,average:t,sampleCount:n,min:i,max:r})},e.prototype.trackTrace=function(e,t,n){this.appInsightsNew.trackTrace({message:e,severityLevel:n})},e.prototype.flush=function(e){this.appInsightsNew.flush(e)},e.prototype.setAuthenticatedUserContext=function(e,t,n){this.appInsightsNew.context.user.setAuthenticatedUserContext(e,t,n)},e.prototype.clearAuthenticatedUserContext=function(){this.appInsightsNew.context.user.clearAuthenticatedUserContext()},e.prototype._onerror=function(e,t,n,i,r){this.appInsightsNew._onerror({message:e,url:t,lineNumber:n,columnNumber:i,error:r})},e.prototype.startTrackEvent=function(e){this.appInsightsNew.startTrackEvent(e)},e.prototype.stopTrackEvent=function(e,t,n){this.appInsightsNew.stopTrackEvent(e,t,n)},e.prototype.downloadAndSetup=function(e){throw new Error("downloadAndSetup not implemented in web SKU")},e.prototype.updateSnippetDefinitions=function(e){for(var t in this)"string"==typeof t&&(e[t]=this[t])},e.prototype.loadAppInsights=function(){var e=this;if(this.config.iKey){var t=this.trackPageView;this.trackPageView=function(n,i,r){t.apply(e,[null,n,i,r])}}"function"==typeof this.snippet.logPageView&&(this.logPageView=function(t,n,i){e.trackPageView(null,t,n,i)});return"function"==typeof this.snippet.logEvent&&(this.logEvent=function(t,n,i){e.trackEvent(t,n,i)}),this},e.prototype._processLegacyInitializers=function(e){return e.tags[Ee]=this._queue,e},e}(),Ot=function(){function e(){}return e.getAppInsights=function(e,t){var n=new Pt(e),i=2!==t;if(2===t)return n.updateSnippetDefinitions(e),n.loadAppInsights(i),n;var r=new Mt(e,n);return r.updateSnippetDefinitions(e),n.loadAppInsights(i),r},e}();n.d(t,"ApplicationInsights",(function(){return Pt})),n.d(t,"Telemetry",(function(){return Lt})),n.d(t,"ApplicationInsightsContainer",(function(){return Ot})),n.d(t,"AppInsightsCore",(function(){return B})),n.d(t,"LoggingSeverity",(function(){return v})),n.d(t,"_InternalMessageId",(function(){return _})),n.d(t,"Util",(function(){return ee})),n.d(t,"SeverityLevel",(function(){return ge})),n.d(t,"Event",(function(){return de})),n.d(t,"Exception",(function(){return Te})),n.d(t,"Metric",(function(){return ve})),n.d(t,"PageView",(function(){return Ie})),n.d(t,"PageViewPerformance",(function(){return xe})),n.d(t,"RemoteDependencyData",(function(){return Me})),n.d(t,"Trace",(function(){return fe})),n.d(t,"DistributedTracingModes",(function(){return X})),n.d(t,"Sender",(function(){return ht})),n.d(t,"ApplicationAnalytics",(function(){return Ke})),n.d(t,"PropertiesPlugin",(function(){return Ct})),n.d(t,"DependenciesPlugin",(function(){return Rt}))}}]);